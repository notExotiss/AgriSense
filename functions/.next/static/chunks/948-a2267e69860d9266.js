"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{3727:function(e,t,a){a.d(t,{Z:function(){return C}});var r=a(5893),s=a(7294),l=a(1664),i=a.n(l),n=a(1571),o=a(8532),d=a(250),c=a(7497);function f(){let{theme:e,setTheme:t}=(0,n.F)(),a="dark"===e;return(0,r.jsx)(c.z,{variant:"ghost",size:"icon","aria-label":"Toggle theme",onClick:()=>t(a?"light":"dark"),children:a?(0,r.jsx)(o.Z,{className:"h-4 w-4"}):(0,r.jsx)(d.Z,{className:"h-4 w-4"})})}var m=a(7716),h=a(6789),u=a(7232),x=a(1549),g=a(2003),p=a(1352),b=a(512),v=a(8388);function j(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,v.m6)((0,b.W)(t))}let w=x.fC,y=x.xz;x.x8;let N=x.h_,k=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(x.aV,{className:j("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});k.displayName=x.aV.displayName;let T=(0,g.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),A=s.forwardRef((e,t)=>{let{side:a="right",className:s,children:l,...i}=e;return(0,r.jsxs)(N,{children:[(0,r.jsx)(k,{}),(0,r.jsxs)(x.VY,{ref:t,className:j(T({side:a}),s),...i,children:[(0,r.jsxs)(x.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]}),l]})]})});A.displayName=x.VY.displayName;let P=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:j("flex flex-col space-y-2 text-center sm:text-left",t),...a})};P.displayName="SheetHeader";let S=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(x.Dx,{ref:t,className:j("text-lg font-semibold text-foreground",a),...s})});S.displayName=x.Dx.displayName;let D=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(x.dk,{ref:t,className:j("text-sm text-muted-foreground",a),...s})});function C(){let[e,t]=s.useState(!1),[a,l]=s.useState([]);s.useEffect(()=>{let e=e=>l(Array.isArray(e.detail)?e.detail:[]);return window.addEventListener("agrisense:alerts",e),()=>window.removeEventListener("agrisense:alerts",e)},[]);let n=a.filter(e=>"critical"===e.type).length,o=s.useMemo(()=>{let e={};for(let t of a){let a=t.plotName||t.plotId||"Current AOI";e[a]||(e[a]=[]),e[a].push(t)}return e},[JSON.stringify(a)]),[d,x]=s.useState({});return(0,r.jsxs)("nav",{className:"border-b bg-background/80 backdrop-blur-sm sticky top-0 z-50",children:[(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"h-6 w-6 text-blue-600"}),(0,r.jsx)(i(),{href:"/",className:"font-bold text-xl",children:"AgriSense"})]}),(0,r.jsxs)("div",{className:"hidden md:flex items-center gap-6",children:[(0,r.jsx)(i(),{href:"/dashboard",className:"text-sm font-medium hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Dashboard"}),(0,r.jsx)(i(),{href:"/plots",className:"text-sm font-medium hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Plots"}),(0,r.jsx)(i(),{href:"/account",className:"text-sm font-medium hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Account"}),(0,r.jsxs)("button",{className:"relative",onClick:()=>t(e=>!e),"aria-label":"Alerts",children:[(0,r.jsx)(h.Z,{className:"h-5 w-5"}),a.length>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 text-[10px] bg-red-600 text-white rounded-full px-1",children:n||a.length})]}),(0,r.jsx)(f,{})]}),(0,r.jsxs)(w,{children:[(0,r.jsx)(y,{asChild:!0,className:"md:hidden",children:(0,r.jsx)(c.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(u.Z,{className:"h-5 w-5"})})}),(0,r.jsxs)(A,{children:[(0,r.jsxs)(P,{children:[(0,r.jsx)(S,{children:"Navigation"}),(0,r.jsx)(D,{children:"Access all AgriSense features"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 mt-6",children:[(0,r.jsx)(i(),{href:"/dashboard",className:"text-sm font-medium",children:"Dashboard"}),(0,r.jsx)(i(),{href:"/plots",className:"text-sm font-medium",children:"Plots"}),(0,r.jsx)(i(),{href:"/account",className:"text-sm font-medium",children:"Account"}),(0,r.jsx)(f,{})]})]})]})]})}),e&&(0,r.jsxs)("div",{className:"fixed right-4 top-16 z-50 w-80 rounded-lg border bg-background shadow",children:[(0,r.jsx)("div",{className:"p-3 border-b font-medium",children:"Alerts"}),(0,r.jsx)("div",{className:"max-h-80 overflow-auto p-2 space-y-2 text-sm",children:0===Object.keys(o).length?(0,r.jsx)("div",{className:"text-muted-foreground p-2",children:"No alerts"}):Object.entries(o).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"rounded border",children:[(0,r.jsxs)("button",{className:"w-full text-left p-2 font-medium flex items-center justify-between",onClick:()=>x(e=>({...e,[t]:!e[t]})),children:[(0,r.jsx)("span",{className:"break-words",children:t}),(0,r.jsx)("span",{className:"text-xs opacity-70",children:a.length})]}),d[t]&&(0,r.jsx)("div",{className:"p-2 space-y-2",children:a.map(e=>(0,r.jsxs)("div",{className:"p-2 rounded border overflow-hidden break-words ".concat("critical"===e.type?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800"),children:[(0,r.jsx)("div",{className:"font-medium break-words",children:e.message}),(0,r.jsx)("div",{className:"opacity-80 break-words",children:e.details})]},e.id))})]},t)})})]})]})}D.displayName=x.dk.displayName},5133:function(e,t,a){var r=a(5893),s=a(7294);t.Z=e=>{let{data:t,title:a="NDVI Time Series",height:l=300,showConfidence:i=!1,showCloudCover:n=!1}=e,o=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(!o.current||!t.length)return;let e=o.current,r=e.getContext("2d");if(!r)return;e.width=e.offsetWidth*window.devicePixelRatio,e.height=l*window.devicePixelRatio,r.scale(window.devicePixelRatio,window.devicePixelRatio),r.clearRect(0,0,e.offsetWidth,l);let s={top:20,right:40,bottom:40,left:60},d=e.offsetWidth-s.left-s.right,c=l-s.top-s.bottom,f=t.map(e=>new Date(e.date)),m=t.map(e=>e.ndvi),h=new Date(Math.min(...f.map(e=>e.getTime()))),u=new Date(Math.max(...f.map(e=>e.getTime()))),x=Math.min(...m),g=Math.max(...m),p=g-x,b=x-.1*p,v=g+.1*p,j=e=>s.left+(e.getTime()-h.getTime())/(u.getTime()-h.getTime())*d,w=e=>s.top+c-(e-b)/(v-b)*c;r.strokeStyle="#e0e0e0",r.lineWidth=1;for(let e=0;e<=5;e++){let t=s.top+c/5*e;r.beginPath(),r.moveTo(s.left,t),r.lineTo(s.left+d,t),r.stroke()}for(let e=0;e<=5;e++){let t=s.left+d/5*e;r.beginPath(),r.moveTo(t,s.top),r.lineTo(t,s.top+c),r.stroke()}if(i&&t.some(e=>e.confidence)){r.fillStyle="rgba(0, 123, 255, 0.1)",r.beginPath(),t.forEach((e,t)=>{let a=j(new Date(e.date)),s=e.confidence||.9,l=w(e.ndvi+(1-s)*.1);0===t?r.moveTo(a,l):r.lineTo(a,l)});for(let e=t.length-1;e>=0;e--){let a=t[e],s=j(new Date(a.date)),l=a.confidence||.9,i=w(a.ndvi-(1-l)*.1);r.lineTo(s,i)}r.closePath(),r.fill()}r.strokeStyle="#007bff",r.lineWidth=2,r.beginPath(),t.forEach((e,t)=>{let a=j(new Date(e.date)),s=w(e.ndvi);0===t?r.moveTo(a,s):r.lineTo(a,s)}),r.stroke(),r.fillStyle="#007bff",t.forEach(e=>{let t=j(new Date(e.date)),a=w(e.ndvi);r.beginPath(),r.arc(t,a,3,0,2*Math.PI),r.fill()}),r.strokeStyle="#333",r.lineWidth=2,r.beginPath(),r.moveTo(s.left,s.top+c),r.lineTo(s.left+d,s.top+c),r.stroke(),r.beginPath(),r.moveTo(s.left,s.top),r.lineTo(s.left,s.top+c),r.stroke(),r.fillStyle="#333",r.font="12px Arial",r.textAlign="center";for(let e=0;e<=5;e++){let t=new Date(h.getTime()+(u.getTime()-h.getTime())*(e/5)),a=s.left+d/5*e;r.fillText(t.toLocaleDateString(),a,s.top+c+20)}r.textAlign="right";for(let e=0;e<=5;e++){let t=b+e/5*(v-b),a=s.top+c-c/5*e;r.fillText(t.toFixed(2),s.left-10,a+4)}r.textAlign="center",r.font="bold 16px Arial",r.fillText(a,e.offsetWidth/2,20),n&&(r.font="12px Arial",r.textAlign="left",r.fillText("Cloud Cover:",s.left+d+10,s.top+20),t.forEach((e,t)=>{if(void 0!==e.cloudCover){let t=j(new Date(e.date)),a=w(e.ndvi),s=1-e.cloudCover/100;r.fillStyle="rgba(255, 0, 0, ".concat(s,")"),r.beginPath(),r.arc(t,a,5,0,2*Math.PI),r.fill()}}))},[t,l,i,n,a]),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("canvas",{ref:o,style:{width:"100%",height:"".concat(l,"px")},className:"border rounded"})})}},7497:function(e,t,a){a.d(t,{z:function(){return o}});var r=a(5893),s=a(7294),l=a(2003),i=a(1966);let n=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:opacity-90",secondary:"bg-secondary text-secondary-foreground hover:opacity-90",outline:"border bg-transparent hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:opacity-90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,...o}=e;return(0,r.jsx)("button",{className:(0,i.cn)(n({variant:s,size:l,className:a})),ref:t,...o})});o.displayName="Button"},1966:function(e,t,a){a.d(t,{cn:function(){return l}});var r=a(512),s=a(8388);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}},6394:function(e,t,a){a.d(t,{I8:function(){return d},oy:function(){return c}});var r=a(3977),s=a(2370);let l={apiKey:"AIzaSyBkGPzwLd_hQj-yPB7mxNijPW89iDXym2A",authDomain:"brightbite-81e92.firebaseapp.com",projectId:"brightbite-81e92",storageBucket:"brightbite-81e92.firebasestorage.app",messagingSenderId:"273197668689",appId:"1:273197668689:web:fc5eee2714d4bb89365b70"},i=Object.values(l).every(e=>"string"==typeof e&&e.length>0);function n(){return i?(0,r.C6)().length?(0,r.Mq)():(0,r.ZF)(l):null}let o=null;n();let d=function(){if(!i)return null;if(o)return o;let e=n();return e?o=(0,s.v0)(e):null}(),c=i}}]);
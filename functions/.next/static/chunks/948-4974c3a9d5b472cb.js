"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{3727:function(e,t,a){a.d(t,{Z:function(){return C}});var s=a(5893),r=a(7294),i=a(1664),l=a.n(i),o=a(1571),n=a(8532),d=a(250),c=a(7497);function f(){let{theme:e,setTheme:t}=(0,o.F)(),a="dark"===e;return(0,s.jsx)(c.z,{variant:"ghost",size:"icon","aria-label":"Toggle theme",onClick:()=>t(a?"light":"dark"),children:a?(0,s.jsx)(n.Z,{className:"h-4 w-4"}):(0,s.jsx)(d.Z,{className:"h-4 w-4"})})}var m=a(7716),h=a(6789),u=a(7232),x=a(1549),g=a(2003),p=a(1352),b=a(512),v=a(8388);function j(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,v.m6)((0,b.W)(t))}let w=x.fC,N=x.xz;x.x8;let y=x.h_,k=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(x.aV,{className:j("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});k.displayName=x.aV.displayName;let T=(0,g.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),A=r.forwardRef((e,t)=>{let{side:a="right",className:r,children:i,...l}=e;return(0,s.jsxs)(y,{children:[(0,s.jsx)(k,{}),(0,s.jsxs)(x.VY,{ref:t,className:j(T({side:a}),r),...l,children:[(0,s.jsxs)(x.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]}),i]})]})});A.displayName=x.VY.displayName;let P=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:j("flex flex-col space-y-2 text-center sm:text-left",t),...a})};P.displayName="SheetHeader";let S=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(x.Dx,{ref:t,className:j("text-lg font-semibold text-foreground",a),...r})});S.displayName=x.Dx.displayName;let D=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(x.dk,{ref:t,className:j("text-sm text-muted-foreground",a),...r})});function C(){let[e,t]=r.useState(!1),[a,i]=r.useState([]);r.useEffect(()=>{let e=e=>i(Array.isArray(e.detail)?e.detail:[]);return window.addEventListener("agrisense:alerts",e),()=>window.removeEventListener("agrisense:alerts",e)},[]);let o=a.filter(e=>"critical"===e.type).length,n=r.useMemo(()=>{let e={};for(let t of a){let a=t.plotName||t.plotId||"Current AOI";e[a]||(e[a]=[]),e[a].push(t)}return e},[JSON.stringify(a)]),[d,x]=r.useState({});return(0,s.jsxs)("nav",{className:"border-b bg-background/80 backdrop-blur-sm sticky top-0 z-50",children:[(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-6 w-6 text-blue-600"}),(0,s.jsx)(l(),{href:"/",className:"font-bold text-xl",children:"AgriSense"})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center gap-6",children:[(0,s.jsx)(l(),{href:"/dashboard",className:"text-sm font-medium hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Dashboard"}),(0,s.jsx)(l(),{href:"/plots",className:"text-sm font-medium hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Plots"}),(0,s.jsx)(l(),{href:"/account",className:"text-sm font-medium hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Account"}),(0,s.jsxs)("button",{className:"relative",onClick:()=>t(e=>!e),"aria-label":"Alerts",children:[(0,s.jsx)(h.Z,{className:"h-5 w-5"}),a.length>0&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 text-[10px] bg-red-600 text-white rounded-full px-1",children:o||a.length})]}),(0,s.jsx)(f,{})]}),(0,s.jsxs)(w,{children:[(0,s.jsx)(N,{asChild:!0,className:"md:hidden",children:(0,s.jsx)(c.z,{variant:"ghost",size:"sm",children:(0,s.jsx)(u.Z,{className:"h-5 w-5"})})}),(0,s.jsxs)(A,{children:[(0,s.jsxs)(P,{children:[(0,s.jsx)(S,{children:"Navigation"}),(0,s.jsx)(D,{children:"Access all AgriSense features"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 mt-6",children:[(0,s.jsx)(l(),{href:"/dashboard",className:"text-sm font-medium",children:"Dashboard"}),(0,s.jsx)(l(),{href:"/plots",className:"text-sm font-medium",children:"Plots"}),(0,s.jsx)(l(),{href:"/account",className:"text-sm font-medium",children:"Account"}),(0,s.jsx)(f,{})]})]})]})]})}),e&&(0,s.jsxs)("div",{className:"fixed right-4 top-16 z-50 w-80 rounded-lg border bg-background shadow",children:[(0,s.jsx)("div",{className:"p-3 border-b font-medium",children:"Alerts"}),(0,s.jsx)("div",{className:"max-h-80 overflow-auto p-2 space-y-2 text-sm",children:0===Object.keys(n).length?(0,s.jsx)("div",{className:"text-muted-foreground p-2",children:"No alerts"}):Object.entries(n).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"rounded border",children:[(0,s.jsxs)("button",{className:"w-full text-left p-2 font-medium flex items-center justify-between",onClick:()=>x(e=>({...e,[t]:!e[t]})),children:[(0,s.jsx)("span",{className:"break-words",children:t}),(0,s.jsx)("span",{className:"text-xs opacity-70",children:a.length})]}),d[t]&&(0,s.jsx)("div",{className:"p-2 space-y-2",children:a.map(e=>(0,s.jsxs)("div",{className:"p-2 rounded border overflow-hidden break-words ".concat("critical"===e.type?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800"),children:[(0,s.jsx)("div",{className:"font-medium break-words",children:e.message}),(0,s.jsx)("div",{className:"opacity-80 break-words",children:e.details})]},e.id))})]},t)})})]})]})}D.displayName=x.dk.displayName},5133:function(e,t,a){var s=a(5893),r=a(7294);t.Z=e=>{let{data:t,title:a="NDVI Time Series",height:i=300,showConfidence:l=!1,showCloudCover:o=!1}=e,n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!n.current||!t.length)return;let e=n.current,s=e.getContext("2d");if(!s)return;e.width=e.offsetWidth*window.devicePixelRatio,e.height=i*window.devicePixelRatio,s.scale(window.devicePixelRatio,window.devicePixelRatio),s.clearRect(0,0,e.offsetWidth,i);let r={top:20,right:40,bottom:40,left:60},d=e.offsetWidth-r.left-r.right,c=i-r.top-r.bottom,f=t.map(e=>new Date(e.date)),m=t.map(e=>e.ndvi),h=new Date(Math.min(...f.map(e=>e.getTime()))),u=new Date(Math.max(...f.map(e=>e.getTime()))),x=Math.min(...m),g=Math.max(...m),p=g-x,b=x-.1*p,v=g+.1*p,j=e=>r.left+(e.getTime()-h.getTime())/(u.getTime()-h.getTime())*d,w=e=>r.top+c-(e-b)/(v-b)*c;s.strokeStyle="#e0e0e0",s.lineWidth=1;for(let e=0;e<=5;e++){let t=r.top+c/5*e;s.beginPath(),s.moveTo(r.left,t),s.lineTo(r.left+d,t),s.stroke()}for(let e=0;e<=5;e++){let t=r.left+d/5*e;s.beginPath(),s.moveTo(t,r.top),s.lineTo(t,r.top+c),s.stroke()}if(l&&t.some(e=>e.confidence)){s.fillStyle="rgba(0, 123, 255, 0.1)",s.beginPath(),t.forEach((e,t)=>{let a=j(new Date(e.date)),r=e.confidence||.9,i=w(e.ndvi+(1-r)*.1);0===t?s.moveTo(a,i):s.lineTo(a,i)});for(let e=t.length-1;e>=0;e--){let a=t[e],r=j(new Date(a.date)),i=a.confidence||.9,l=w(a.ndvi-(1-i)*.1);s.lineTo(r,l)}s.closePath(),s.fill()}s.strokeStyle="#007bff",s.lineWidth=2,s.beginPath(),t.forEach((e,t)=>{let a=j(new Date(e.date)),r=w(e.ndvi);0===t?s.moveTo(a,r):s.lineTo(a,r)}),s.stroke(),s.fillStyle="#007bff",t.forEach(e=>{let t=j(new Date(e.date)),a=w(e.ndvi);s.beginPath(),s.arc(t,a,3,0,2*Math.PI),s.fill()}),s.strokeStyle="#333",s.lineWidth=2,s.beginPath(),s.moveTo(r.left,r.top+c),s.lineTo(r.left+d,r.top+c),s.stroke(),s.beginPath(),s.moveTo(r.left,r.top),s.lineTo(r.left,r.top+c),s.stroke(),s.fillStyle="#333",s.font="12px Arial",s.textAlign="center";for(let e=0;e<=5;e++){let t=new Date(h.getTime()+(u.getTime()-h.getTime())*(e/5)),a=r.left+d/5*e;s.fillText(t.toLocaleDateString(),a,r.top+c+20)}s.textAlign="right";for(let e=0;e<=5;e++){let t=b+e/5*(v-b),a=r.top+c-c/5*e;s.fillText(t.toFixed(2),r.left-10,a+4)}s.textAlign="center",s.font="bold 16px Arial",s.fillText(a,e.offsetWidth/2,20),o&&(s.font="12px Arial",s.textAlign="left",s.fillText("Cloud Cover:",r.left+d+10,r.top+20),t.forEach((e,t)=>{if(void 0!==e.cloudCover){let t=j(new Date(e.date)),a=w(e.ndvi),r=1-e.cloudCover/100;s.fillStyle="rgba(255, 0, 0, ".concat(r,")"),s.beginPath(),s.arc(t,a,5,0,2*Math.PI),s.fill()}}))},[t,i,l,o,a]),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("canvas",{ref:n,style:{width:"100%",height:"".concat(i,"px")},className:"border rounded"})})}},7497:function(e,t,a){a.d(t,{z:function(){return n}});var s=a(5893),r=a(7294),i=a(2003),l=a(1966);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:opacity-90",secondary:"bg-secondary text-secondary-foreground hover:opacity-90",outline:"border bg-transparent hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:opacity-90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),n=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,...n}=e;return(0,s.jsx)("button",{className:(0,l.cn)(o({variant:r,size:i,className:a})),ref:t,...n})});n.displayName="Button"},1966:function(e,t,a){a.d(t,{cn:function(){return i}});var s=a(512),r=a(8388);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}},6394:function(e,t,a){a.d(t,{I8:function(){return l}});var s=a(3977),r=a(2370);let i=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)({apiKey:"AIzaSyBkGPzwLd_hQj-yPB7mxNijPW89iDXym2A",authDomain:"brightbite-81e92.firebaseapp.com",projectId:"brightbite-81e92",storageBucket:"brightbite-81e92.firebasestorage.app",messagingSenderId:"273197668689",appId:"1:273197668689:web:fc5eee2714d4bb89365b70"}),l=(0,r.v0)(i)}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{116:function(e,i,l){"use strict";l.d(i,{Z:function(){return t}});let t=(0,l(1373).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},528:function(e,i,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return l(535)}])},535:function(e,i,l){"use strict";l.r(i),l.d(i,{default:function(){return Y}});var t=l(5893),n=l(7294),a=l(5152),s=l.n(a),r=l(6316),d=l(1373);let o=(0,d.Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),c=(0,d.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),u=(0,d.Z)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),m=(0,d.Z)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var v=l(116);let x=(0,d.Z)("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),h=(0,d.Z)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),p=(0,d.Z)("waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]),b=(0,d.Z)("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);var g=l(2370),f=l(9448),y=l(4712),N=l(3945);let j=(0,d.Z)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),w=(0,d.Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function z(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=Number(e);return Number.isFinite(l)?l:i}function S(e){return e&&"object"==typeof e?{min:z(e.min),max:z(e.max),mean:z(e.mean)}:null}function k(e){let{context:i,objective:l="balanced"}=e,[a,s]=(0,n.useState)(!1),[d,o]=(0,n.useState)(""),[c,u]=(0,n.useState)([]),[m,x]=(0,n.useState)("idle"),[h,p]=(0,n.useState)("unavailable"),[b,g]=(0,n.useState)({model:null,retries:0,degraded:!1,attempted:[]}),f=(0,n.useRef)(null),y=(0,n.useMemo)(()=>!!((null==i?void 0:i.ndviStats)||(null==i?void 0:i.weather)||(null==i?void 0:i.timeSeries)),[i]);async function N(e,t){let n=(e||d).trim();if(n){u(e=>[...e,{role:"user",text:n}]),e||o(""),x("loading");try{let e=function(e){var i,l,t,n,a,s,r,d,o,c,u,m,v,x,h,p,b,g,f,y,N,j,w,k,A,M,C,I,T,D,F,P,O,E,G,R,V,L,_,W;let Z=e||{};return{ndviStats:S(Z.ndviStats),soilStats:S(Z.soilStats),etStats:S(Z.etStats),weather:{source:(null==Z?void 0:null===(i=Z.weather)||void 0===i?void 0:i.source)||(null==Z?void 0:null===(t=Z.weather)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.source)||void 0,isSimulated:!!(null==Z?void 0:null===(n=Z.weather)||void 0===n?void 0:n.isSimulated),current:{temperature:z(null!==(V=null==Z?void 0:null===(r=Z.weather)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:null===(a=s.current)||void 0===a?void 0:a.temperature)&&void 0!==V?V:null==Z?void 0:null===(o=Z.weather)||void 0===o?void 0:null===(d=o.current)||void 0===d?void 0:d.temperature),humidity:z(null!==(L=null==Z?void 0:null===(m=Z.weather)||void 0===m?void 0:null===(u=m.data)||void 0===u?void 0:null===(c=u.current)||void 0===c?void 0:c.humidity)&&void 0!==L?L:null==Z?void 0:null===(x=Z.weather)||void 0===x?void 0:null===(v=x.current)||void 0===v?void 0:v.humidity),precipitation:z(null!==(_=null==Z?void 0:null===(b=Z.weather)||void 0===b?void 0:null===(p=b.data)||void 0===p?void 0:null===(h=p.current)||void 0===h?void 0:h.precipitation)&&void 0!==_?_:null==Z?void 0:null===(f=Z.weather)||void 0===f?void 0:null===(g=f.current)||void 0===g?void 0:g.precipitation),windSpeed:z(null!==(W=null==Z?void 0:null===(j=Z.weather)||void 0===j?void 0:null===(N=j.data)||void 0===N?void 0:null===(y=N.current)||void 0===y?void 0:y.windSpeed)&&void 0!==W?W:null==Z?void 0:null===(k=Z.weather)||void 0===k?void 0:null===(w=k.current)||void 0===w?void 0:w.windSpeed)}},timeSeries:{source:(null==Z?void 0:null===(A=Z.timeSeries)||void 0===A?void 0:A.source)||(null==Z?void 0:null===(C=Z.timeSeries)||void 0===C?void 0:null===(M=C.data)||void 0===M?void 0:M.source)||void 0,isSimulated:!!(null==Z?void 0:null===(I=Z.timeSeries)||void 0===I?void 0:I.isSimulated),summary:(null==Z?void 0:null===(D=Z.timeSeries)||void 0===D?void 0:null===(T=D.data)||void 0===T?void 0:T.summary)||(null==Z?void 0:null===(F=Z.timeSeries)||void 0===F?void 0:F.summary)||null},inference:{confidence:z(null==Z?void 0:null===(P=Z.inference)||void 0===P?void 0:P.confidence),anomalyLevel:(null==Z?void 0:null===(E=Z.inference)||void 0===E?void 0:null===(O=E.anomaly)||void 0===O?void 0:O.level)||null,trend:(null==Z?void 0:null===(R=Z.inference)||void 0===R?void 0:null===(G=R.forecast)||void 0===G?void 0:G.trend)||null},grid3x3:Array.isArray(null==Z?void 0:Z.grid3x3)?Z.grid3x3.slice(0,9):[],selectedCell:"string"==typeof(null==Z?void 0:Z.selectedCell)?Z.selectedCell:null,warnings:Array.isArray(null==Z?void 0:Z.warnings)?Z.warnings.slice(0,8):[],providersTried:Array.isArray(null==Z?void 0:Z.providersTried)?Z.providersTried.slice(0,8).map(e=>({provider:null==e?void 0:e.provider,ok:!!(null==e?void 0:e.ok),reason:(null==e?void 0:e.reason)||void 0})):[]}}(i),a={prompt:n,context:e,objective:l,analysisType:"chat",mode:t,history:c.slice(-8).map(e=>({role:e.role,text:e.text}))};JSON.stringify(a).length>12e4&&(a={...a,context:{...e,providersTried:[],warnings:[]}});let s=await fetch("/api/gemini",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),r=await s.json().catch(()=>({}));if(!s.ok){let e=String((null==r?void 0:r.error)||s.statusText||"analysis_failed"),i=(null==r?void 0:r.message)||"Analysis unavailable right now.";x(e.includes("provider")?"provider-outage":"partial-data"),u(e=>[...e,{role:"assistant",text:i}]);return}let d=function(e){let i=String(e||"").trim();if(!i)return"";let l=i.match(/```(?:json)?\s*([\s\S]*?)```/i);(null==l?void 0:l[1])&&(i=l[1].trim());try{let e=JSON.parse(i);if("string"==typeof e)return e.trim();if(e&&"object"==typeof e){let i=e.answer||e.response||e.text;if("string"==typeof i&&i.trim())return i.trim()}}catch(l){let e=i.match(/"answer"\s*:\s*"([\s\S]*?)"/i);(null==e?void 0:e[1])&&(i=e[1].replace(/\\n/g,"\n").trim())}return i.replace(/^["'`{[]+/,"").replace(/["'`\]}]+$/,"").trim()}((null==r?void 0:r.answer)||(null==r?void 0:r.suggestion)||(null==r?void 0:r.output))||"No recommendation generated.",o=(null==r?void 0:r.assistantBackend)==="llm-gemini"?"llm-gemini":"unavailable",m=!!(null==r?void 0:r.unavailable)||"unavailable"===o;p(o),g({model:"string"==typeof(null==r?void 0:r.llmFinalModel)?r.llmFinalModel:null,retries:Number((null==r?void 0:r.llmRetries)||0),degraded:!!(null==r?void 0:r.llmDegraded),attempted:Array.isArray(null==r?void 0:r.llmAttemptedModels)?r.llmAttemptedModels.slice(0,4):[]});let v={sections:(null==r?void 0:r.sections)||void 0,evidence:Array.isArray(null==r?void 0:r.evidence)?r.evidence.slice(0,5):[],tasks:Array.isArray(null==r?void 0:r.tasks)?r.tasks.slice(0,4):[],renderModel:null==r?void 0:r.renderModel},h=!!(null==r?void 0:r.isSimulatedInputs);x(m?"unavailable":h?"partial-data":"idle"),u(e=>[...e,{role:"assistant",text:d,detail:v}])}catch(e){p("unavailable"),x("unavailable"),u(e=>[...e,{role:"assistant",text:"Gemini could not be reached right now. Retry in a few seconds."}])}}}return(0,n.useEffect)(()=>{var e;null===(e=f.current)||void 0===e||e.scrollTo({top:1e7,behavior:"smooth"})},[c,m]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>s(e=>!e),className:"fixed bottom-5 right-5 z-50 flex h-14 w-14 items-center justify-center rounded-2xl border border-zinc-700/20 bg-zinc-950 text-zinc-50 shadow-lg shadow-black/25","aria-label":"Open AI Assistant",children:(0,t.jsx)(j,{className:"h-6 w-6"})}),a&&(0,t.jsxs)("section",{className:"liquid-glass fixed bottom-24 right-5 z-50 w-[min(96vw,25rem)] overflow-hidden rounded-2xl border border-zinc-200 bg-white shadow-2xl shadow-black/15",children:[(0,t.jsxs)("header",{className:"border-b border-zinc-200 bg-zinc-950 px-4 py-3 text-zinc-50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold tracking-wide",children:"AI Assistant"}),(0,t.jsx)("p",{className:"text-xs text-zinc-300",children:"Question-first agronomy guidance"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"rounded-full border border-zinc-600 px-2 py-0.5 text-[11px]",children:"llm-gemini"===h?"Gemini online":"Gemini unavailable"}),(0,t.jsx)("span",{className:"rounded-full border border-zinc-600 px-2 py-0.5 text-[11px]",children:"loading"===m?"Analyzing":"partial-data"===m?"Partial data":"provider-outage"===m?"Provider outage":"unavailable"===m?"Gemini unavailable":"offline"===m?"Offline fallback":"Ready"})]})]}),(0,t.jsxs)("p",{className:"mt-2 text-[11px] text-zinc-300",children:[b.model?"Model: ".concat(b.model):"Model: n/a",b.attempted.length>0?" | attempted: ".concat(b.attempted.join(", ")):"",b.retries>0?" | retries ".concat(b.retries):"",b.degraded?" | degraded":""]})]}),(0,t.jsxs)("div",{ref:f,className:"max-h-80 space-y-3 overflow-auto bg-zinc-50 px-4 py-4 text-sm",children:[!c.length&&(0,t.jsx)("div",{className:"rounded-xl border border-dashed border-zinc-300 bg-white p-3 text-zinc-600",children:y?"Ask direct questions like: Why is P5 stressed? What should I do tomorrow?":"Run an analysis first to provide data-aware recommendations."}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("button",{onClick:()=>void N("Why is this selected plot point stressed right now?","stress-debug"),className:"rounded-full border border-zinc-300 bg-white px-2 py-1 text-[11px] text-zinc-700 hover:bg-zinc-100",children:"Explain anomaly"}),(0,t.jsx)("button",{onClick:()=>void N("Give me a water-saving plan for tomorrow.","irrigation-plan"),className:"rounded-full border border-zinc-300 bg-white px-2 py-1 text-[11px] text-zinc-700 hover:bg-zinc-100",children:"Water-saving plan"}),(0,t.jsx)("button",{onClick:()=>void N("What should I do next to protect yield?","next-actions"),className:"rounded-full border border-zinc-300 bg-white px-2 py-1 text-[11px] text-zinc-700 hover:bg-zinc-100",children:"Yield-priority plan"}),(0,t.jsx)("button",{onClick:()=>void N("Run through a what-if setup for irrigation and risk.","what-if-explainer"),className:"rounded-full border border-zinc-300 bg-white px-2 py-1 text-[11px] text-zinc-700 hover:bg-zinc-100",children:"Run what-if"})]}),c.map((e,i)=>{var l,n,a,s,r,d;let o="assistant"===e.role?function(e){var i,l;let t=[...Array.isArray(null==e?void 0:null===(i=e.sections)||void 0===i?void 0:i.actions)&&(null==e?void 0:null===(l=e.sections)||void 0===l?void 0:l.actions)||[],...Array.isArray(null==e?void 0:e.tasks)?e.tasks.map(e=>"string"==typeof e?e:(null==e?void 0:e.title)||"").filter(Boolean):[]],n=new Set,a=[];for(let e of t){let i=e.trim().toLowerCase();if(!(!i||n.has(i))&&(n.add(i),a.push(e.trim()),a.length>=4))break}return a}(e.detail):[],c="assistant"===e.role&&Array.isArray(null===(l=e.detail)||void 0===l?void 0:l.evidence)&&(null===(n=e.detail)||void 0===n?void 0:n.evidence)||[];return(0,t.jsxs)("div",{className:"user"===e.role?"ml-auto w-fit max-w-[85%] rounded-2xl rounded-br-sm bg-emerald-900 px-3 py-2 text-emerald-50":"w-fit max-w-[92%] rounded-2xl rounded-bl-sm border border-zinc-200 bg-white px-3 py-2 text-zinc-800",children:[(0,t.jsx)("p",{className:"assistant"===e.role?"whitespace-pre-wrap":"",children:e.text}),"assistant"===e.role&&(null===(s=e.detail)||void 0===s?void 0:null===(a=s.sections)||void 0===a?void 0:a.rationale)&&(0,t.jsxs)("p",{className:"mt-2 text-xs text-zinc-600",children:[(0,t.jsx)("span",{className:"font-semibold text-zinc-700",children:"Why:"})," ",e.detail.sections.rationale]}),"assistant"===e.role&&(null===(d=e.detail)||void 0===d?void 0:null===(r=d.sections)||void 0===r?void 0:r.forecast)&&(0,t.jsxs)("p",{className:"mt-2 text-xs text-zinc-600",children:[(0,t.jsx)("span",{className:"font-semibold text-zinc-700",children:"Forecast:"})," ",e.detail.sections.forecast]}),"assistant"===e.role&&o.length>0&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-zinc-700",children:"Suggested actions"}),(0,t.jsx)("ul",{className:"mt-1 list-disc space-y-0.5 pl-4 text-xs text-zinc-600",children:o.map((e,i)=>(0,t.jsx)("li",{children:e},"".concat(i,"-").concat(e)))})]}),"assistant"===e.role&&c.length>0&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-zinc-700",children:"Evidence"}),(0,t.jsx)("ul",{className:"mt-1 list-disc space-y-0.5 pl-4 text-xs text-zinc-600",children:c.map((e,i)=>(0,t.jsx)("li",{children:e},"".concat(i,"-").concat(e)))})]})]},"".concat(e.role,"-").concat(i))}),"loading"===m&&(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-zinc-600",children:[(0,t.jsx)(r.Z,{className:"h-4 w-4 animate-spin"}),"Building recommendation"]}),("partial-data"===m||"provider-outage"===m)&&(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-xl border border-amber-200 bg-amber-50 px-3 py-2 text-amber-800",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4"}),"Some providers are degraded. Guidance is conservative."]}),"unavailable"===m&&(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4"}),"Gemini unavailable right now. Retry in a few seconds."]})]}),(0,t.jsx)("footer",{className:"border-t border-zinc-200 bg-white p-3",children:(0,t.jsxs)("div",{className:"flex items-end gap-2",children:[(0,t.jsx)("textarea",{value:d,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())},rows:2,placeholder:"Ask a direct field question...",className:"min-h-[2.5rem] flex-1 resize-none rounded-xl border border-zinc-300 px-3 py-2 text-sm outline-none transition focus:border-emerald-700 focus:ring-2 focus:ring-emerald-200"}),(0,t.jsx)("button",{onClick:()=>void N(),disabled:"loading"===m||!d.trim(),className:"inline-flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-900 text-emerald-50 disabled:cursor-not-allowed disabled:bg-zinc-300","aria-label":"Send",children:(0,t.jsx)(w,{className:"h-4 w-4"})})]})})]})]})}var A=l(5133);function M(e){let i=3*e.row+e.col+1;return"P".concat(i)}function C(e){let{cells:i,selectedCell:l,onSelectCell:n,visible:a=!0,frame:s}=e;if(!a)return null;let r=function(e){if(Array.isArray(e)&&e.length)return e;let i=[];for(let e=0;e<3;e++)for(let l=0;l<3;l++)i.push({cellId:"".concat(e,"-").concat(l),row:e,col:l,mean:0,min:0,max:0,validPixelRatio:0,stressLevel:"unknown"});return i}(i);return(0,t.jsx)("div",{className:"pointer-events-none absolute grid grid-cols-3 grid-rows-3 overflow-hidden",style:s?{left:Math.max(0,Math.round(s.left)),top:Math.max(0,Math.round(s.top)),width:Math.max(1,Math.floor(s.width)),height:Math.max(1,Math.floor(s.height)),boxSizing:"border-box"}:{inset:0},children:r.map(e=>{var i;let a=l===e.cellId,s=(i=e.stressLevel,a?"#22d3ee":"high"===i?"#dc2626":"moderate"===i?"#d97706":"low"===i?"#15803d":"#64748b");return(0,t.jsx)("button",{type:"button",onClick:()=>null==n?void 0:n(e.cellId),className:"pointer-events-auto relative border transition-colors",style:{borderColor:a?"#67e8f9":"".concat(s),borderWidth:a?2:1,backgroundColor:a?"".concat(s,"3b"):"".concat(s,"14"),boxShadow:a?"inset 0 0 0 1px rgba(254,240,138,0.92)":"inset 0 0 0 1px rgba(226,232,240,0.18)"},"aria-label":"Select plot point ".concat(M(e)),children:(0,t.jsx)("span",{className:"absolute left-1 top-1 rounded bg-black/55 px-1.5 py-0.5 text-[10px] text-white",children:M(e)})},"grid-image-".concat(e.cellId))})})}var I=l(7497),T=l(2003),D=l(1966);let F=(0,T.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:opacity-90",secondary:"border-transparent bg-secondary text-secondary-foreground",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function P(e){let{className:i,variant:l,...n}=e;return(0,t.jsx)("div",{className:(0,D.cn)(F({variant:l}),i),...n})}var O=l(6394),E=l(8704);let G=s()(()=>Promise.all([l.e(269),l.e(165),l.e(99)]).then(l.bind(l,4246)),{loadableGenerated:{webpack:()=>[4246]},ssr:!1}),R=s()(()=>Promise.all([l.e(934),l.e(737),l.e(365),l.e(808)]).then(l.bind(l,7808)),{loadableGenerated:{webpack:()=>[7808]},ssr:!1});function V(e){let i=e.split(",").map(e=>Number(e.trim()));return 4!==i.length||i.some(e=>Number.isNaN(e))?null:i}function L(e){var i,l,t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{min:0,max:0,mean:0};return{min:Number(null!==(i=null==e?void 0:e.min)&&void 0!==i?i:n.min),max:Number(null!==(l=null==e?void 0:e.max)&&void 0!==l?l:n.max),mean:Number(null!==(t=null==e?void 0:e.mean)&&void 0!==t?t:n.mean)}}function _(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=Number(e);return Number.isFinite(l)?l:i}function W(e){return e?{source:(null==e?void 0:e.source)||null,isSimulated:!!(null==e?void 0:e.isSimulated),stats:L(null==e?void 0:e.stats)}:null}function Z(e){let{label:i,isSimulated:l}=e;return(0,t.jsx)("span",{className:l?"status-chip border-amber-300 bg-amber-50 text-amber-800":"status-chip border-emerald-300 bg-emerald-50 text-emerald-800",children:i})}function Y(){var e,i,l,a,s,d,j,w,z,S,M,T,D,F,Y,J,H,B,U,q,Q,K,X,$,ee,ei,el,et,en,ea,es,er,ed,eo,ec,eu,em,ev,ex,eh,ep;let eb=O.oy,[eg,ef]=(0,n.useState)("Edison, New Jersey"),[ey,eN]=(0,n.useState)([]),[ej,ew]=(0,n.useState)("-74.49,40.45,-74.33,40.59"),[ez,eS]=(0,n.useState)([]),[ek,eA]=(0,n.useState)("2025-12-01/2026-01-30"),[eM,eC]=(0,n.useState)("balanced"),[eI,eT]=(0,n.useState)("ndvi"),[eD,eF]=(0,n.useState)(!1),[eP,eO]=(0,n.useState)(!1),[eE,eG]=(0,n.useState)(!1),[eR,eV]=(0,n.useState)(!0),[eL,e_]=(0,n.useState)(null),[eW,eZ]=(0,n.useState)(!1),eY=(0,n.useRef)(null),eJ=(0,n.useRef)(null),[eH,eB]=(0,n.useState)(null),[eU,eq]=(0,n.useState)(null),[eQ,eK]=(0,n.useState)(null),[eX,e$]=(0,n.useState)(null),[e0,e1]=(0,n.useState)(null),[e2,e5]=(0,n.useState)(null),[e3,e4]=(0,n.useState)(null),[e9,e6]=(0,n.useState)(!1),[e7,e8]=(0,n.useState)({irrigationDelta:0,waterBudget:.5,targetRisk:.35,fertilizerDelta:0}),[ie,ii]=(0,n.useState)(null),[il,it]=(0,n.useState)([]),[ia,is]=(0,n.useState)([]),[ir,id]=(0,n.useState)({criticalNdvi:.28,warningNdvi:.42,highAnomaly:.66}),io=(0,n.useMemo)(()=>{var e;return L(null==eU?void 0:null===(e=eU.ndvi)||void 0===e?void 0:e.stats)},[eU]),ic=(0,n.useMemo)(()=>L(null==eX?void 0:eX.stats),[eX]),iu=(0,n.useMemo)(()=>L(null==e0?void 0:e0.stats),[e0]),im=(null==eU?void 0:null===(e=eU.ndvi)||void 0===e?void 0:e.grid3x3)||[],iv=(0,n.useMemo)(()=>im.find(e=>e.cellId===eL)||null,[im,eL]),ix=(0,n.useMemo)(()=>iv?"P".concat(3*iv.row+iv.col+1):null,[iv]),ih="ndvi"===eI?null==eU?void 0:null===(i=eU.ndvi)||void 0===i?void 0:i.previewPng:"soil"===eI?null==eX?void 0:eX.overlayPng:null==e0?void 0:e0.overlayPng,ip=(0,n.useMemo)(()=>{var e;let i=null==eU?void 0:null===(e=eU.ndvi)||void 0===e?void 0:e.metricGrid;if(!(null==i?void 0:i.encoded)||!(null==i?void 0:i.width)||!(null==i?void 0:i.height))return null;let l=function(e,i,l){if(!e)return null;try{let t=window.atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);let a=i*l,s=new Float32Array(n.buffer,n.byteOffset,Math.min(a,Math.floor(n.byteLength/4))),r=Array(a).fill(0);for(let e=0;e<a;e++){let i=s[e];r[e]=Number.isFinite(i)?Number(i):0}return r}catch(e){return null}}(i.encoded,i.width,i.height);return l&&l.length?{values:l,width:i.width,height:i.height,min:Number.isFinite(i.min)?i.min:io.min,max:Number.isFinite(i.max)?i.max:io.max,source:(null==eU?void 0:eU.provider)||"NDVI",units:"NDVI",isSimulated:!1}:null},[null==eU?void 0:null===(a=eU.ndvi)||void 0===a?void 0:null===(l=a.metricGrid)||void 0===l?void 0:l.encoded,null==eU?void 0:null===(d=eU.ndvi)||void 0===d?void 0:null===(s=d.metricGrid)||void 0===s?void 0:s.width,null==eU?void 0:null===(w=eU.ndvi)||void 0===w?void 0:null===(j=w.metricGrid)||void 0===j?void 0:j.height,null==eU?void 0:null===(S=eU.ndvi)||void 0===S?void 0:null===(z=S.metricGrid)||void 0===z?void 0:z.min,null==eU?void 0:null===(T=eU.ndvi)||void 0===T?void 0:null===(M=T.metricGrid)||void 0===M?void 0:M.max,null==eU?void 0:eU.provider,io.min,io.max]),ib=(0,n.useMemo)(()=>"soil"===eI?(null==eX?void 0:eX.metricGrid)||null:"et"===eI?(null==e0?void 0:e0.metricGrid)||null:ip,[eI,ip,null==eX?void 0:eX.metricGrid,null==e0?void 0:e0.metricGrid]),ig=()=>{let e=eY.current,i=eJ.current;if(!e||!i){eB(null);return}let l=e.clientWidth,t=e.clientHeight,n=i.naturalWidth||0,a=i.naturalHeight||0;if(!l||!t||!n||!a){eB(null);return}let s=Math.min(l/n,t/a),r=Math.max(1,Math.floor(n*s)),d=Math.max(1,Math.floor(a*s));eB({left:Math.max(0,Math.round((l-r)/2)),top:Math.max(0,Math.round((t-d)/2)),width:r,height:d})};async function iy(){if(!eb||!O.I8)throw Error("Firebase Auth is not configured");if(O.I8.currentUser)return O.I8.currentUser;let e=new g.hJ;throw await (0,g.F6)(O.I8,e),Error("Sign-in required")}async function iN(){if(eg.trim()){eF(!0);try{let e=await fetch("/api/geocode?q=".concat(encodeURIComponent(eg.trim()))),i=await e.json().catch(()=>({}));if(!e.ok)throw Error((null==i?void 0:i.message)||(null==i?void 0:i.error)||"Geocoding failed");let l=Array.isArray(null==i?void 0:i.places)?i.places:[];eN(l),l.length||y.toast.warning("No matching places found.")}catch(e){y.toast.error((null==e?void 0:e.message)||"Geocoding failed")}finally{eF(!1)}}}function ij(e,i){var l,t;if(!e)return e;let n=e["soil"===i?"soilMoisture":"evapotranspiration"];if(!n||"string"!=typeof n)return e;if(n.startsWith("iVBOR"))return{...e,overlayPng:n};let a=function(e){try{return JSON.parse(window.atob(e))}catch(e){return null}}(n);if(!a||"undefined"==typeof document)return e;let s=Number(a.width||256),r=Number(a.height||256),d=Array.isArray(a.data)?a.data:[],o=Math.max(1,s*r),c=Array(o).fill(0);for(let e=0;e<o;e++){let i=Number(d[e]);c[e]=Number.isFinite(i)?i:0}let u=document.createElement("canvas");u.width=s,u.height=r;let m=u.getContext("2d");if(!m)return e;let v=m.createImageData(s,r),x=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(let e of d){let i=Number(e);Number.isFinite(i)&&(x=Math.min(x,i),h=Math.max(h,i))}let p=h-x||1;for(let e=0;e<c.length;e++){let l=(Number(c[e])-x)/p,t=4*e;"soil"===i?(v.data[t]=Math.round(155-120*l),v.data[t+1]=Math.round(94+110*l),v.data[t+2]=Math.round(40+165*l)):(v.data[t]=Math.round(75+170*l),v.data[t+1]=Math.round(190-120*l),v.data[t+2]=Math.round(58+40*(1-l))),v.data[t+3]=255}m.putImageData(v,0,0);let b=u.toDataURL("image/png").replace("data:image/png;base64,","");return{...e,overlayPng:b,metricGrid:{values:c,width:s,height:r,min:Number.isFinite(Number(null==a?void 0:null===(l=a.stats)||void 0===l?void 0:l.min))?Number(a.stats.min):Number(x.toFixed(4)),max:Number.isFinite(Number(null==a?void 0:null===(t=a.stats)||void 0===t?void 0:t.max))?Number(a.stats.max):Number(h.toFixed(4)),source:String((null==e?void 0:e.source)||("soil"===i?"Soil moisture":"Evapotranspiration")),units:"soil"===i?"m3/m3":"mm/day",isSimulated:!!(null==e?void 0:e.isSimulated)}}}async function iw(){let e=V(ej);if(!e){y.toast.error("Bounding box must be in format minLon,minLat,maxLon,maxLat");return}eF(!0),it([]),is([]),e4(null);try{var i,l,t,n,a,s,r,d,o,c,u,m,v,x,h,p,b,g,f,N,j,w,z,S,k,A,M,C,I,T,D,F,P,O,E,G;let R=await fetch("/api/ingest/fetch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bbox:e,date:ek,targetSize:512,policy:"balanced"})}),V=await R.json().catch(()=>({}));if(!R.ok||!(null==V?void 0:V.success))throw Error((null==V?void 0:V.message)||(null==V?void 0:V.error)||"Ingest failed");let L=V.data,_=(null==L?void 0:null===(l=L.ndvi)||void 0===l?void 0:null===(i=l.grid3x3)||void 0===i?void 0:i.some(e=>"1-1"===e.cellId))?"1-1":(null==L?void 0:null===(a=L.ndvi)||void 0===a?void 0:null===(n=a.grid3x3)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.cellId)||null;eq(L),e_(_);let W=Array.isArray(null==V?void 0:V.warnings)?V.warnings:[],[Z,Y,J,H]=await Promise.allSettled([fetch("/api/weather",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bbox:e})}).then(e=>e.json()),fetch("/api/soil",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bbox:e})}).then(e=>e.json()),fetch("/api/et",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bbox:e})}).then(e=>e.json()),fetch("/api/timeseries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bbox:e,interval:"weekly"})}).then(e=>e.json())]),B=[...W],U=[];"fulfilled"===Z.status?(eK(Z.value),U.push(...(null===(M=Z.value)||void 0===M?void 0:M.providersTried)||[]),Array.isArray(null===(C=Z.value)||void 0===C?void 0:C.warnings)&&B.push(...Z.value.warnings)):B.push("Weather provider unavailable."),"fulfilled"===Y.status?(e$(ij(null===(I=Y.value)||void 0===I?void 0:I.data,"soil")),U.push(...(null===(T=Y.value)||void 0===T?void 0:T.providersTried)||[]),Array.isArray(null===(D=Y.value)||void 0===D?void 0:D.warnings)&&B.push(...Y.value.warnings)):B.push("Soil provider unavailable."),"fulfilled"===J.status?(e1(ij(null===(F=J.value)||void 0===F?void 0:F.data,"et")),U.push(...(null===(P=J.value)||void 0===P?void 0:P.providersTried)||[]),Array.isArray(null===(O=J.value)||void 0===O?void 0:O.warnings)&&B.push(...J.value.warnings)):B.push("ET provider unavailable."),"fulfilled"===H.status?(e5(H.value),U.push(...(null===(E=H.value)||void 0===E?void 0:E.providersTried)||[]),Array.isArray(null===(G=H.value)||void 0===G?void 0:G.warnings)&&B.push(...H.value.warnings)):B.push("Time-series provider unavailable.");let q=await fetch("/api/gemini",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:"Generate an AI assistant field recommendation summary.",objective:eM,ndviData:{stats:null==L?void 0:null===(s=L.ndvi)||void 0===s?void 0:s.stats},weatherData:"fulfilled"===Z.status?{source:null===(r=Z.value)||void 0===r?void 0:r.source,isSimulated:null===(d=Z.value)||void 0===d?void 0:d.isSimulated,current:(null===(c=Z.value)||void 0===c?void 0:null===(o=c.data)||void 0===o?void 0:o.current)||{}}:null,soilData:"fulfilled"===Y.status?{source:null===(u=Y.value)||void 0===u?void 0:u.source,isSimulated:null===(m=Y.value)||void 0===m?void 0:m.isSimulated,stats:(null===(x=Y.value)||void 0===x?void 0:null===(v=x.data)||void 0===v?void 0:v.stats)||{}}:null,etData:"fulfilled"===J.status?{source:null===(h=J.value)||void 0===h?void 0:h.source,isSimulated:null===(p=J.value)||void 0===p?void 0:p.isSimulated,stats:(null===(g=J.value)||void 0===g?void 0:null===(b=g.data)||void 0===b?void 0:b.stats)||{}}:null,timeSeriesData:"fulfilled"===H.status?{source:null===(f=H.value)||void 0===f?void 0:f.source,isSimulated:null===(N=H.value)||void 0===N?void 0:N.isSimulated,summary:null===(w=H.value)||void 0===w?void 0:null===(j=w.data)||void 0===j?void 0:j.summary,timeSeries:((null===(S=H.value)||void 0===S?void 0:null===(z=S.data)||void 0===z?void 0:z.timeSeries)||[]).slice(-12)}:null,providersTried:U,context:{bbox:e,ndviStats:null==L?void 0:null===(k=L.ndvi)||void 0===k?void 0:k.stats,grid3x3:(null==L?void 0:null===(A=L.ndvi)||void 0===A?void 0:A.grid3x3)||[],selectedCell:_,warnings:B.slice(0,12)}})}),Q=await q.json().catch(()=>({}));if(!q.ok)throw Error((null==Q?void 0:Q.message)||"ML analysis failed");e4((null==Q?void 0:Q.inference)||null),it(B.filter(Boolean)),is(U),y.toast.success("Analysis complete")}catch(e){y.toast.error((null==e?void 0:e.message)||"Analysis failed")}finally{eF(!1)}}async function iz(){if(eU){eO(!0);try{let e=await iy(),i=await e.getIdToken(!0),l=function(e){if(!Array.isArray(e)||!e.length)return null;let i=[];for(let a of e){var l,t,n;let e=Number(null!==(l=null==a?void 0:a.lat)&&void 0!==l?l:null==a?void 0:a[0]),s=Number(null!==(n=null!==(t=null==a?void 0:a.lng)&&void 0!==t?t:null==a?void 0:a[1])&&void 0!==n?n:null==a?void 0:a[0]);Number.isFinite(e)&&Number.isFinite(s)&&i.push([s,e])}if(i.length<3)return null;let a=i[0],s=i[i.length-1];return((a[0]!==s[0]||a[1]!==s[1])&&i.push(a),i.length<4)?null:{type:"Polygon",coordinates:[i]}}(ez),t={type:"Polygon",coordinates:[[[eU.bbox[0],eU.bbox[1]],[eU.bbox[2],eU.bbox[1]],[eU.bbox[2],eU.bbox[3]],[eU.bbox[0],eU.bbox[3]],[eU.bbox[0],eU.bbox[1]]]]},n={name:"AOI ".concat(new Date().toLocaleDateString()),locationName:eg,description:"Provider: ".concat(eU.provider).concat(eU.fallbackUsed?" (fallback used)":""),ndviStats:io,previewPng:eU.ndvi.previewPng,bbox:eU.bbox,geojson:l||t,grid3x3:eU.ndvi.grid3x3||[],inferenceSnapshot:e3||null,sourceQuality:{ingestProvider:eU.provider,fallbackUsed:eU.fallbackUsed,warnings:il,providersTried:ia}};try{await (0,E.pb)(i,n)}catch(e){if(e instanceof E.GY&&401===e.status&&(null===O.I8||void 0===O.I8?void 0:O.I8.currentUser)){let e=await O.I8.currentUser.getIdToken(!0);await (0,E.pb)(e,n)}else throw e}y.toast.success("Plot saved")}catch(e){y.toast.error((0,E.$D)(e))}finally{eO(!1)}}}async function iS(){if(!eU){y.toast.error("Run analysis before scenario simulation.");return}e6(!0);try{let e=await fetch("/api/ai/simulate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({objective:eM,scenario:e7,ndviData:{stats:eU.ndvi.stats},weatherData:function(e){var i;if(!e)return null;let l=(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.current)||(null==e?void 0:e.current)||{};return{source:(null==e?void 0:e.source)||null,isSimulated:!!(null==e?void 0:e.isSimulated),current:{temperature:_(null==l?void 0:l.temperature),humidity:_(null==l?void 0:l.humidity),precipitation:_(null==l?void 0:l.precipitation),windSpeed:_(null==l?void 0:l.windSpeed)}}}(eQ),soilData:W(eX),etData:W(e0),timeSeriesData:function(e){var i,l;if(!e)return null;let t=Array.isArray(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.timeSeries)?e.data.timeSeries:Array.isArray(null==e?void 0:e.timeSeries)?e.timeSeries:[];return{source:(null==e?void 0:e.source)||null,isSimulated:!!(null==e?void 0:e.isSimulated),summary:(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.summary)||(null==e?void 0:e.summary)||null,timeSeries:t.slice(-12).map(e=>({date:String((null==e?void 0:e.date)||""),ndvi:_(null==e?void 0:e.ndvi),cloudCover:"number"==typeof(null==e?void 0:e.cloudCover)?e.cloudCover:null,confidence:"number"==typeof(null==e?void 0:e.confidence)?e.confidence:null}))}}(e2),providersTried:ia,context:{ndviStats:eU.ndvi.stats,grid3x3:(eU.ndvi.grid3x3||[]).slice(0,9),selectedCell:eL},selectedCell:eL})}),i=await e.json().catch(()=>({}));if(!e.ok)throw Error((null==i?void 0:i.message)||(null==i?void 0:i.error)||"Simulation failed");ii((null==i?void 0:i.scenario)||null),y.toast.success("Scenario simulation completed")}catch(e){y.toast.error((null==e?void 0:e.message)||"Scenario simulation failed")}finally{e6(!1)}}return(0,n.useEffect)(()=>{let e=window.localStorage.getItem("agrisense.alertThresholds.v1");if(e)try{let i=JSON.parse(e);id({criticalNdvi:Number(null==i?void 0:i.criticalNdvi)||.28,warningNdvi:Number(null==i?void 0:i.warningNdvi)||.42,highAnomaly:Number(null==i?void 0:i.highAnomaly)||.66})}catch(e){}},[]),(0,n.useEffect)(()=>{window.localStorage.setItem("agrisense.alertThresholds.v1",JSON.stringify(ir))},[ir]),(0,n.useEffect)(()=>{var e,i,l,t;if(!eU)return;let n=[];io.mean<ir.criticalNdvi?n.push({id:"ndvi-critical",type:"critical",message:"Critical vegetation stress risk",details:"NDVI mean is ".concat(io.mean.toFixed(3),"."),plotName:"Current AOI"}):io.mean<ir.warningNdvi&&n.push({id:"ndvi-warning",type:"warning",message:"Moderate canopy stress detected",details:"NDVI mean is ".concat(io.mean.toFixed(3),"."),plotName:"Current AOI"}),(Number((null==e3?void 0:null===(e=e3.anomaly)||void 0===e?void 0:e.score)||0)>=ir.highAnomaly||(null==e3?void 0:null===(i=e3.anomaly)||void 0===i?void 0:i.level)==="high")&&n.push({id:"anomaly-high",type:"critical",message:"High anomaly score",details:(null==e3?void 0:null===(t=e3.anomaly)||void 0===t?void 0:null===(l=t.signals)||void 0===l?void 0:l[0])||"Unusual field behavior detected.",plotName:"Current AOI"}),window.dispatchEvent(new CustomEvent("agrisense:alerts",{detail:n}))},[eU,io.mean,null==e3?void 0:null===(D=e3.anomaly)||void 0===D?void 0:D.level,null==e3?void 0:null===(F=e3.anomaly)||void 0===F?void 0:F.score,null==e3?void 0:null===(Y=e3.anomaly)||void 0===Y?void 0:Y.signals,ir]),(0,n.useEffect)(()=>{ig();let e=()=>ig();window.addEventListener("resize",e);let i="undefined"!=typeof ResizeObserver?new ResizeObserver(()=>ig()):null;return i&&(eY.current&&i.observe(eY.current),eJ.current&&i.observe(eJ.current)),()=>{window.removeEventListener("resize",e),null==i||i.disconnect()}},[ih,null==eU?void 0:null===(J=eU.bbox)||void 0===J?void 0:J.join(","),eI]),(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)(N.Z,{}),(0,t.jsxs)("main",{className:"app-shell py-6",children:[(0,t.jsxs)(f.E.section,{className:"mb-6 grid gap-4 lg:grid-cols-[1.35fr_0.9fr]",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.28,ease:"easeOut"},children:[(0,t.jsxs)("article",{id:"pipeline",className:"surface-card p-5",children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-zinc-900",children:"Field Operations Workbench"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:"Data pipeline, AOI controls, analysis, planning, and save flows are unified here."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.z,{variant:"balanced"===eM?"default":"outline",onClick:()=>eC("balanced"),children:"Balanced"}),(0,t.jsx)(I.z,{variant:"yield"===eM?"default":"outline",onClick:()=>eC("yield"),children:"Yield"}),(0,t.jsx)(I.z,{variant:"water"===eM?"default":"outline",onClick:()=>eC("water"),children:"Water"})]})]}),(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Search location"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:eg,onChange:e=>ef(e.target.value),className:"w-full rounded-xl border border-zinc-300 px-3 py-2 text-sm outline-none focus:border-emerald-800",placeholder:"Edison, New Jersey"}),(0,t.jsx)(I.z,{variant:"outline",disabled:eD,onClick:iN,children:"Find"})]}),ey.length>0&&(0,t.jsx)("div",{className:"mt-2 max-h-44 overflow-auto rounded-xl border border-zinc-200 bg-white",children:ey.map(e=>(0,t.jsx)("button",{onClick:()=>{ew(function(e){let[i,l,t,n]=e.bbox;return"".concat(t,",").concat(i,",").concat(n,",").concat(l)}(e)),eN([])},className:"block w-full border-b border-zinc-100 px-3 py-2 text-left text-sm text-zinc-700 hover:bg-zinc-50",children:e.display_name},"".concat(e.display_name,"-").concat(e.lat,"-").concat(e.lon)))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Date range"}),(0,t.jsx)("input",{value:ek,onChange:e=>eA(e.target.value),className:"w-full rounded-xl border border-zinc-300 px-3 py-2 text-sm outline-none focus:border-emerald-800",placeholder:"YYYY-MM-DD/YYYY-MM-DD"}),(0,t.jsx)("p",{className:"mt-1 text-[11px] text-zinc-500",children:"Policy: balanced freshness + cloud | Output: 512x512"})]})]}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Bounding box"}),(0,t.jsx)("input",{value:ej,onChange:e=>ew(e.target.value),className:"w-full rounded-xl border border-zinc-300 px-3 py-2 text-sm outline-none focus:border-emerald-800"})]}),(0,t.jsx)("div",{className:"mt-4 h-[26rem] overflow-hidden rounded-2xl border border-zinc-200",children:(0,t.jsx)(G,{bbox:V(ej)||void 0,onBboxChange:e=>ew(e.join(",")),polygon:ez,onPolygonChange:e=>{eS(e),function(e){if(!Array.isArray(e)||!e.length)return;let i=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(let a of e){if(!Array.isArray(a)||a.length<2)continue;let e=Number(a[0]),s=Number(a[1]);Number.isFinite(e)&&Number.isFinite(s)&&(i=Math.min(i,e),l=Math.min(l,s),t=Math.max(t,e),n=Math.max(n,s))}Number.isFinite(i)&&Number.isFinite(l)&&Number.isFinite(t)&&Number.isFinite(n)&&ew("".concat(i,",").concat(l,",").concat(t,",").concat(n))}(e)},ndviPng:null==eU?void 0:null===(H=eU.ndvi)||void 0===H?void 0:H.previewPng,ndviBounds:null==eU?void 0:eU.bbox,grid3x3:null==eU?void 0:null===(B=eU.ndvi)||void 0===B?void 0:B.grid3x3,selectedCell:eL,onSelectCell:e_,showGrid:eR})}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,t.jsxs)(I.z,{disabled:eD,onClick:iw,children:[eD?(0,t.jsx)(r.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(o,{className:"mr-2 h-4 w-4"}),"Analyze AOI"]}),(0,t.jsxs)(I.z,{variant:"outline",disabled:!eU||eP,onClick:iz,children:[eP?(0,t.jsx)(r.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(c,{className:"mr-2 h-4 w-4"}),"Save Plot"]}),(0,t.jsx)(I.z,{variant:eR?"default":"outline",onClick:()=>eV(e=>!e),children:eR?"Hide 3x3 Grid":"Show 3x3 Grid"}),(0,t.jsx)(I.z,{variant:eW?"default":"outline",onClick:()=>eZ(e=>!e),children:eW?"Hide 3D Terrain":"Open 3D Terrain"}),(0,t.jsxs)(I.z,{variant:"outline",onClick:()=>eG(e=>!e),children:[(0,t.jsx)(u,{className:"mr-2 h-4 w-4"}),eE?"Hide Debug":"Show Debug"]})]})]}),(0,t.jsxs)("article",{className:"surface-card p-5",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-zinc-900",children:"System Diagnostics"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:"Source quality, fallback state, and model confidence."}),(0,t.jsxs)("div",{className:"mt-4 grid gap-3",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"Satellite source"}),(null==eU?void 0:eU.fallbackUsed)?(0,t.jsx)(Z,{label:"fallback",isSimulated:!0}):(0,t.jsx)(Z,{label:"primary"})]}),(0,t.jsx)("p",{className:"mt-1 text-sm font-semibold text-zinc-900",children:(null==eU?void 0:eU.provider)||"Not analyzed"}),(0,t.jsxs)("p",{className:"text-xs text-zinc-600",children:["Scene: ",(null==eU?void 0:null===(U=eU.imagery)||void 0===U?void 0:U.date)?new Date(eU.imagery.date).toLocaleDateString():"N/A"," | Cloud: ","number"==typeof(null==eU?void 0:null===(q=eU.imagery)||void 0===q?void 0:q.cloudCover)?"".concat(eU.imagery.cloudCover.toFixed(1),"%"):"N/A"]})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"ML confidence"}),(0,t.jsx)(m,{className:"h-4 w-4 text-emerald-700"})]}),(0,t.jsx)("p",{className:"mt-1 text-sm font-semibold text-zinc-900",children:e3?"".concat(Math.round(100*(e3.confidence||0)),"%"):"Pending"}),(0,t.jsxs)("p",{className:"text-xs text-zinc-600",children:["Data quality: ",e3?"".concat(Math.round(100*((null==e3?void 0:null===(Q=e3.dataQuality)||void 0===Q?void 0:Q.score)||0)),"%"):"N/A"," | Objective: ",eM]})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"Layer quality"}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(Z,{label:"weather",isSimulated:null==eQ?void 0:eQ.isSimulated}),(0,t.jsx)(Z,{label:"soil",isSimulated:null==eX?void 0:eX.isSimulated}),(0,t.jsx)(Z,{label:"et",isSimulated:null==e0?void 0:e0.isSimulated})]})]}),(0,t.jsxs)("p",{className:"mt-1 text-xs text-zinc-600",children:["Time series: ",(null==e2?void 0:e2.source)||"N/A"," ",(null==e2?void 0:e2.cacheHit)?"(cache)":""]})]})]}),il.length>0&&(0,t.jsxs)("div",{className:"mt-4 rounded-xl border border-amber-200 bg-amber-50 p-3",children:[(0,t.jsxs)("p",{className:"flex items-center gap-2 text-sm font-semibold text-amber-900",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4"}),"Warnings"]}),(0,t.jsx)("ul",{className:"mt-2 list-disc space-y-1 pl-4 text-xs text-amber-800",children:il.slice(0,6).map((e,i)=>(0,t.jsx)("li",{children:e},"".concat(e,"-").concat(i)))})]}),(0,t.jsxs)("div",{className:"mt-4 rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"Proactive Alert Thresholds"}),(0,t.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,t.jsxs)("label",{className:"block text-xs text-zinc-700",children:["Critical NDVI (",ir.criticalNdvi.toFixed(2),")",(0,t.jsx)("input",{type:"range",min:.12,max:.45,step:.01,value:ir.criticalNdvi,onChange:e=>id(i=>({...i,criticalNdvi:Number(e.target.value)})),className:"mt-1 w-full"})]}),(0,t.jsxs)("label",{className:"block text-xs text-zinc-700",children:["Warning NDVI (",ir.warningNdvi.toFixed(2),")",(0,t.jsx)("input",{type:"range",min:.2,max:.6,step:.01,value:ir.warningNdvi,onChange:e=>id(i=>({...i,warningNdvi:Number(e.target.value)})),className:"mt-1 w-full"})]}),(0,t.jsxs)("label",{className:"block text-xs text-zinc-700",children:["High anomaly (",(100*ir.highAnomaly).toFixed(0),"%)",(0,t.jsx)("input",{type:"range",min:.35,max:.9,step:.01,value:ir.highAnomaly,onChange:e=>id(i=>({...i,highAnomaly:Number(e.target.value)})),className:"mt-1 w-full"})]})]})]}),eE&&(0,t.jsxs)("div",{className:"mt-4 rounded-xl border border-zinc-200 bg-zinc-950 p-3 text-xs text-zinc-100",children:[(0,t.jsx)("p",{className:"mb-2 font-semibold",children:"Provider Diagnostics"}),(0,t.jsxs)("div",{className:"space-y-2",children:[0===ia.length&&(0,t.jsx)("p",{className:"text-zinc-300",children:"No diagnostics available yet."}),ia.map((e,i)=>(0,t.jsxs)("div",{className:"rounded border border-zinc-700 bg-zinc-900 p-2",children:[(0,t.jsx)("p",{className:"font-semibold",children:e.provider}),(0,t.jsxs)("p",{className:"text-zinc-300",children:["status: ",e.ok?"ok":"failed"," ",e.reason?"| ".concat(e.reason):"",e.durationMs?" | ".concat(e.durationMs,"ms"):""]})]},"".concat(e.provider,"-").concat(i)))]})]})]})]}),(0,t.jsxs)(f.E.section,{className:"grid gap-4 lg:grid-cols-[1.25fr_1fr]",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut",delay:.05},children:[(0,t.jsxs)("article",{className:"surface-card p-5",children:[(0,t.jsxs)("div",{className:"mb-3 flex items-center justify-between gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-zinc-900",children:"Layer Viewer"}),(0,t.jsx)("p",{className:"text-sm text-zinc-600",children:"Switch between NDVI, soil moisture, and ET overlays."})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(I.z,{variant:"ndvi"===eI?"default":"outline",onClick:()=>eT("ndvi"),children:[(0,t.jsx)(x,{className:"mr-2 h-4 w-4"}),"NDVI"]}),(0,t.jsxs)(I.z,{variant:"soil"===eI?"default":"outline",onClick:()=>eT("soil"),children:[(0,t.jsx)(h,{className:"mr-2 h-4 w-4"}),"Soil"]}),(0,t.jsxs)(I.z,{variant:"et"===eI?"default":"outline",onClick:()=>eT("et"),children:[(0,t.jsx)(p,{className:"mr-2 h-4 w-4"}),"ET"]})]})]}),ih?(0,t.jsxs)("div",{ref:eY,className:"relative overflow-hidden rounded-2xl border border-zinc-200 bg-zinc-100",children:[(0,t.jsx)("img",{ref:eJ,src:"data:image/png;base64,".concat(ih),alt:"".concat(eI," preview"),className:"h-[24rem] w-full object-contain",onLoad:ig}),(0,t.jsx)(C,{cells:null==eU?void 0:null===(K=eU.ndvi)||void 0===K?void 0:K.grid3x3,selectedCell:eL,onSelectCell:e_,visible:eR,frame:eH})]}):(0,t.jsx)("div",{className:"rounded-2xl border border-dashed border-zinc-300 bg-zinc-50 p-8 text-center text-sm text-zinc-600",children:"Run analysis to generate layer outputs."}),(0,t.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"NDVI mean"}),(0,t.jsx)("p",{className:"mt-1 text-lg font-semibold text-zinc-900",children:io.mean.toFixed(3)})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"Soil moisture mean"}),(0,t.jsx)("p",{className:"mt-1 text-lg font-semibold text-zinc-900",children:ic.mean.toFixed(3)})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"ET mean (mm/day)"}),(0,t.jsx)("p",{className:"mt-1 text-lg font-semibold text-zinc-900",children:iu.mean.toFixed(3)})]})]}),iv&&(0,t.jsxs)("div",{className:"mt-3 rounded-xl border border-sky-200 bg-sky-50 p-3",children:[(0,t.jsxs)("p",{className:"text-xs uppercase tracking-wide text-sky-700",children:["Selected Plot Point ",ix]}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-sky-900",children:["NDVI mean ",iv.mean.toFixed(3)," | stress ",iv.stressLevel," | valid pixels"," ",(100*iv.validPixelRatio).toFixed(1),"%"]})]}),eW&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(R,{open:eW,bbox:null==eU?void 0:eU.bbox,texturePng:ih||(null==eU?void 0:null===(X=eU.ndvi)||void 0===X?void 0:X.previewPng),metricGrid:ib,layer:eI,selectedCell:eL,quality:"high"})})]}),(0,t.jsxs)("article",{className:"surface-card p-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-zinc-900",children:"Recommendations"}),(null==e3?void 0:e3.isSimulatedInputs)&&(0,t.jsx)(P,{variant:"outline",children:"Simulated inputs"})]}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:"Deterministic ML guidance for field operations."}),e3?(0,t.jsxs)("div",{className:"mt-4 space-y-3",children:[iv&&(0,t.jsxs)("div",{className:"rounded-xl border border-sky-200 bg-sky-50 p-3",children:[(0,t.jsxs)("p",{className:"text-xs uppercase tracking-wide text-sky-700",children:["Plot Point focus (",ix,")"]}),(0,t.jsxs)("ul",{className:"mt-2 list-disc space-y-1 pl-4 text-xs text-sky-900",children:["high"===iv.stressLevel&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{children:"Prioritize irrigation uniformity check in this cell within 24 hours."}),(0,t.jsx)("li",{children:"Scout canopy stress causes and compare emitter pressure."})]}),"moderate"===iv.stressLevel&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{children:"Schedule targeted scouting and soil check in this cell this week."}),(0,t.jsx)("li",{children:"Re-check NDVI after next irrigation cycle."})]}),"low"===iv.stressLevel&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{children:"Maintain baseline schedule and monitor trend drift."}),(0,t.jsx)("li",{children:"Use this cell as healthy reference for comparisons."})]}),"unknown"===iv.stressLevel&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("li",{children:"Data quality is low in this cell; re-run analysis with cleaner scene dates."})})]})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"What changed"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-800",children:null==e3?void 0:null===($=e3.summary)||void 0===$?void 0:$.whatChanged})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"Why"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-800",children:null==e3?void 0:null===(ee=e3.summary)||void 0===ee?void 0:ee.why})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"Next actions"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-800",children:null==e3?void 0:null===(ei=e3.summary)||void 0===ei?void 0:ei.nextActions}),(0,t.jsxs)("p",{className:"mt-1 text-xs text-zinc-500",children:["Re-check in ",null==e3?void 0:null===(el=e3.summary)||void 0===el?void 0:el.recheckIn]})]}),((null==e3?void 0:e3.recommendations)||[]).map(e=>(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 p-3",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-zinc-900",children:e.title}),(0,t.jsx)(Z,{label:e.priority,isSimulated:"high"===e.priority})]}),(0,t.jsx)("p",{className:"text-xs text-zinc-600",children:e.reason}),(0,t.jsx)("ul",{className:"mt-2 list-disc space-y-1 pl-4 text-xs text-zinc-700",children:(e.actions||[]).slice(0,3).map((i,l)=>(0,t.jsx)("li",{children:i},"".concat(e.id,"-").concat(l)))})]},e.id)),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"What-if Simulator"}),(0,t.jsxs)("div",{className:"mt-2 grid gap-2",children:[(0,t.jsxs)("label",{className:"text-xs text-zinc-700",children:["Irrigation delta (",e7.irrigationDelta>=0?"+":"",Math.round(100*e7.irrigationDelta),"%)"]}),(0,t.jsx)("input",{type:"range",min:-.3,max:.6,step:.05,value:e7.irrigationDelta,onChange:e=>e8(i=>({...i,irrigationDelta:Number(e.target.value)}))}),(0,t.jsxs)("label",{className:"text-xs text-zinc-700",children:["Water budget (",Math.round(100*e7.waterBudget),"%)"]}),(0,t.jsx)("input",{type:"range",min:0,max:1,step:.05,value:e7.waterBudget,onChange:e=>e8(i=>({...i,waterBudget:Number(e.target.value)}))}),(0,t.jsxs)("label",{className:"text-xs text-zinc-700",children:["Target risk (",Math.round(100*e7.targetRisk),"%)"]}),(0,t.jsx)("input",{type:"range",min:.05,max:.9,step:.05,value:e7.targetRisk,onChange:e=>e8(i=>({...i,targetRisk:Number(e.target.value)}))}),(0,t.jsxs)(I.z,{variant:"outline",disabled:e9,onClick:iS,children:[e9?(0,t.jsx)(r.Z,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Run What-if"]})]}),ie&&(0,t.jsxs)("div",{className:"mt-3 rounded-lg border border-sky-200 bg-sky-50 p-2 text-xs text-sky-900",children:[(0,t.jsxs)("p",{children:["Risk: ",(100*ie.baselineRisk7d).toFixed(1),"% -> ",(100*ie.scenarioRisk7d).toFixed(1),"%"]}),(0,t.jsxs)("p",{children:["NDVI30: ",ie.baselineNdvi30d.toFixed(3)," -> ",ie.scenarioNdvi30d.toFixed(3)]}),(0,t.jsxs)("p",{children:["Water delta: ",ie.waterUseDeltaPct.toFixed(1),"% | Yield proxy: ",ie.yieldProxyDeltaPct.toFixed(1),"%"]}),(0,t.jsx)("p",{className:"mt-1",children:ie.recommendation})]})]})]}):(0,t.jsx)("div",{className:"mt-4 rounded-xl border border-dashed border-zinc-300 bg-zinc-50 p-6 text-sm text-zinc-600",children:"Run analysis to generate recommendations."})]})]}),(0,t.jsxs)(f.E.section,{className:"mt-4 grid gap-4 lg:grid-cols-[1.4fr_0.9fr]",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.33,ease:"easeOut",delay:.1},children:[(0,t.jsxs)("article",{className:"surface-card p-5",children:[(0,t.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-zinc-900",children:"Historical NDVI Trend"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Z,{label:(null==e2?void 0:e2.source)||"n/a",isSimulated:null==e2?void 0:e2.isSimulated}),(null==e2?void 0:e2.cacheHit)&&(0,t.jsx)(Z,{label:"cache"})]})]}),(0,t.jsx)(A.Z,{data:((null==e2?void 0:null===(et=e2.data)||void 0===et?void 0:et.timeSeries)||[]).map(e=>({date:e.date,ndvi:Number(e.ndvi),confidence:Number(e.confidence),cloudCover:"number"==typeof e.cloudCover?e.cloudCover:void 0})),title:"AOI NDVI timeline",showConfidence:!0,showCloudCover:!0})]}),(0,t.jsxs)("article",{className:"surface-card p-5",children:[(0,t.jsxs)("h3",{className:"flex items-center gap-2 text-lg font-semibold text-zinc-900",children:[(0,t.jsx)(b,{className:"h-5 w-5 text-emerald-700"}),"Weather Snapshot"]}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-zinc-600",children:[(null==eQ?void 0:eQ.source)||"No weather data"," ",(null==eQ?void 0:eQ.isSimulated)?"(simulated)":""]}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"Temp"}),(0,t.jsxs)("p",{className:"mt-1 text-lg font-semibold text-zinc-900",children:[null!==(ev=null==eQ?void 0:null===(ea=eQ.data)||void 0===ea?void 0:null===(en=ea.current)||void 0===en?void 0:en.temperature)&&void 0!==ev?ev:"--","F"]})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"Humidity"}),(0,t.jsxs)("p",{className:"mt-1 text-lg font-semibold text-zinc-900",children:[null!==(ex=null==eQ?void 0:null===(er=eQ.data)||void 0===er?void 0:null===(es=er.current)||void 0===es?void 0:es.humidity)&&void 0!==ex?ex:"--","%"]})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"Precip"}),(0,t.jsxs)("p",{className:"mt-1 text-lg font-semibold text-zinc-900",children:[null!==(eh=null==eQ?void 0:null===(eo=eQ.data)||void 0===eo?void 0:null===(ed=eo.current)||void 0===ed?void 0:ed.precipitation)&&void 0!==eh?eh:"--"," mm"]})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"Wind"}),(0,t.jsxs)("p",{className:"mt-1 text-lg font-semibold text-zinc-900",children:[null!==(ep=null==eQ?void 0:null===(eu=eQ.data)||void 0===eu?void 0:null===(ec=eu.current)||void 0===ec?void 0:ec.windSpeed)&&void 0!==ep?ep:"--"," mph"]})]})]})]})]})]}),(0,t.jsx)(k,{objective:eM,context:{bbox:null==eU?void 0:eU.bbox,ndviStats:io,grid3x3:(null==eU?void 0:null===(em=eU.ndvi)||void 0===em?void 0:em.grid3x3)||[],selectedCell:eL,selectedCellData:iv,soilStats:ic,etStats:iu,weather:eQ||null,timeSeries:e2||null,inference:e3||null,warnings:il,providersTried:ia}})]})}}},function(e){e.O(0,[551,23,712,500,448,850,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);
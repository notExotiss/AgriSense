"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[780],{116:function(e,t,n){n.d(t,{Z:function(){return o}});let o=(0,n(1373).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},9780:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var o=n(5893),r=n(7294),a=n(3935),i=n(4250),l=n(9477),d=n(9365),s=n(116),u=n(6506);function c(e,t,n){return Math.max(t,Math.min(n,e))}function h(e){return e.toDataURL("image/png").replace(/^data:image\/png;base64,/,"")}function m(e,t){var n;return(n=43758.5453123*Math.sin(127.1*e+311.7*t))-Math.floor(n)}function p(e,t,n){var o;let r=e*n,a=t*n,i=Math.floor(r),l=Math.floor(a),d=i+1,s=l+1,u=r-i,c=a-l,h=u*u*(3-2*u),p=m(i,l),f=m(d,l),g=m(i,s),v=m(d,s);return(o=p+(f-p)*h)+c*c*(3-2*c)*(g+(v-g)*h-o)}function f(e,t,n){let o=window.atob(e),r=new Uint8Array(o.length);for(let e=0;e<o.length;e++)r[e]=o.charCodeAt(e);let a=t*n,i=new Float32Array(r.buffer,r.byteOffset,Math.min(a,Math.floor(r.byteLength/4))),l=new Float32Array(a);for(let e=0;e<a;e++){var d;let t=Number(null!==(d=i[e])&&void 0!==d?d:0);l[e]=Number.isFinite(t)?t:0}return l}function g(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;if(o<=0||t<3||n<3)return e;let r=e;for(let e=0;e<o;e++){let e=new Float32Array(t*n);for(let o=0;o<n;o++)for(let a=0;a<t;a++){let i=o*t+a,l=r[o*t+Math.max(0,a-1)],d=r[o*t+Math.min(t-1,a+1)],s=r[Math.max(0,o-1)*t+a],u=r[Math.min(n-1,o+1)*t+a];e[i]=(l+d+s+u+2*r[i])/6}r=e}return r}function v(e,t,n,o,r){var a,i;let l=c(o,0,1)*(t-1),d=c(r,0,1)*(n-1),s=Math.floor(l),u=Math.floor(d),h=Math.min(t-1,s+1),m=Math.min(n-1,u+1),p=l-s,f=(a=e[u*t+s])+(e[u*t+h]-a)*p;return f+((i=e[m*t+s])+(e[m*t+h]-i)*p-f)*(d-u)}function x(){let e=Math.min(.84*window.innerWidth,1120),t=Math.min(.78*window.innerHeight,700),n=e,o=n/1.6;return o>t&&(n=1.6*(o=t)),{left:Math.round((window.innerWidth-n)/2),top:Math.round((window.innerHeight-o)/2),width:Math.round(n),height:Math.round(o)}}async function w(e,t){let n=await new Promise((e,n)=>{let o=new Image;o.onload=()=>e(o),o.onerror=()=>n(Error("hero_texture_load_failed")),o.src="data:image/png;base64,".concat(t)}),o=new i.xEZ(n);o.colorSpace=i.KI_,o.wrapS=i.uWy,o.wrapT=i.uWy,o.needsUpdate=!0;let r=e.capabilities.getMaxAnisotropy();return o.anisotropy=Math.max(2,Math.min(r,16)),o}function y(e){var t,n;let{introMode:m="run",onIntroComplete:y}=e,b=(0,r.useRef)(null),M=(0,r.useRef)(null),S=(0,r.useRef)(null),N=(0,r.useRef)(!1),C=(0,r.useRef)(!1),P=(0,r.useRef)(!1),T=(0,r.useRef)(y),E="run"===(0,r.useRef)(m).current,[j,I]=(0,r.useState)(null),[_,F]=(0,r.useState)(null),[R,k]=(0,r.useState)(null),[D,z]=(0,r.useState)(!1),[A,G]=(0,r.useState)(null),[O,U]=(0,r.useState)(null),[L,H]=(0,r.useState)(E?"initializing":"interactive"),[W,Y]=(0,r.useState)(E),V=(0,r.useRef)("initializing"),K=(0,r.useMemo)(()=>{var e;return(null==_?void 0:null===(e=_.legend)||void 0===e?void 0:e.stops)||[]},[null==_?void 0:null===(t=_.legend)||void 0===t?void 0:t.stops]);(0,r.useEffect)(()=>{T.current=y},[y]);let Z=()=>{var e;P.current||(P.current=!0,null===(e=T.current)||void 0===e||e.call(T))};return((0,r.useEffect)(()=>{if("undefined"==typeof document)return;let e=document.createElement("div");return e.setAttribute("data-hero-cinematic-root","true"),document.body.appendChild(e),I(e),()=>{e.parentNode&&e.parentNode.removeChild(e)}},[]),(0,r.useEffect)(()=>{E||(N.current=!0,V.current="interactive",H("interactive"),Y(!1))},[E]),(0,r.useEffect)(()=>{let e=!0;G(null),z(!1);try{let t=function(){let e=new Float32Array(34944);for(let t=0;t<156;t++){let n=t/155;for(let o=0;o<224;o++){let r=o/223,a=2*r-1,i=2*n-1,l=p(r,n,2.1),d=p(r+.07,n-.03,4.4),s=p(r-.04,n+.05,8.8),u=.54*l+.28*d+.18*s+.16*Math.abs(Math.sin((2.2*r-1.45*n)*Math.PI))+.12*Math.exp(-(a*a*.78+i*i*1.22))+.19*Math.exp(-((r-.34)*(r-.34)*18+(n-.28)*(n-.28)*14))+.17*Math.exp(-((r-.74)*(r-.74)*16+(n-.52)*(n-.52)*10))-.22*Math.exp(-Math.pow((r-.54)*.95+(n-.44)*1.55,2)/.013);e[224*t+o]=c(u-.24,-.24,.78)}}let t=g(e,224,156,3),n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++){let r=t[e];r<n&&(n=r),r>o&&(o=r)}let r=Math.max(1e-6,o-n),a=new Float32Array(t.length);for(let e=0;e<t.length;e++)a[e]=c((t[e]-n)/r,0,1);let i=(e,t)=>{let n=c(e,0,223);return a[224*c(t,0,155)+n]},l=document.createElement("canvas");l.width=224,l.height=156;let d=l.getContext("2d");if(!d)throw Error("instant_outline_context_failed");let s=d.createImageData(224,156),m=s.data,f=document.createElement("canvas");f.width=224,f.height=156;let v=f.getContext("2d");if(!v)throw Error("instant_topo_context_failed");let x=v.createImageData(224,156),w=x.data;for(let e=0;e<156;e++)for(let t=0;t<224;t++){let n=224*e+t,o=4*n,r=a[n],l=i(t+1,e)-i(t-1,e),d=c(.82-.46*l-.38*(i(t,e+1)-i(t,e-1)),.34,1.14),s=Math.abs(18*r-Math.round(18*r)),h=s<.022,p=Math.round(c(145*d+34,0,255));if(h){let e=s<.009?.34:.18;m[o]=Math.round(p*(1-.4*e)),m[o+1]=Math.round(p*(1-.26*e)),m[o+2]=Math.round(p*(1-.12*e)+90*e)}else m[o]=p,m[o+1]=p,m[o+2]=p;m[o+3]=255;let[f,g,v]=(0,u.TU)("ndvi",r),x=Math.round(c(f*d,0,255)),y=Math.round(c(g*d,0,255)),b=Math.round(c(v*d,0,255));if(h){let e=s<.009?.26:.14;x=Math.round((1-e)*x+10*e),y=Math.round((1-e)*y+22*e),b=Math.round((1-e)*b+46*e)}w[o]=x,w[o+1]=y,w[o+2]=b,w[o+3]=255}return d.putImageData(s,0,0),v.putImageData(x,0,0),{outlinePng:h(l),topoPng:h(f),legend:{metric:"ndvi",min:n,max:o,unit:"NDVI",stops:u.CS.ndvi.map(e=>({value:n+(o-n)*e.stop,color:e.color}))},bbox:[-74.49,40.45,-74.33,40.59],source:"agrisense-instant-premade",generatedAt:new Date().toISOString(),metricGrid:{encoded:function(e){let t=new Uint8Array(e.buffer),n="";for(let e=0;e<t.length;e+=32768){let o=t.subarray(e,e+32768);for(let e=0;e<o.length;e++)n+=String.fromCharCode(o[e])}return window.btoa(n)}(t),width:224,height:156},imagery:{id:"instant-premade",date:null,cloudCover:null,platform:"local"}}}(),n=g(f(t.metricGrid.encoded,t.metricGrid.width,t.metricGrid.height),t.metricGrid.width,t.metricGrid.height,2);if(!e)return;F(t),k({values:n,width:t.metricGrid.width,height:t.metricGrid.height,source:t.source}),z(!0)}catch(t){if(!e)return;G(String((null==t?void 0:t.message)||"hero_map_unavailable")),z(!0),E&&(Y(!1),Z())}return()=>{e=!1}},[E]),(0,r.useEffect)(()=>{if(!b.current||!_||!D||C.current||W&&j&&!S.current)return;C.current=!0;let e=b.current,t=M.current,n=S.current,o=!!(n&&W&&E),r=new i.xsS,a=function(e){let t=document.createElement("canvas");t.width=640,t.height=640;let n=t.getContext("2d");if(!n)return null;let o=n.createLinearGradient(0,0,0,t.height);e?(o.addColorStop(0,"#0b223f"),o.addColorStop(.58,"#071933"),o.addColorStop(1,"#041126")):(o.addColorStop(0,"#d7e9fb"),o.addColorStop(.58,"#e7f1fa"),o.addColorStop(1,"#d4e2ef")),n.fillStyle=o,n.fillRect(0,0,t.width,t.height);let r=n.createRadialGradient(.22*t.width,.12*t.height,20,.22*t.width,.12*t.height,.82*t.width);e?(r.addColorStop(0,"rgba(56,189,248,0.20)"),r.addColorStop(1,"rgba(56,189,248,0)")):(r.addColorStop(0,"rgba(59,130,246,0.16)"),r.addColorStop(1,"rgba(59,130,246,0)")),n.fillStyle=r,n.fillRect(0,0,t.width,t.height);let a=new i.ROQ(t);return a.colorSpace=i.KI_,a.wrapS=i.uWy,a.wrapT=i.uWy,a}(document.documentElement.classList.contains("dark"));a&&(r.background=a);let s=e.clientWidth||900,u=e.clientHeight||520,h=new i.cPb(36,s/u,.1,2200);h.position.set(-18,92,168);let m=new l.CP7({antialias:!0,alpha:!0});m.setPixelRatio(Math.min(2,window.devicePixelRatio||1)),m.outputColorSpace=i.KI_,m.toneMapping=i.LY2,m.toneMappingExposure=1,m.setClearColor(0,0),m.domElement.style.display="block",m.domElement.style.width="100%",m.domElement.style.height="100%";let p=(e,t)=>{let n=Math.max(1,Math.floor(e)),o=Math.max(1,Math.floor(t));m.setSize(n,o,!1),h.aspect=n/o,h.updateProjectionMatrix()};if(o&&n){n.innerHTML="";let e=x();n.style.left="".concat(e.left,"px"),n.style.top="".concat(e.top,"px"),n.style.width="".concat(Math.round(e.width),"px"),n.style.height="".concat(Math.round(e.height),"px"),n.style.borderRadius="28px",n.style.opacity="1",n.style.boxShadow="0 24px 78px rgba(2,8,23,0.22)",n.appendChild(m.domElement),p(e.width,e.height)}else e.innerHTML="",e.appendChild(m.domElement),p(s,u);r.add(new i.Mig(16777215,.86));let y=new i.Ox3(16777215,1.08);y.position.set(95,120,58),r.add(y);let P=new i.Ox3(15725558,.55);P.position.set(-95,90,-80),r.add(P);let T=g(f(_.metricGrid.encoded,_.metricGrid.width,_.metricGrid.height),_.metricGrid.width,_.metricGrid.height,2),I=!!(R&&/instant-premade/i.test(R.source)),F=R?g(R.values,R.width,R.height,I?4:2):T,k=R?R.width:_.metricGrid.width,z=R?R.height:_.metricGrid.height,A=Math.max(1e-6,Math.abs(_.bbox[2]-_.bbox[0])),O=c(Math.max(1e-6,Math.abs(_.bbox[3]-_.bbox[1]))/A,.62,1.65),L=c(Math.round(220*O),130,300),K=function(e,t,n,o,r){let a=new Float32Array(o*r);for(let i=0;i<r;i++){let l=i/Math.max(1,r-1);for(let r=0;r<o;r++){let d=r/Math.max(1,o-1);a[i*o+r]=v(e,t,n,d,l)}}return a}(F,k,z,220,L),q=function(e){let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(let o=0;o<e.length;o++){let r=Number(e[o]);Number.isFinite(r)&&(r<t&&(t=r),r>n&&(n=r))}return Number.isFinite(t)&&Number.isFinite(n)&&!(n-t<1e-6)?{min:t,max:n}:{min:0,max:1}}(K),B=Math.max(1e-6,q.max-q.min),X=new Float32Array(K.length),$=I?128:R?84:68,Q=I?.9:.74;for(let e=0;e<K.length;e++){let t=Math.pow(c((K[e]-q.min)/B,0,1),I?1.22:1.08),n=Math.round(t*$)/$;X[e]=t+(n-t)*Q}let J=162*O,ee=new i._12(162,J,219,L-1),et=ee.attributes.position,en=I?30:R?56:42,eo=I?-4.4:-1.8;for(let e=0;e<X.length;e++)et.setZ(e,X[e]*en);et.needsUpdate=!0,ee.computeVertexNormals();let er=(e,t)=>{var n,o;let r=219*c(e,0,1),a=c(t,0,1)*(L-1),i=Math.floor(r),l=Math.floor(a),d=Math.min(219,i+1),s=Math.min(L-1,l+1),u=r-i,h=(n=X[220*l+i])+(X[220*l+d]-n)*u;return(h+((o=X[220*s+i])+(X[220*s+d]-o)*u-h)*(a-l))*en},ea=new d.z(h,m.domElement);ea.enabled=!1,ea.enableDamping=!0,ea.dampingFactor=.08,ea.maxPolarAngle=Math.PI/2.06,ea.minDistance=56,ea.maxDistance=260,ea.target.set(0,16,0);let ei={introPos:new i.Pa4(-18,92,168),finalPos:new i.Pa4(7,114,196),introTarget:new i.Pa4(0,12,0),finalTarget:new i.Pa4(0,8,0),introScale:1.36,finalScale:1,introOffsetY:.55,finalOffsetY:-.8},el=null,ed=null,es=!0,eu=0,ec=null,eh=null,em=null,ep=null,ef=null,eg=[],ev=null,ex=new i.ZAu;ex.rotation.x=-.055,r.add(ex);let ew=!n,ey=!1,eb=new i.iMs,eM=new i.FM8(0,0),eS=null,eN=e=>{if(!eS)return;let t=m.domElement.getBoundingClientRect();eM.x=(e.clientX-t.left)/t.width*2-1,eM.y=-((e.clientY-t.top)/t.height*2)+1,eb.setFromCamera(eM,h);let n=eb.intersectObject(eS,!1)[0];if(!n||!n.uv){U(null);return}U({ndvi:v(T,_.metricGrid.width,_.metricGrid.height,n.uv.x,1-n.uv.y),x:e.clientX-t.left,y:e.clientY-t.top})},eC=()=>U(null);m.domElement.addEventListener("pointermove",eN),m.domElement.addEventListener("pointerleave",eC),(async()=>{try{if(el=await w(m,_.outlinePng),ed=await w(m,_.topoPng),!es)return;ef=new i.Wid({map:el,color:new i.Ilk(I?15528170:15922679),metalness:.02,roughness:I?.9:.84,side:i.ehD}),(eS=new i.Kj0(ee,ef)).rotation.x=-Math.PI/2,ex.add(eS),eh=new i.jyz({uniforms:{uTopoTex:{value:ed},uReveal:{value:.001}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n              vUv = uv;\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          ",fragmentShader:"\n            uniform sampler2D uTopoTex;\n            uniform float uReveal;\n            varying vec2 vUv;\n            void main() {\n              if (vUv.x > uReveal + 0.018) discard;\n              float edge = smoothstep(uReveal + 0.02, uReveal - 0.02, vUv.x);\n              vec4 topo = texture2D(uTopoTex, vUv);\n              gl_FragColor = vec4(topo.rgb, edge);\n            }\n          ",transparent:!0,depthWrite:!1});let a=new i.Kj0(ee,eh);a.rotation.x=-Math.PI/2,a.position.y=.16,ex.add(a),em=new i.jyz({uniforms:{uMaxHeight:{value:en},uDensity:{value:I?56:42},uThickness:{value:I?.058:.044},uOpacity:{value:I?.56:.46},uLineColor:{value:new i.Ilk(I?1978945:3557723)}},vertexShader:"\n            varying float vHeight;\n            uniform float uMaxHeight;\n            void main() {\n              vHeight = max(0.0, position.z / max(uMaxHeight, 0.001));\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          ",fragmentShader:"\n            varying float vHeight;\n            uniform float uDensity;\n            uniform float uThickness;\n            uniform float uOpacity;\n            uniform vec3 uLineColor;\n            void main() {\n              float f = fract(vHeight * uDensity);\n              float d = min(f, 1.0 - f);\n              float aa = fwidth(vHeight * uDensity) * 0.9;\n              float line = 1.0 - smoothstep(uThickness, uThickness + aa, d);\n              gl_FragColor = vec4(uLineColor, line * uOpacity);\n            }\n          ",transparent:!0,depthWrite:!1});let l=new i.Kj0(ee,em);if(l.rotation.x=-Math.PI/2,l.position.y=.22,ex.add(l),!I){let e=new i.Uk6(ee);ec=new i.nls({color:1712168,transparent:!0,opacity:.12});let t=new i.ejS(e,ec);t.rotation.x=-Math.PI/2,t.position.y=.1,ex.add(t)}for(let e of(ep=I?new i.Wid({color:new i.Ilk(3100498),roughness:.9,metalness:.02,side:i.ehD}):new i.jyz({uniforms:{uOutlineTex:{value:el},uTopoTex:{value:ed},uReveal:{value:.001},uShade:{value:.88}},vertexShader:"\n              varying vec2 vUv;\n              void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n              }\n            ",fragmentShader:"\n              uniform sampler2D uOutlineTex;\n              uniform sampler2D uTopoTex;\n              uniform float uReveal;\n              uniform float uShade;\n              varying vec2 vUv;\n              void main() {\n                float blend = smoothstep(uReveal - 0.02, uReveal + 0.02, vUv.x);\n                vec3 outlineCol = texture2D(uOutlineTex, vUv).rgb;\n                vec3 topoCol = texture2D(uTopoTex, vUv).rgb;\n                vec3 color = mix(outlineCol, topoCol, blend) * uShade;\n                gl_FragColor = vec4(color, 1.0);\n              }\n            ",side:i.ehD}),["north","south","west","east"])){let t="north"===e||"south"===e?219:L-1,n=function(e,t,n,o,r,a){let l=[],d=[],s=[];for(let i=0;i<=t;i++){let s=i/Math.max(1,t),u=s,c=s;"north"===e?(u=s,c=0):"south"===e?(u=s,c=1):(u="west"===e?0:1,c=s);let h=-o/2+u*o,m=-r/2+c*r,p=n(u,c),f=h,g=m;"north"===e&&(g-=2.8),"south"===e&&(g+=2.8),"west"===e&&(f-=2.8),"east"===e&&(f+=2.8),l.push(h,p,m),l.push(f,a,g),d.push(u,c),d.push(u,c)}for(let e=0;e<t;e++){let t=2*e;s.push(t,t+1,t+2),s.push(t+1,t+3,t+2)}let u=new i.u9r;return u.setAttribute("position",new i.a$l(l,3)),u.setAttribute("uv",new i.a$l(d,2)),u.setIndex(s),u.computeVertexNormals(),u}(e,t,er,162,J,eo),o=new i.Kj0(n,ep);ex.add(o),eg.push(o)}let d=new i._12(162,J);(ev=new i.Kj0(d,ep)).rotation.x=-Math.PI/2,ev.position.y=eo,ex.add(ev);let s=new i.ZzF().setFromObject(ex),u=s.getCenter(new i.Pa4),f=s.getSize(new i.Pa4),g=Math.max(24,.55*Math.max(f.x,f.y,f.z));ei.introTarget.copy(u).add(new i.Pa4(0,.08*f.y,0)),ei.finalTarget.copy(u).add(new i.Pa4(0,.05*f.y,0)),ei.introPos.copy(ei.introTarget).add(new i.Pa4(-(.34*g),1.04*g,1.52*g)),ei.finalPos.copy(ei.finalTarget).add(new i.Pa4(.18*g,1.14*g,1.7*g)),ei.introScale=1.24,ei.finalScale=1,ei.introOffsetY=.22,ei.finalOffsetY=0,ea.minDistance=Math.max(42,.82*g),ea.maxDistance=Math.max(220,3.9*g),ea.target.copy(ei.introTarget),h.position.copy(ei.introPos);let v=performance.now(),y=e=>{V.current!==e&&(V.current=e,H(e))},b=a=>{var l,d,s,u,f,g,w,M,S,C,P,T,E,j,I,_,F,R,k,D,z,A,G,O;if(!es)return;let U=a-v,L=1,H=1;o?(L=.001,H=0,U<=400?y("initializing"):U<=2100?(y("revealing"),L=c((U-400)/1700,0,1)):U<=3400?(y("docking"),L=1,H=c((U-400-1700)/1300,0,1)):(y("interactive"),L=1,H=1,ea.enabled=!0)):(y("interactive"),L=1,H=1,ea.enabled=!0),eh&&(eh.uniforms.uReveal.value=L),ep instanceof i.jyz&&(ep.uniforms.uReveal.value=L);let W=1-Math.pow(1-H,3);if(h.position.set((l=ei.introPos.x,d=ei.finalPos.x,l+(d-l)*W),(s=ei.introPos.y,u=ei.finalPos.y,s+(u-s)*W),(f=ei.introPos.z,g=ei.finalPos.z,f+(g-f)*W)),ea.target.set((w=ei.introTarget.x,M=ei.finalTarget.x,w+(M-w)*W),(S=ei.introTarget.y,C=ei.finalTarget.y,S+(C-S)*W),(P=ei.introTarget.z,T=ei.finalTarget.z,P+(T-P)*W)),ex.scale.setScalar((E=ei.introScale,j=ei.finalScale,E+(j-E)*W)),ex.position.y=(I=ei.introOffsetY,_=ei.finalOffsetY,I+(_-I)*W),ex.rotation.y=a*(8e-5+-.000035000000000000004*W)+(.22+-.22*W),n&&o&&!ew){let t=e.getBoundingClientRect(),o=x(),r=(F=o.left,R=t.left,F+(R-F)*W),a=(k=o.top,D=t.top,k+(D-k)*W),i=(z=o.width,A=t.width,z+(A-z)*W),l=(G=o.height,O=t.height,G+(O-G)*W);n.style.left="".concat(r,"px"),n.style.top="".concat(a,"px"),n.style.width="".concat(i,"px"),n.style.height="".concat(l,"px"),n.style.borderRadius="".concat(Math.round(28+-8*W),"px"),n.style.boxShadow="0 ".concat(Math.round(24+-6*W),"px ").concat(Math.round(78+-22*W),"px rgba(2,8,23,").concat((.22+-.04000000000000001*W).toFixed(3),")"),p(i,l)}"interactive"===V.current&&n&&o&&!ew&&(ew=!0,e.innerHTML="",e.appendChild(m.domElement),p(e.clientWidth||900,e.clientHeight||520),ey||(ey=!0,Y(!1),t&&(t.style.opacity="0"),N.current||(N.current=!0),Z())),ea.update(),m.render(r,h),eu=requestAnimationFrame(b)};eu=requestAnimationFrame(b)}catch(e){if(!es)return;G(String((null==e?void 0:e.message)||"hero_render_failed"))}})();let eP=()=>{if(n&&o&&!ew){let e=x();n.style.left="".concat(e.left,"px"),n.style.top="".concat(e.top,"px"),n.style.width="".concat(e.width,"px"),n.style.height="".concat(e.height,"px"),p(e.width,e.height)}else p(e.clientWidth||900,e.clientHeight||520)};return window.addEventListener("resize",eP),()=>{es=!1,cancelAnimationFrame(eu),window.removeEventListener("resize",eP),m.domElement.removeEventListener("pointermove",eN),m.domElement.removeEventListener("pointerleave",eC),ea.dispose(),ee.dispose(),null==ef||ef.dispose(),null==eh||eh.dispose(),null==em||em.dispose(),null==ec||ec.dispose(),null==el||el.dispose(),null==ed||ed.dispose(),eg.forEach(e=>{e.geometry.dispose()}),ev&&ev.geometry.dispose(),null==ep||ep.dispose(),null==a||a.dispose(),m.dispose(),m.domElement.parentNode===e&&e.removeChild(m.domElement),n&&m.domElement.parentNode===n&&n.removeChild(m.domElement),C.current=!1}},[_,R,D,j,E]),A)?(0,o.jsx)("div",{className:"flex h-[26rem] items-center justify-center rounded-2xl border border-amber-300 bg-amber-50/70 px-4 text-center dark:border-amber-700 dark:bg-amber-950/30",children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("p",{className:"inline-flex items-center gap-2 text-sm font-medium text-amber-900 dark:text-amber-100",children:[(0,o.jsx)(s.Z,{className:"h-4 w-4"}),"Hero map currently unavailable"]}),(0,o.jsx)("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:A||"Please retry in a moment."})]})}):(0,o.jsxs)("div",{className:"relative",children:[W&&j&&(0,a.createPortal)((0,o.jsx)("div",{ref:M,className:"pointer-events-none fixed inset-0 z-[80] bg-[hsl(var(--background))] transition-opacity duration-300"}),j),W&&j&&(0,a.createPortal)((0,o.jsx)("div",{ref:S,className:"pointer-events-none fixed z-[81] overflow-hidden rounded-[28px] border border-border bg-[hsl(var(--background))]"}),j),(0,o.jsx)("div",{ref:b,className:"h-[28rem] w-full overflow-hidden rounded-2xl border border-cyan-700/20 bg-[hsl(var(--background))] transition-opacity duration-500 ".concat(W?"opacity-0":"opacity-100")}),!W&&_&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"absolute left-3 top-3 rounded-full border border-cyan-400/30 bg-[#081226]/80 px-3 py-1 text-[11px] uppercase tracking-[0.12em] text-cyan-100",children:"interactive"===L?"Interactive":L}),(0,o.jsxs)("div",{className:"absolute right-3 top-3 rounded-full border border-cyan-400/30 bg-[#081226]/80 px-3 py-1 text-[11px] text-cyan-100",children:[_.legend.metric.toUpperCase()," | ",(null==R?void 0:R.source)||_.source]})]}),O&&!W&&(0,o.jsxs)("div",{className:"pointer-events-none absolute z-20 rounded-md border border-cyan-400/50 bg-[#081226]/90 px-2 py-1 text-[11px] text-cyan-100",style:{left:Math.min(O.x+14,((null===(n=b.current)||void 0===n?void 0:n.clientWidth)||0)-120),top:Math.max(8,O.y-26)},children:["NDVI ",O.ndvi.toFixed(3)]}),_&&(0,o.jsxs)("div",{className:"mt-3 rounded-xl border border-border bg-card/70 p-3",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.12em] text-muted-foreground",children:[(0,o.jsx)("span",{children:"NDVI Legend"}),(0,o.jsx)("span",{children:_.legend.unit})]}),(0,o.jsx)("div",{className:"mt-2 h-3 w-full overflow-hidden rounded-sm border border-black/15",children:(0,o.jsx)("div",{className:"h-full w-full",style:{background:"linear-gradient(90deg, ".concat(K.map(e=>"rgb(".concat(e.color[0],", ").concat(e.color[1],", ").concat(e.color[2],")")).join(", "),")")}})}),(0,o.jsxs)("div",{className:"mt-1 flex items-center justify-between text-xs text-muted-foreground",children:[(0,o.jsx)("span",{children:_.legend.min.toFixed(3)}),(0,o.jsx)("span",{children:_.legend.max.toFixed(3)})]})]})]})}},6506:function(e,t,n){n.d(t,{CS:function(){return o},G5:function(){return l},TU:function(){return i},t7:function(){return a},uZ:function(){return r}});let o={ndvi:[{stop:0,color:[93,123,223]},{stop:.16,color:[110,177,236]},{stop:.32,color:[106,219,226]},{stop:.5,color:[129,216,156]},{stop:.68,color:[232,220,124]},{stop:.84,color:[242,176,114]},{stop:1,color:[226,126,134]}],soil:[{stop:0,color:[106,128,214]},{stop:.2,color:[122,182,232]},{stop:.4,color:[121,219,196]},{stop:.58,color:[152,214,149]},{stop:.76,color:[236,204,126]},{stop:1,color:[214,139,102]}],et:[{stop:0,color:[98,120,218]},{stop:.2,color:[109,165,232]},{stop:.4,color:[114,217,223]},{stop:.6,color:[146,214,149]},{stop:.78,color:[241,197,116]},{stop:1,color:[226,126,110]}]};function r(e,t,n){return Math.max(t,Math.min(n,e))}function a(e,t,n){return e+(t-e)*n}function i(e,t){let n=o[e],a=r(t,0,1);for(let e=0;e<n.length-1;e++){let t=n[e],o=n[e+1];if(a<=o.stop){var i,l,d;let e=(a-t.stop)/Math.max(1e-6,o.stop-t.stop);return[Math.round((i=t.color[0])+(o.color[0]-i)*e),Math.round((l=t.color[1])+(o.color[1]-l)*e),Math.round((d=t.color[2])+(o.color[2]-d)*e)]}}return n[n.length-1].color}function l(e){return"linear-gradient(90deg, ".concat(o[e].map(e=>"rgb(".concat(e.color[0],", ").concat(e.color[1],", ").concat(e.color[2],") ").concat(Math.round(100*e.stop),"%")).join(", "),")")}}}]);
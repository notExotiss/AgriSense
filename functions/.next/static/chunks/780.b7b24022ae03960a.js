"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[780],{116:function(e,t,n){n.d(t,{Z:function(){return o}});let o=(0,n(1373).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},9780:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var o=n(5893),r=n(7294),a=n(3935),i=n(4250),l=n(9477),d=n(9365),s=n(116),u=n(6506);function c(e,t,n){return Math.max(t,Math.min(n,e))}function h(e){return e.toDataURL("image/png").replace(/^data:image\/png;base64,/,"")}function m(e,t,n){let o=window.atob(e),r=new Uint8Array(o.length);for(let e=0;e<o.length;e++)r[e]=o.charCodeAt(e);let a=t*n,i=new Float32Array(r.buffer,r.byteOffset,Math.min(a,Math.floor(r.byteLength/4))),l=new Float32Array(a);for(let e=0;e<a;e++){var d;let t=Number(null!==(d=i[e])&&void 0!==d?d:0);l[e]=Number.isFinite(t)?t:0}return l}function p(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;if(o<=0||t<3||n<3)return e;let r=e;for(let e=0;e<o;e++){let e=new Float32Array(t*n);for(let o=0;o<n;o++)for(let a=0;a<t;a++){let i=o*t+a,l=r[o*t+Math.max(0,a-1)],d=r[o*t+Math.min(t-1,a+1)],s=r[Math.max(0,o-1)*t+a],u=r[Math.min(n-1,o+1)*t+a];e[i]=(l+d+s+u+2*r[i])/6}r=e}return r}function f(e,t,n,o,r){var a,i;let l=c(o,0,1)*(t-1),d=c(r,0,1)*(n-1),s=Math.floor(l),u=Math.floor(d),h=Math.min(t-1,s+1),m=Math.min(n-1,u+1),p=l-s,f=(a=e[u*t+s])+(e[u*t+h]-a)*p;return f+((i=e[m*t+s])+(e[m*t+h]-i)*p-f)*(d-u)}function g(){let e=Math.min(.84*window.innerWidth,1120),t=Math.min(.78*window.innerHeight,700),n=e,o=n/1.6;return o>t&&(n=1.6*(o=t)),{left:Math.round((window.innerWidth-n)/2),top:Math.round((window.innerHeight-o)/2),width:Math.round(n),height:Math.round(o)}}async function x(e,t){let n=await new Promise((e,n)=>{let o=new Image;o.onload=()=>e(o),o.onerror=()=>n(Error("hero_texture_load_failed")),o.src="data:image/png;base64,".concat(t)}),o=new i.xEZ(n);o.colorSpace=i.KI_,o.wrapS=i.uWy,o.wrapT=i.uWy,o.needsUpdate=!0;let r=e.capabilities.getMaxAnisotropy();return o.anisotropy=Math.max(2,Math.min(r,16)),o}function v(e){var t,n;let{introMode:v="run",onIntroComplete:w}=e,y=(0,r.useRef)(null),b=(0,r.useRef)(null),M=(0,r.useRef)(null),S=(0,r.useRef)(!1),P=(0,r.useRef)(!1),N=(0,r.useRef)(!1),T=(0,r.useRef)(w),E="run"===(0,r.useRef)(v).current,[C,j]=(0,r.useState)(null),[I,_]=(0,r.useState)(null),[F,R]=(0,r.useState)(null),[k,D]=(0,r.useState)(!1),[A,z]=(0,r.useState)(null),[G,O]=(0,r.useState)(null),[U,H]=(0,r.useState)(E?"initializing":"interactive"),[L,W]=(0,r.useState)(E),Y=(0,r.useRef)("initializing"),V=(0,r.useMemo)(()=>{var e;return(null==I?void 0:null===(e=I.legend)||void 0===e?void 0:e.stops)||[]},[null==I?void 0:null===(t=I.legend)||void 0===t?void 0:t.stops]);(0,r.useEffect)(()=>{T.current=w},[w]);let K=()=>{var e;N.current||(N.current=!0,null===(e=T.current)||void 0===e||e.call(T))};return((0,r.useEffect)(()=>{if("undefined"==typeof document)return;let e=document.createElement("div");return e.setAttribute("data-hero-cinematic-root","true"),document.body.appendChild(e),j(e),()=>{e.parentNode&&e.parentNode.removeChild(e)}},[]),(0,r.useEffect)(()=>{E||(S.current=!0,Y.current="interactive",H("interactive"),W(!1))},[E]),(0,r.useEffect)(()=>{let e=!0;z(null),D(!1);try{let t=function(){let e=new Float32Array(34944),t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(let o=0;o<156;o++){let r=o/155;for(let a=0;a<224;a++){let i=a/223,l=c(.34+(.24*Math.sin((4.8*i+1.9*r)*Math.PI)+.18*Math.cos((3.1*r-.8*i)*Math.PI)+Math.sin(9.2*i*Math.PI)*Math.cos(7.4*r*Math.PI)*.12)+.34*Math.exp(-((i-.62)*(i-.62)*9+(r-.42)*(r-.42)*14))+-.22*Math.exp(-((i-.28)*(i-.28)*16+(r-.66)*(r-.66)*11)),-.22,.76);e[224*o+a]=l,l<t&&(t=l),l>n&&(n=l)}}let o=Math.max(1e-6,n-t),r=new Float32Array(e.length);for(let n=0;n<e.length;n++)r[n]=c((e[n]-t)/o,0,1);let a=(e,t)=>{let n=c(e,0,223);return r[224*c(t,0,155)+n]},i=document.createElement("canvas");i.width=224,i.height=156;let l=i.getContext("2d");if(!l)throw Error("instant_outline_context_failed");let d=l.createImageData(224,156),s=d.data,m=document.createElement("canvas");m.width=224,m.height=156;let p=m.getContext("2d");if(!p)throw Error("instant_topo_context_failed");let f=p.createImageData(224,156),g=f.data;for(let e=0;e<156;e++)for(let t=0;t<224;t++){let n=224*e+t,o=4*n,i=r[n],l=a(t+1,e)-a(t-1,e),d=c(.82-.46*l-.38*(a(t,e+1)-a(t,e-1)),.34,1.14),h=Math.abs(21*i-Math.round(21*i)),m=h<.03,p=Math.round(c(145*d+34,0,255));if(m){let e=h<.012?.6:.36;s[o]=Math.round(p*(1-.4*e)),s[o+1]=Math.round(p*(1-.26*e)),s[o+2]=Math.round(p*(1-.12*e)+90*e)}else s[o]=p,s[o+1]=p,s[o+2]=p;s[o+3]=255;let[f,x,v]=(0,u.TU)("ndvi",i),w=Math.round(c(f*d,0,255)),y=Math.round(c(x*d,0,255)),b=Math.round(c(v*d,0,255));if(m){let e=h<.012?.55:.32;w=Math.round((1-e)*w+10*e),y=Math.round((1-e)*y+22*e),b=Math.round((1-e)*b+46*e)}g[o]=w,g[o+1]=y,g[o+2]=b,g[o+3]=255}return l.putImageData(d,0,0),p.putImageData(f,0,0),{outlinePng:h(i),topoPng:h(m),legend:{metric:"ndvi",min:t,max:n,unit:"NDVI",stops:u.CS.ndvi.map(e=>({value:t+(n-t)*e.stop,color:e.color}))},bbox:[-74.49,40.45,-74.33,40.59],source:"agrisense-instant-premade",generatedAt:new Date().toISOString(),metricGrid:{encoded:function(e){let t=new Uint8Array(e.buffer),n="";for(let e=0;e<t.length;e+=32768){let o=t.subarray(e,e+32768);for(let e=0;e<o.length;e++)n+=String.fromCharCode(o[e])}return window.btoa(n)}(e),width:224,height:156},imagery:{id:"instant-premade",date:null,cloudCover:null,platform:"local"}}}(),n=p(m(t.metricGrid.encoded,t.metricGrid.width,t.metricGrid.height),t.metricGrid.width,t.metricGrid.height,2);if(!e)return;_(t),R({values:n,width:t.metricGrid.width,height:t.metricGrid.height,source:t.source}),D(!0)}catch(t){if(!e)return;z(String((null==t?void 0:t.message)||"hero_map_unavailable")),D(!0),E&&(W(!1),K())}return()=>{e=!1}},[E]),(0,r.useEffect)(()=>{if(!y.current||!I||!k||P.current||L&&C&&!M.current)return;P.current=!0;let e=y.current,t=b.current,n=M.current,o=!!(n&&L&&E),r=new i.xsS,a=function(e){let t=document.createElement("canvas");t.width=640,t.height=640;let n=t.getContext("2d");if(!n)return null;let o=n.createLinearGradient(0,0,0,t.height);e?(o.addColorStop(0,"#0b223f"),o.addColorStop(.58,"#071933"),o.addColorStop(1,"#041126")):(o.addColorStop(0,"#d7e9fb"),o.addColorStop(.58,"#e7f1fa"),o.addColorStop(1,"#d4e2ef")),n.fillStyle=o,n.fillRect(0,0,t.width,t.height);let r=n.createRadialGradient(.22*t.width,.12*t.height,20,.22*t.width,.12*t.height,.82*t.width);e?(r.addColorStop(0,"rgba(56,189,248,0.20)"),r.addColorStop(1,"rgba(56,189,248,0)")):(r.addColorStop(0,"rgba(59,130,246,0.16)"),r.addColorStop(1,"rgba(59,130,246,0)")),n.fillStyle=r,n.fillRect(0,0,t.width,t.height);let a=new i.ROQ(t);return a.colorSpace=i.KI_,a.wrapS=i.uWy,a.wrapT=i.uWy,a}(document.documentElement.classList.contains("dark"));a&&(r.background=a);let s=e.clientWidth||900,u=e.clientHeight||520,h=new i.cPb(36,s/u,.1,2200);h.position.set(-18,92,168);let v=new l.CP7({antialias:!0,alpha:!0});v.setPixelRatio(Math.min(2,window.devicePixelRatio||1)),v.outputColorSpace=i.KI_,v.toneMapping=i.LY2,v.toneMappingExposure=1,v.setClearColor(0,0),v.domElement.style.display="block",v.domElement.style.width="100%",v.domElement.style.height="100%";let w=(e,t)=>{let n=Math.max(1,Math.floor(e)),o=Math.max(1,Math.floor(t));v.setSize(n,o,!1),h.aspect=n/o,h.updateProjectionMatrix()};if(o&&n){n.innerHTML="";let e=g();n.style.left="".concat(e.left,"px"),n.style.top="".concat(e.top,"px"),n.style.width="".concat(Math.round(e.width),"px"),n.style.height="".concat(Math.round(e.height),"px"),n.style.borderRadius="28px",n.style.opacity="1",n.style.boxShadow="0 24px 78px rgba(2,8,23,0.22)",n.appendChild(v.domElement),w(e.width,e.height)}else e.innerHTML="",e.appendChild(v.domElement),w(s,u);r.add(new i.Mig(16777215,.86));let N=new i.Ox3(16777215,1.08);N.position.set(95,120,58),r.add(N);let T=new i.Ox3(15725558,.55);T.position.set(-95,90,-80),r.add(T);let j=p(m(I.metricGrid.encoded,I.metricGrid.width,I.metricGrid.height),I.metricGrid.width,I.metricGrid.height,2),_=F?p(F.values,F.width,F.height,2):j,R=F?F.width:I.metricGrid.width,D=F?F.height:I.metricGrid.height,A=Math.max(1e-6,Math.abs(I.bbox[2]-I.bbox[0])),G=c(Math.max(1e-6,Math.abs(I.bbox[3]-I.bbox[1]))/A,.62,1.65),U=c(Math.round(220*G),130,300),V=function(e,t,n,o,r){let a=new Float32Array(o*r);for(let i=0;i<r;i++){let l=i/Math.max(1,r-1);for(let r=0;r<o;r++){let d=r/Math.max(1,o-1);a[i*o+r]=f(e,t,n,d,l)}}return a}(_,R,D,220,U),Z=function(e){let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(let o=0;o<e.length;o++){let r=Number(e[o]);Number.isFinite(r)&&(r<t&&(t=r),r>n&&(n=r))}return Number.isFinite(t)&&Number.isFinite(n)&&!(n-t<1e-6)?{min:t,max:n}:{min:0,max:1}}(V),q=Math.max(1e-6,Z.max-Z.min),B=new Float32Array(V.length),X=F?84:68;for(let e=0;e<V.length;e++){let t=Math.pow(c((V[e]-Z.min)/q,0,1),1.08),n=Math.round(t*X)/X;B[e]=t+(n-t)*.74}let $=162*G,Q=new i._12(162,$,219,U-1),J=Q.attributes.position,ee=F?68:44;for(let e=0;e<B.length;e++)J.setZ(e,B[e]*ee);J.needsUpdate=!0,Q.computeVertexNormals();let et=(e,t)=>{var n,o;let r=219*c(e,0,1),a=c(t,0,1)*(U-1),i=Math.floor(r),l=Math.floor(a),d=Math.min(219,i+1),s=Math.min(U-1,l+1),u=r-i,h=(n=B[220*l+i])+(B[220*l+d]-n)*u;return(h+((o=B[220*s+i])+(B[220*s+d]-o)*u-h)*(a-l))*ee},en=new d.z(h,v.domElement);en.enabled=!1,en.enableDamping=!0,en.dampingFactor=.08,en.maxPolarAngle=Math.PI/2.06,en.minDistance=56,en.maxDistance=260,en.target.set(0,16,0);let eo={introPos:new i.Pa4(-18,92,168),finalPos:new i.Pa4(7,114,196),introTarget:new i.Pa4(0,12,0),finalTarget:new i.Pa4(0,8,0),introScale:1.36,finalScale:1,introOffsetY:.55,finalOffsetY:-.8},er=null,ea=null,ei=!0,el=0,ed=null,es=null,eu=null,ec=null,eh=null,em=[],ep=null,ef=new i.ZAu;ef.rotation.x=-.055,r.add(ef);let eg=!n,ex=!1,ev=new i.iMs,ew=new i.FM8(0,0),ey=null,eb=e=>{if(!ey)return;let t=v.domElement.getBoundingClientRect();ew.x=(e.clientX-t.left)/t.width*2-1,ew.y=-((e.clientY-t.top)/t.height*2)+1,ev.setFromCamera(ew,h);let n=ev.intersectObject(ey,!1)[0];if(!n||!n.uv){O(null);return}O({ndvi:f(j,I.metricGrid.width,I.metricGrid.height,n.uv.x,1-n.uv.y),x:e.clientX-t.left,y:e.clientY-t.top})},eM=()=>O(null);v.domElement.addEventListener("pointermove",eb),v.domElement.addEventListener("pointerleave",eM),(async()=>{try{if(er=await x(v,I.outlinePng),ea=await x(v,I.topoPng),!ei)return;eh=new i.Wid({map:er,color:new i.Ilk(15922679),metalness:.02,roughness:.84,side:i.ehD}),(ey=new i.Kj0(Q,eh)).rotation.x=-Math.PI/2,ef.add(ey),es=new i.jyz({uniforms:{uTopoTex:{value:ea},uReveal:{value:.001}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n              vUv = uv;\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          ",fragmentShader:"\n            uniform sampler2D uTopoTex;\n            uniform float uReveal;\n            varying vec2 vUv;\n            void main() {\n              if (vUv.x > uReveal + 0.018) discard;\n              float edge = smoothstep(uReveal + 0.02, uReveal - 0.02, vUv.x);\n              vec4 topo = texture2D(uTopoTex, vUv);\n              gl_FragColor = vec4(topo.rgb, edge);\n            }\n          ",transparent:!0,depthWrite:!1});let a=new i.Kj0(Q,es);a.rotation.x=-Math.PI/2,a.position.y=.16,ef.add(a),eu=new i.jyz({uniforms:{uMaxHeight:{value:ee},uDensity:{value:58},uThickness:{value:.048},uOpacity:{value:.72}},vertexShader:"\n            varying float vHeight;\n            uniform float uMaxHeight;\n            void main() {\n              vHeight = max(0.0, position.z / max(uMaxHeight, 0.001));\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          ",fragmentShader:"\n            varying float vHeight;\n            uniform float uDensity;\n            uniform float uThickness;\n            uniform float uOpacity;\n            void main() {\n              float f = fract(vHeight * uDensity);\n              float d = min(f, 1.0 - f);\n              float aa = fwidth(vHeight * uDensity) * 0.9;\n              float line = 1.0 - smoothstep(uThickness, uThickness + aa, d);\n              gl_FragColor = vec4(vec3(0.16, 0.18, 0.21), line * uOpacity);\n            }\n          ",transparent:!0,depthWrite:!1});let l=new i.Kj0(Q,eu);l.rotation.x=-Math.PI/2,l.position.y=.22,ef.add(l);let d=new i.Uk6(Q);ed=new i.nls({color:1712168,transparent:!0,opacity:.12});let s=new i.ejS(d,ed);for(let e of(s.rotation.x=-Math.PI/2,s.position.y=.1,ef.add(s),ec=new i.jyz({uniforms:{uOutlineTex:{value:er},uTopoTex:{value:ea},uReveal:{value:.001},uShade:{value:.88}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n              vUv = uv;\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          ",fragmentShader:"\n            uniform sampler2D uOutlineTex;\n            uniform sampler2D uTopoTex;\n            uniform float uReveal;\n            uniform float uShade;\n            varying vec2 vUv;\n            void main() {\n              float blend = smoothstep(uReveal - 0.02, uReveal + 0.02, vUv.x);\n              vec3 outlineCol = texture2D(uOutlineTex, vUv).rgb;\n              vec3 topoCol = texture2D(uTopoTex, vUv).rgb;\n              vec3 color = mix(outlineCol, topoCol, blend) * uShade;\n              gl_FragColor = vec4(color, 1.0);\n            }\n          ",side:i.ehD}),["north","south","west","east"])){let t="north"===e||"south"===e?219:U-1,n=function(e,t,n,o,r,a){let l=[],d=[],s=[];for(let a=0;a<=t;a++){let i=a/Math.max(1,t),s=i,u=i;"north"===e?(s=i,u=0):"south"===e?(s=i,u=1):(s="west"===e?0:1,u=i);let c=-o/2+s*o,h=-r/2+u*r,m=n(s,u),p=c,f=h;"north"===e&&(f-=2.8),"south"===e&&(f+=2.8),"west"===e&&(p-=2.8),"east"===e&&(p+=2.8),l.push(c,m,h),l.push(p,-1.8,f),d.push(s,u),d.push(s,u)}for(let e=0;e<t;e++){let t=2*e;s.push(t,t+1,t+2),s.push(t+1,t+3,t+2)}let u=new i.u9r;return u.setAttribute("position",new i.a$l(l,3)),u.setAttribute("uv",new i.a$l(d,2)),u.setIndex(s),u.computeVertexNormals(),u}(e,t,et,162,$,0),o=new i.Kj0(n,ec);ef.add(o),em.push(o)}let u=new i._12(162,$);(ep=new i.Kj0(u,ec)).rotation.x=-Math.PI/2,ep.position.y=-1.8,ef.add(ep);let m=new i.ZzF().setFromObject(ef),p=m.getCenter(new i.Pa4),f=m.getSize(new i.Pa4),y=Math.max(24,.55*Math.max(f.x,f.y,f.z));eo.introTarget.copy(p).add(new i.Pa4(0,.08*f.y,0)),eo.finalTarget.copy(p).add(new i.Pa4(0,.05*f.y,0)),eo.introPos.copy(eo.introTarget).add(new i.Pa4(-(.34*y),1.04*y,1.52*y)),eo.finalPos.copy(eo.finalTarget).add(new i.Pa4(.18*y,1.14*y,1.7*y)),eo.introScale=1.24,eo.finalScale=1,eo.introOffsetY=.22,eo.finalOffsetY=0,en.minDistance=Math.max(42,.82*y),en.maxDistance=Math.max(220,3.9*y),en.target.copy(eo.introTarget),h.position.copy(eo.introPos);let b=performance.now(),M=e=>{Y.current!==e&&(Y.current=e,H(e))},P=a=>{var i,l,d,s,u,m,p,f,x,y,N,T,E,C,j,I,_,F,R,k,D,A,z,G;if(!ei)return;let O=a-b,U=1,H=1;o?(U=.001,H=0,O<=400?M("initializing"):O<=2100?(M("revealing"),U=c((O-400)/1700,0,1)):O<=3400?(M("docking"),U=1,H=c((O-400-1700)/1300,0,1)):(M("interactive"),U=1,H=1,en.enabled=!0)):(M("interactive"),U=1,H=1,en.enabled=!0),es&&(es.uniforms.uReveal.value=U),ec&&(ec.uniforms.uReveal.value=U);let L=1-Math.pow(1-H,3);if(h.position.set((i=eo.introPos.x,l=eo.finalPos.x,i+(l-i)*L),(d=eo.introPos.y,s=eo.finalPos.y,d+(s-d)*L),(u=eo.introPos.z,m=eo.finalPos.z,u+(m-u)*L)),en.target.set((p=eo.introTarget.x,f=eo.finalTarget.x,p+(f-p)*L),(x=eo.introTarget.y,y=eo.finalTarget.y,x+(y-x)*L),(N=eo.introTarget.z,T=eo.finalTarget.z,N+(T-N)*L)),ef.scale.setScalar((E=eo.introScale,C=eo.finalScale,E+(C-E)*L)),ef.position.y=(j=eo.introOffsetY,I=eo.finalOffsetY,j+(I-j)*L),ef.rotation.y=a*(8e-5+-.000035000000000000004*L)+(.22+-.22*L),n&&o&&!eg){let t=e.getBoundingClientRect(),o=g(),r=(_=o.left,F=t.left,_+(F-_)*L),a=(R=o.top,k=t.top,R+(k-R)*L),i=(D=o.width,A=t.width,D+(A-D)*L),l=(z=o.height,G=t.height,z+(G-z)*L);n.style.left="".concat(r,"px"),n.style.top="".concat(a,"px"),n.style.width="".concat(i,"px"),n.style.height="".concat(l,"px"),n.style.borderRadius="".concat(Math.round(28+-8*L),"px"),n.style.boxShadow="0 ".concat(Math.round(24+-6*L),"px ").concat(Math.round(78+-22*L),"px rgba(2,8,23,").concat((.22+-.04000000000000001*L).toFixed(3),")"),w(i,l)}"interactive"===Y.current&&n&&o&&!eg&&(eg=!0,e.innerHTML="",e.appendChild(v.domElement),w(e.clientWidth||900,e.clientHeight||520),ex||(ex=!0,W(!1),t&&(t.style.opacity="0"),S.current||(S.current=!0),K())),en.update(),v.render(r,h),el=requestAnimationFrame(P)};el=requestAnimationFrame(P)}catch(e){if(!ei)return;z(String((null==e?void 0:e.message)||"hero_render_failed"))}})();let eS=()=>{if(n&&o&&!eg){let e=g();n.style.left="".concat(e.left,"px"),n.style.top="".concat(e.top,"px"),n.style.width="".concat(e.width,"px"),n.style.height="".concat(e.height,"px"),w(e.width,e.height)}else w(e.clientWidth||900,e.clientHeight||520)};return window.addEventListener("resize",eS),()=>{ei=!1,cancelAnimationFrame(el),window.removeEventListener("resize",eS),v.domElement.removeEventListener("pointermove",eb),v.domElement.removeEventListener("pointerleave",eM),en.dispose(),Q.dispose(),null==eh||eh.dispose(),null==es||es.dispose(),null==eu||eu.dispose(),null==ed||ed.dispose(),null==er||er.dispose(),null==ea||ea.dispose(),em.forEach(e=>{e.geometry.dispose()}),ep&&ep.geometry.dispose(),null==ec||ec.dispose(),null==a||a.dispose(),v.dispose(),v.domElement.parentNode===e&&e.removeChild(v.domElement),n&&v.domElement.parentNode===n&&n.removeChild(v.domElement),P.current=!1}},[I,F,k,C,E]),A)?(0,o.jsx)("div",{className:"flex h-[26rem] items-center justify-center rounded-2xl border border-amber-300 bg-amber-50/70 px-4 text-center dark:border-amber-700 dark:bg-amber-950/30",children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("p",{className:"inline-flex items-center gap-2 text-sm font-medium text-amber-900 dark:text-amber-100",children:[(0,o.jsx)(s.Z,{className:"h-4 w-4"}),"Hero map currently unavailable"]}),(0,o.jsx)("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:A||"Please retry in a moment."})]})}):(0,o.jsxs)("div",{className:"relative",children:[L&&C&&(0,a.createPortal)((0,o.jsx)("div",{ref:b,className:"pointer-events-none fixed inset-0 z-[80] bg-[hsl(var(--background))] transition-opacity duration-300"}),C),L&&C&&(0,a.createPortal)((0,o.jsx)("div",{ref:M,className:"pointer-events-none fixed z-[81] overflow-hidden rounded-[28px] border border-border bg-[hsl(var(--background))]"}),C),(0,o.jsx)("div",{ref:y,className:"h-[28rem] w-full overflow-hidden rounded-2xl border border-cyan-700/20 bg-[hsl(var(--background))] transition-opacity duration-500 ".concat(L?"opacity-0":"opacity-100")}),!L&&I&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"absolute left-3 top-3 rounded-full border border-cyan-400/30 bg-[#081226]/80 px-3 py-1 text-[11px] uppercase tracking-[0.12em] text-cyan-100",children:"interactive"===U?"Interactive":U}),(0,o.jsxs)("div",{className:"absolute right-3 top-3 rounded-full border border-cyan-400/30 bg-[#081226]/80 px-3 py-1 text-[11px] text-cyan-100",children:[I.legend.metric.toUpperCase()," | ",(null==F?void 0:F.source)||I.source]})]}),G&&!L&&(0,o.jsxs)("div",{className:"pointer-events-none absolute z-20 rounded-md border border-cyan-400/50 bg-[#081226]/90 px-2 py-1 text-[11px] text-cyan-100",style:{left:Math.min(G.x+14,((null===(n=y.current)||void 0===n?void 0:n.clientWidth)||0)-120),top:Math.max(8,G.y-26)},children:["NDVI ",G.ndvi.toFixed(3)]}),I&&(0,o.jsxs)("div",{className:"mt-3 rounded-xl border border-border bg-card/70 p-3",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.12em] text-muted-foreground",children:[(0,o.jsx)("span",{children:"NDVI Legend"}),(0,o.jsx)("span",{children:I.legend.unit})]}),(0,o.jsx)("div",{className:"mt-2 h-3 w-full overflow-hidden rounded-sm border border-black/15",children:(0,o.jsx)("div",{className:"h-full w-full",style:{background:"linear-gradient(90deg, ".concat(V.map(e=>"rgb(".concat(e.color[0],", ").concat(e.color[1],", ").concat(e.color[2],")")).join(", "),")")}})}),(0,o.jsxs)("div",{className:"mt-1 flex items-center justify-between text-xs text-muted-foreground",children:[(0,o.jsx)("span",{children:I.legend.min.toFixed(3)}),(0,o.jsx)("span",{children:I.legend.max.toFixed(3)})]})]})]})}},6506:function(e,t,n){n.d(t,{CS:function(){return o},G5:function(){return l},TU:function(){return i},t7:function(){return a},uZ:function(){return r}});let o={ndvi:[{stop:0,color:[53,74,193]},{stop:.15,color:[69,138,223]},{stop:.32,color:[71,192,220]},{stop:.48,color:[95,205,116]},{stop:.64,color:[220,211,88]},{stop:.8,color:[239,163,68]},{stop:1,color:[214,83,90]}],soil:[{stop:0,color:[65,83,191]},{stop:.2,color:[80,145,220]},{stop:.4,color:[86,196,181]},{stop:.58,color:[122,203,117]},{stop:.76,color:[231,195,86]},{stop:1,color:[191,96,60]}],et:[{stop:0,color:[55,70,189]},{stop:.2,color:[64,124,221]},{stop:.4,color:[78,196,215]},{stop:.6,color:[108,205,112]},{stop:.78,color:[239,190,82]},{stop:1,color:[209,84,72]}]};function r(e,t,n){return Math.max(t,Math.min(n,e))}function a(e,t,n){return e+(t-e)*n}function i(e,t){let n=o[e],a=r(t,0,1);for(let e=0;e<n.length-1;e++){let t=n[e],o=n[e+1];if(a<=o.stop){var i,l,d;let e=(a-t.stop)/Math.max(1e-6,o.stop-t.stop);return[Math.round((i=t.color[0])+(o.color[0]-i)*e),Math.round((l=t.color[1])+(o.color[1]-l)*e),Math.round((d=t.color[2])+(o.color[2]-d)*e)]}}return n[n.length-1].color}function l(e){return"linear-gradient(90deg, ".concat(o[e].map(e=>"rgb(".concat(e.color[0],", ").concat(e.color[1],", ").concat(e.color[2],") ").concat(Math.round(100*e.stop),"%")).join(", "),")")}}}]);
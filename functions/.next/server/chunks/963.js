exports.id=963,exports.ids=[963],exports.modules={9963:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{default:()=>u});var a=r(997),o=r(4045);r(9637),r(3601),r(2136);var l=r(5194),i=r.n(l),s=r(6689),d=e([o]);function u({bbox:e,onBboxChange:t,polygon:r,onPolygonChange:n,ndviPng:l,ndviBounds:d,hotspots:u,processedOverlayUrl:g,smoothOverlay:c=!0,overlayOpacity:m=.85}){let p=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=p.current;if(!e)return;let r=new(i()).FeatureGroup;e.addLayer(r);let a=new(i()).Control.Draw({draw:{polygon:!0,rectangle:!0,polyline:!1,circle:!1,marker:!1,circlemarker:!1},edit:{featureGroup:r}});return e.addControl(a),e.on(i().Draw.Event.CREATED,e=>{let a=e.layer;if(r.addLayer(a),a.getBounds){let e=a.getBounds(),r=e.getWest(),n=e.getSouth(),o=e.getEast(),l=e.getNorth();t&&t([r,n,o,l])}if(a.getLatLngs){let e=a.getLatLngs()[0]||[];n&&n(e)}}),()=>{e.removeControl(a),e.removeLayer(r)}},[p.current]),(0,s.useEffect)(()=>{let t=p.current;if(t)try{if(d&&Array.isArray(d)&&4===d.length){let e=i().latLngBounds([d[1],d[0]],[d[3],d[2]]);t.fitBounds(e,{padding:[20,20]});return}if(e&&Array.isArray(e)&&4===e.length){let r=i().latLngBounds([e[1],e[0]],[e[3],e[2]]);t.fitBounds(r,{padding:[20,20]});return}if(r&&r.length){let e=i().latLngBounds(r);t.fitBounds(e,{padding:[20,20]})}}catch{}},[JSON.stringify(d),JSON.stringify(e),JSON.stringify(r)]);let f=o.MapContainer,h=o.ImageOverlay,y=o.TileLayer,x=(0,s.useMemo)(()=>g&&g.length?g:l&&l.length?`data:image/png;base64,${l}`:null,[g,l]);(0,s.useEffect)(()=>{if(!c)return;let e="leaflet-image-smooth-css";if(document.getElementById(e))return;let t=document.createElement("style");return t.id=e,t.textContent=`
      .leaflet-image-smooth {
        image-rendering: auto !important;
        -ms-interpolation-mode: bicubic !important; /* IE */
        image-rendering: -webkit-optimize-contrast !important;
        will-change: transform;
      }
      .leaflet-image-smooth.smooth-filter {
        filter: blur(0.7px) contrast(0.98) saturate(1.05);
        /* slight blur to remove thin spiky lines, small contrast/saturation tweak */
      }
    `,document.head.appendChild(t),()=>{}},[c]);let b=x&&d&&4===d.length?a.jsx(h,{url:x,bounds:[[d[1],d[0]],[d[3],d[2]]],opacity:m,crossOrigin:"anonymous",className:`leaflet-image-smooth ${c?"smooth-filter":""}`,style:{imageRendering:"auto",transform:"translateZ(0)"}}):null;return(0,a.jsxs)(f,{ref:p,center:[40,-95],zoom:5,style:{height:"100%",width:"100%",borderRadius:12,overflow:"hidden",zIndex:0},children:[a.jsx(y,{attribution:"\xa9 OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),b,r&&r.length>0&&a.jsx(o.Polygon,{positions:r,pathOptions:{color:"#16a34a",weight:2}}),(u||[]).map((e,t)=>a.jsx(o.Marker,{position:e.position,children:a.jsx(o.Popup,{children:e.label})},t))]})}o=(d.then?(await d)():d)[0],delete i().Icon.Default.prototype._getIconUrl,i().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"}),n()}catch(e){n(e)}})},3601:()=>{},9637:()=>{}};
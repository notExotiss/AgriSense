exports.id=963,exports.ids=[963],exports.modules={6897:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{Z:()=>i});var l=r(997);r(6689);var a=r(4045),o=e([a]);function i({bbox:e,cells:t,selectedCell:r,onSelectCell:n,visible:o=!0}){if(!o||!e)return null;let i=function(e){if(Array.isArray(e)&&e.length)return e;let t=[];for(let e=0;e<3;e++)for(let r=0;r<3;r++)t.push({cellId:`${e}-${r}`,row:e,col:r,mean:0,min:0,max:0,validPixelRatio:0,stressLevel:"unknown"});return t}(t);return l.jsx(l.Fragment,{children:i.map(t=>{var o;let i=r===t.cellId;return l.jsx(a.Rectangle,{bounds:function(e,t,r){let n=e[0],l=e[1],a=e[2],o=e[3],i=(a-n)/3,s=(o-l)/3;return[[o-s*(t+1),n+i*r],[o-s*t,n+i*(r+1)]]}(e,t.row,t.col),pathOptions:{color:(o=t.stressLevel,i?"#22d3ee":"high"===o?"#dc2626":"moderate"===o?"#d97706":"low"===o?"#15803d":"#64748b"),weight:i?3.2:1.7,opacity:i?.95:.75,fillOpacity:i?.24:.1},eventHandlers:{click:()=>n?.(t.cellId)},children:(0,l.jsxs)(a.Tooltip,{children:["Plot Point ",function(e){let t=3*e.row+e.col+1;return`P${t}`}(t)," | mean ",t.mean.toFixed(3)," | ",t.stressLevel]})},`grid-map-${t.cellId}`)})})}a=(o.then?(await o)():o)[0],n()}catch(e){n(e)}})},9963:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{default:()=>u});var l=r(997),a=r(4045);r(9637),r(3601),r(2136);var o=r(5194),i=r.n(o),s=r(6689),c=r(6897),d=e([a,c]);function u({bbox:e,onBboxChange:t,polygon:r,onPolygonChange:n,ndviPng:o,ndviBounds:d,hotspots:u,processedOverlayUrl:g,smoothOverlay:m=!0,overlayOpacity:f=.85,grid3x3:p,selectedCell:h,onSelectCell:y,showGrid:x=!0}){let w=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=w.current;if(!e)return;let r=new(i()).FeatureGroup;e.addLayer(r);let l=new(i()).Control.Draw({draw:{polygon:!0,rectangle:!0,polyline:!1,circle:!1,marker:!1,circlemarker:!1},edit:{featureGroup:r}});return e.addControl(l),e.on(i().Draw.Event.CREATED,e=>{let l=e.layer;if(r.addLayer(l),l.getBounds){let e=l.getBounds(),r=e.getWest(),n=e.getSouth(),a=e.getEast(),o=e.getNorth();t&&t([r,n,a,o])}if(l.getLatLngs){let e=l.getLatLngs()[0]||[];n&&n(e)}}),()=>{e.removeControl(l),e.removeLayer(r)}},[w.current]),(0,s.useEffect)(()=>{let t=w.current;if(t)try{if(d&&Array.isArray(d)&&4===d.length){let e=i().latLngBounds([d[1],d[0]],[d[3],d[2]]);t.fitBounds(e,{padding:[20,20]});return}if(e&&Array.isArray(e)&&4===e.length){let r=i().latLngBounds([e[1],e[0]],[e[3],e[2]]);t.fitBounds(r,{padding:[20,20]});return}if(r&&r.length){let e=i().latLngBounds(r);t.fitBounds(e,{padding:[20,20]})}}catch{}},[JSON.stringify(d),JSON.stringify(e),JSON.stringify(r)]);let b=a.MapContainer,v=a.ImageOverlay,j=a.TileLayer,L=(0,s.useMemo)(()=>g&&g.length?g:o&&o.length?`data:image/png;base64,${o}`:null,[g,o]);(0,s.useEffect)(()=>{if(!m)return;let e="leaflet-image-smooth-css";if(document.getElementById(e))return;let t=document.createElement("style");return t.id=e,t.textContent=`
      .leaflet-image-smooth {
        image-rendering: auto !important;
        -ms-interpolation-mode: bicubic !important; /* IE */
        image-rendering: -webkit-optimize-contrast !important;
        will-change: transform;
      }
      .leaflet-image-smooth.smooth-filter {
        filter: blur(0.7px) contrast(0.98) saturate(1.05);
        /* slight blur to remove thin spiky lines, small contrast/saturation tweak */
      }
    `,document.head.appendChild(t),()=>{}},[m]);let k=d&&4===d.length?[[d[1],d[0]],[d[3],d[2]]]:null,I=L&&k?l.jsx(v,{url:L,bounds:k,opacity:f,crossOrigin:"anonymous",className:`leaflet-image-smooth ${m?"smooth-filter":""}`,style:{imageRendering:"auto",transform:"translateZ(0)"}}):null;return(0,l.jsxs)(b,{ref:w,center:[40,-95],zoom:5,style:{height:"100%",width:"100%",borderRadius:12,overflow:"hidden",zIndex:0},children:[l.jsx(j,{attribution:"\xa9 OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),I,l.jsx(c.Z,{bbox:d||e,cells:p,selectedCell:h,onSelectCell:y,visible:!!(x&&(d||e))}),r&&r.length>0&&l.jsx(a.Polygon,{positions:r,pathOptions:{color:"#16a34a",weight:2}}),(u||[]).map((e,t)=>l.jsx(a.Marker,{position:e.position,children:l.jsx(a.Popup,{children:e.label})},t))]})}[a,c]=d.then?(await d)():d,delete i().Icon.Default.prototype._getIconUrl,i().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"}),n()}catch(e){n(e)}})},3601:()=>{},9637:()=>{}};
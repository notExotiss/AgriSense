"use strict";exports.id=780,exports.ids=[780],exports.modules={116:(e,t,r)=>{r.d(t,{Z:()=>o});let o=(0,r(1373).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},9780:(e,t,r)=>{r.a(e,async(e,o)=>{try{r.r(t),r.d(t,{default:()=>w});var n=r(997),a=r(6689),i=r(6405),l=r(2949),d=r(8724),s=r(116),u=r(8098),c=e([l,d]);function h(e,t,r){return Math.max(t,Math.min(r,e))}function m(e){return e.toDataURL("image/png").replace(/^data:image\/png;base64,/,"")}function p(e,t,r){let o=window.atob(e),n=new Uint8Array(o.length);for(let e=0;e<o.length;e++)n[e]=o.charCodeAt(e);let a=t*r,i=new Float32Array(n.buffer,n.byteOffset,Math.min(a,Math.floor(n.byteLength/4))),l=new Float32Array(a);for(let e=0;e<a;e++){let t=Number(i[e]??0);l[e]=Number.isFinite(t)?t:0}return l}function f(e,t,r,o=2){if(o<=0||t<3||r<3)return e;let n=e;for(let e=0;e<o;e++){let e=new Float32Array(t*r);for(let o=0;o<r;o++)for(let a=0;a<t;a++){let i=o*t+a,l=n[o*t+Math.max(0,a-1)],d=n[o*t+Math.min(t-1,a+1)],s=n[Math.max(0,o-1)*t+a],u=n[Math.min(r-1,o+1)*t+a];e[i]=(l+d+s+u+2*n[i])/6}n=e}return n}function g(e,t,r,o,n){var a,i,l,d;let s=h(o,0,1)*(t-1),u=h(n,0,1)*(r-1),c=Math.floor(s),m=Math.floor(u),p=Math.min(t-1,c+1),f=Math.min(r-1,m+1),g=s-c,x=(a=e[m*t+c],i=e[m*t+p],a+(i-a)*g),v=(l=e[f*t+c],d=e[f*t+p],l+(d-l)*g);return x+(v-x)*(u-m)}function x(){let e=Math.min(.84*window.innerWidth,1120),t=Math.min(.78*window.innerHeight,700),r=e,o=r/1.6;return o>t&&(r=1.6*(o=t)),{left:Math.round((window.innerWidth-r)/2),top:Math.round((window.innerHeight-o)/2),width:Math.round(r),height:Math.round(o)}}async function v(e,t){let r=await new Promise((e,r)=>{let o=new Image;o.onload=()=>e(o),o.onerror=()=>r(Error("hero_texture_load_failed")),o.src=`data:image/png;base64,${t}`}),o=new l.Texture(r);o.colorSpace=l.SRGBColorSpace,o.wrapS=l.ClampToEdgeWrapping,o.wrapT=l.ClampToEdgeWrapping,o.needsUpdate=!0;let n=e.capabilities.getMaxAnisotropy();return o.anisotropy=Math.max(2,Math.min(n,16)),o}function w({introMode:e="run",onIntroComplete:t}){let r=(0,a.useRef)(null),o=(0,a.useRef)(null),c=(0,a.useRef)(null),w=(0,a.useRef)(!1),b=(0,a.useRef)(!1),M=(0,a.useRef)(!1),y=(0,a.useRef)(t),S=(0,a.useRef)(e),T="run"===S.current,[C,E]=(0,a.useState)(null),[N,P]=(0,a.useState)(null),[I,R]=(0,a.useState)(null),[j,F]=(0,a.useState)(!1),[G,D]=(0,a.useState)(null),[$,A]=(0,a.useState)(null),[V,_]=(0,a.useState)(T?"initializing":"interactive"),[k,L]=(0,a.useState)(T),U=(0,a.useRef)("initializing"),O=(0,a.useMemo)(()=>N?.legend?.stops||[],[N?.legend?.stops]);(0,a.useEffect)(()=>{y.current=t},[t]);let z=()=>{M.current||(M.current=!0,y.current?.())};return((0,a.useEffect)(()=>{if("undefined"==typeof document)return;let e=document.createElement("div");return e.setAttribute("data-hero-cinematic-root","true"),document.body.appendChild(e),E(e),()=>{e.parentNode&&e.parentNode.removeChild(e)}},[]),(0,a.useEffect)(()=>{T||(w.current=!0,U.current="interactive",_("interactive"),L(!1))},[T]),(0,a.useEffect)(()=>{let e=!0;D(null),F(!1);try{let t=function(){let e=new Float32Array(34944),t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(let o=0;o<156;o++){let n=o/155;for(let a=0;a<224;a++){let i=a/223,l=.24*Math.sin((4.8*i+1.9*n)*Math.PI)+.18*Math.cos((3.1*n-.8*i)*Math.PI)+Math.sin(9.2*i*Math.PI)*Math.cos(7.4*n*Math.PI)*.12,d=.34*Math.exp(-((i-.62)*(i-.62)*9+(n-.42)*(n-.42)*14)),s=-.22*Math.exp(-((i-.28)*(i-.28)*16+(n-.66)*(n-.66)*11)),u=h(.34+l+d+s,-.22,.76);e[224*o+a]=u,u<t&&(t=u),u>r&&(r=u)}}let o=Math.max(1e-6,r-t),n=new Float32Array(e.length);for(let r=0;r<e.length;r++)n[r]=h((e[r]-t)/o,0,1);let a=(e,t)=>{let r=h(e,0,223);return n[224*h(t,0,155)+r]},i=document.createElement("canvas");i.width=224,i.height=156;let l=i.getContext("2d");if(!l)throw Error("instant_outline_context_failed");let d=l.createImageData(224,156),s=d.data,c=document.createElement("canvas");c.width=224,c.height=156;let p=c.getContext("2d");if(!p)throw Error("instant_topo_context_failed");let f=p.createImageData(224,156),g=f.data;for(let e=0;e<156;e++)for(let t=0;t<224;t++){let r=224*e+t,o=4*r,i=n[r],l=a(t+1,e)-a(t-1,e),d=a(t,e+1)-a(t,e-1),c=h(.82-.46*l-.38*d,.34,1.14),m=Math.abs(21*i-Math.round(21*i)),p=m<.03,f=Math.round(h(145*c+34,0,255));if(p){let e=m<.012?.6:.36;s[o]=Math.round(f*(1-.4*e)),s[o+1]=Math.round(f*(1-.26*e)),s[o+2]=Math.round(f*(1-.12*e)+90*e)}else s[o]=f,s[o+1]=f,s[o+2]=f;s[o+3]=255;let[x,v,w]=(0,u.TU)("ndvi",i),b=Math.round(h(x*c,0,255)),M=Math.round(h(v*c,0,255)),y=Math.round(h(w*c,0,255));if(p){let e=m<.012?.55:.32;b=Math.round((1-e)*b+10*e),M=Math.round((1-e)*M+22*e),y=Math.round((1-e)*y+46*e)}g[o]=b,g[o+1]=M,g[o+2]=y,g[o+3]=255}return l.putImageData(d,0,0),p.putImageData(f,0,0),{outlinePng:m(i),topoPng:m(c),legend:{metric:"ndvi",min:t,max:r,unit:"NDVI",stops:u.CS.ndvi.map(e=>({value:t+(r-t)*e.stop,color:e.color}))},bbox:[-74.49,40.45,-74.33,40.59],source:"agrisense-instant-premade",generatedAt:new Date().toISOString(),metricGrid:{encoded:function(e){let t=new Uint8Array(e.buffer),r="";for(let e=0;e<t.length;e+=32768){let o=t.subarray(e,e+32768);for(let e=0;e<o.length;e++)r+=String.fromCharCode(o[e])}return window.btoa(r)}(e),width:224,height:156},imagery:{id:"instant-premade",date:null,cloudCover:null,platform:"local"}}}(),r=f(p(t.metricGrid.encoded,t.metricGrid.width,t.metricGrid.height),t.metricGrid.width,t.metricGrid.height,2);if(!e)return;P(t),R({values:r,width:t.metricGrid.width,height:t.metricGrid.height,source:t.source}),F(!0)}catch(t){if(!e)return;D(String(t?.message||"hero_map_unavailable")),F(!0),T&&(L(!1),z())}return()=>{e=!1}},[T]),(0,a.useEffect)(()=>{if(!r.current||!N||!j||b.current||k&&C&&!c.current)return;b.current=!0;let e=r.current,t=o.current,n=c.current,a=!!(n&&k&&T),i=new l.Scene,s=document.documentElement.classList.contains("dark"),u=function(e){let t=document.createElement("canvas");t.width=640,t.height=640;let r=t.getContext("2d");if(!r)return null;let o=r.createLinearGradient(0,0,0,t.height);e?(o.addColorStop(0,"#0b223f"),o.addColorStop(.58,"#071933"),o.addColorStop(1,"#041126")):(o.addColorStop(0,"#d7e9fb"),o.addColorStop(.58,"#e7f1fa"),o.addColorStop(1,"#d4e2ef")),r.fillStyle=o,r.fillRect(0,0,t.width,t.height);let n=r.createRadialGradient(.22*t.width,.12*t.height,20,.22*t.width,.12*t.height,.82*t.width);e?(n.addColorStop(0,"rgba(56,189,248,0.20)"),n.addColorStop(1,"rgba(56,189,248,0)")):(n.addColorStop(0,"rgba(59,130,246,0.16)"),n.addColorStop(1,"rgba(59,130,246,0)")),r.fillStyle=n,r.fillRect(0,0,t.width,t.height);let a=new l.CanvasTexture(t);return a.colorSpace=l.SRGBColorSpace,a.wrapS=l.ClampToEdgeWrapping,a.wrapT=l.ClampToEdgeWrapping,a}(s);u&&(i.background=u);let m=e.clientWidth||900,M=e.clientHeight||520,y=new l.PerspectiveCamera(36,m/M,.1,2200);y.position.set(-18,92,168);let S=new l.WebGLRenderer({antialias:!0,alpha:!0});S.setPixelRatio(Math.min(2,window.devicePixelRatio||1)),S.outputColorSpace=l.SRGBColorSpace,S.toneMapping=l.ACESFilmicToneMapping,S.toneMappingExposure=1,S.setClearColor(0,0),S.domElement.style.display="block",S.domElement.style.width="100%",S.domElement.style.height="100%";let E=(e,t)=>{let r=Math.max(1,Math.floor(e)),o=Math.max(1,Math.floor(t));S.setSize(r,o,!1),y.aspect=r/o,y.updateProjectionMatrix()};if(a&&n){n.innerHTML="";let e=x();n.style.left=`${e.left}px`,n.style.top=`${e.top}px`,n.style.width=`${Math.round(e.width)}px`,n.style.height=`${Math.round(e.height)}px`,n.style.borderRadius="28px",n.style.opacity="1",n.style.boxShadow="0 24px 78px rgba(2,8,23,0.22)",n.appendChild(S.domElement),E(e.width,e.height)}else e.innerHTML="",e.appendChild(S.domElement),E(m,M);i.add(new l.AmbientLight(16777215,.86));let P=new l.DirectionalLight(16777215,1.08);P.position.set(95,120,58),i.add(P);let R=new l.DirectionalLight(15725558,.55);R.position.set(-95,90,-80),i.add(R);let F=f(p(N.metricGrid.encoded,N.metricGrid.width,N.metricGrid.height),N.metricGrid.width,N.metricGrid.height,2),G=I?f(I.values,I.width,I.height,2):F,$=I?I.width:N.metricGrid.width,V=I?I.height:N.metricGrid.height,O=Math.max(1e-6,Math.abs(N.bbox[2]-N.bbox[0])),H=Math.max(1e-6,Math.abs(N.bbox[3]-N.bbox[1])),W=h(H/O,.62,1.65),Y=h(Math.round(220*W),130,300),B=function(e,t,r,o,n){let a=new Float32Array(o*n);for(let i=0;i<n;i++){let l=i/Math.max(1,n-1);for(let n=0;n<o;n++){let d=n/Math.max(1,o-1);a[i*o+n]=g(e,t,r,d,l)}}return a}(G,$,V,220,Y),Z=function(e){let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(let o=0;o<e.length;o++){let n=Number(e[o]);Number.isFinite(n)&&(n<t&&(t=n),n>r&&(r=n))}return Number.isFinite(t)&&Number.isFinite(r)&&!(r-t<1e-6)?{min:t,max:r}:{min:0,max:1}}(B),q=Math.max(1e-6,Z.max-Z.min),X=new Float32Array(B.length),J=I?84:68;for(let e=0;e<B.length;e++){let t=h((B[e]-Z.min)/q,0,1),r=Math.pow(t,1.08),o=Math.round(r*J)/J;X[e]=r+(o-r)*.74}let K=162*W,Q=new l.PlaneGeometry(162,K,219,Y-1),ee=Q.attributes.position,et=I?68:44;for(let e=0;e<X.length;e++)ee.setZ(e,X[e]*et);ee.needsUpdate=!0,Q.computeVertexNormals();let er=(e,t)=>{var r,o,n,a;let i=219*h(e,0,1),l=h(t,0,1)*(Y-1),d=Math.floor(i),s=Math.floor(l),u=Math.min(219,d+1),c=Math.min(Y-1,s+1),m=i-d,p=(r=X[220*s+d],o=X[220*s+u],r+(o-r)*m),f=(n=X[220*c+d],a=X[220*c+u],n+(a-n)*m);return(p+(f-p)*(l-s))*et},eo=new d.OrbitControls(y,S.domElement);eo.enabled=!1,eo.enableDamping=!0,eo.dampingFactor=.08,eo.maxPolarAngle=Math.PI/2.06,eo.minDistance=56,eo.maxDistance=260,eo.target.set(0,16,0);let en={introPos:new l.Vector3(-18,92,168),finalPos:new l.Vector3(7,114,196),introTarget:new l.Vector3(0,12,0),finalTarget:new l.Vector3(0,8,0),introScale:1.36,finalScale:1,introOffsetY:.55,finalOffsetY:-.8},ea=null,ei=null,el=!0,ed=0,es=null,eu=null,ec=null,eh=null,em=null,ep=[],ef=null,eg=new l.Group;eg.rotation.x=-.055,i.add(eg);let ex=!n,ev=!1,ew=new l.Raycaster,eb=new l.Vector2(0,0),eM=null,ey=e=>{if(!eM)return;let t=S.domElement.getBoundingClientRect();eb.x=(e.clientX-t.left)/t.width*2-1,eb.y=-((e.clientY-t.top)/t.height*2)+1,ew.setFromCamera(eb,y);let r=ew.intersectObject(eM,!1)[0];if(!r||!r.uv){A(null);return}let o=g(F,N.metricGrid.width,N.metricGrid.height,r.uv.x,1-r.uv.y);A({ndvi:o,x:e.clientX-t.left,y:e.clientY-t.top})},eS=()=>A(null);S.domElement.addEventListener("pointermove",ey),S.domElement.addEventListener("pointerleave",eS),(async()=>{try{if(ea=await v(S,N.outlinePng),ei=await v(S,N.topoPng),!el)return;em=new l.MeshStandardMaterial({map:ea,color:new l.Color(15922679),metalness:.02,roughness:.84,side:l.DoubleSide}),(eM=new l.Mesh(Q,em)).rotation.x=-Math.PI/2,eg.add(eM),eu=new l.ShaderMaterial({uniforms:{uTopoTex:{value:ei},uReveal:{value:.001}},vertexShader:`
            varying vec2 vUv;
            void main() {
              vUv = uv;
              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
          `,fragmentShader:`
            uniform sampler2D uTopoTex;
            uniform float uReveal;
            varying vec2 vUv;
            void main() {
              if (vUv.x > uReveal + 0.018) discard;
              float edge = smoothstep(uReveal + 0.02, uReveal - 0.02, vUv.x);
              vec4 topo = texture2D(uTopoTex, vUv);
              gl_FragColor = vec4(topo.rgb, edge);
            }
          `,transparent:!0,depthWrite:!1});let r=new l.Mesh(Q,eu);r.rotation.x=-Math.PI/2,r.position.y=.16,eg.add(r),ec=new l.ShaderMaterial({uniforms:{uMaxHeight:{value:et},uDensity:{value:58},uThickness:{value:.048},uOpacity:{value:.72}},vertexShader:`
            varying float vHeight;
            uniform float uMaxHeight;
            void main() {
              vHeight = max(0.0, position.z / max(uMaxHeight, 0.001));
              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
          `,fragmentShader:`
            varying float vHeight;
            uniform float uDensity;
            uniform float uThickness;
            uniform float uOpacity;
            void main() {
              float f = fract(vHeight * uDensity);
              float d = min(f, 1.0 - f);
              float aa = fwidth(vHeight * uDensity) * 0.9;
              float line = 1.0 - smoothstep(uThickness, uThickness + aa, d);
              gl_FragColor = vec4(vec3(0.16, 0.18, 0.21), line * uOpacity);
            }
          `,transparent:!0,depthWrite:!1});let o=new l.Mesh(Q,ec);o.rotation.x=-Math.PI/2,o.position.y=.22,eg.add(o);let d=new l.WireframeGeometry(Q);es=new l.LineBasicMaterial({color:1712168,transparent:!0,opacity:.12});let s=new l.LineSegments(d,es);for(let e of(s.rotation.x=-Math.PI/2,s.position.y=.1,eg.add(s),eh=new l.ShaderMaterial({uniforms:{uOutlineTex:{value:ea},uTopoTex:{value:ei},uReveal:{value:.001},uShade:{value:.88}},vertexShader:`
            varying vec2 vUv;
            void main() {
              vUv = uv;
              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
          `,fragmentShader:`
            uniform sampler2D uOutlineTex;
            uniform sampler2D uTopoTex;
            uniform float uReveal;
            uniform float uShade;
            varying vec2 vUv;
            void main() {
              float blend = smoothstep(uReveal - 0.02, uReveal + 0.02, vUv.x);
              vec3 outlineCol = texture2D(uOutlineTex, vUv).rgb;
              vec3 topoCol = texture2D(uTopoTex, vUv).rgb;
              vec3 color = mix(outlineCol, topoCol, blend) * uShade;
              gl_FragColor = vec4(color, 1.0);
            }
          `,side:l.DoubleSide}),["north","south","west","east"])){let t="north"===e||"south"===e?219:Y-1,r=function(e,t,r,o,n,a){let i=[],d=[],s=[];for(let a=0;a<=t;a++){let l=a/Math.max(1,t),s=l,u=l;"north"===e?(s=l,u=0):"south"===e?(s=l,u=1):(s="west"===e?0:1,u=l);let c=-o/2+s*o,h=-n/2+u*n,m=r(s,u),p=c,f=h;"north"===e&&(f-=2.8),"south"===e&&(f+=2.8),"west"===e&&(p-=2.8),"east"===e&&(p+=2.8),i.push(c,m,h),i.push(p,-1.8,f),d.push(s,u),d.push(s,u)}for(let e=0;e<t;e++){let t=2*e;s.push(t,t+1,t+2),s.push(t+1,t+3,t+2)}let u=new l.BufferGeometry;return u.setAttribute("position",new l.Float32BufferAttribute(i,3)),u.setAttribute("uv",new l.Float32BufferAttribute(d,2)),u.setIndex(s),u.computeVertexNormals(),u}(e,t,er,162,K,0),o=new l.Mesh(r,eh);eg.add(o),ep.push(o)}let u=new l.PlaneGeometry(162,K);(ef=new l.Mesh(u,eh)).rotation.x=-Math.PI/2,ef.position.y=-1.8,eg.add(ef);let c=new l.Box3().setFromObject(eg),m=c.getCenter(new l.Vector3),p=c.getSize(new l.Vector3),f=Math.max(24,.55*Math.max(p.x,p.y,p.z));en.introTarget.copy(m).add(new l.Vector3(0,.08*p.y,0)),en.finalTarget.copy(m).add(new l.Vector3(0,.05*p.y,0)),en.introPos.copy(en.introTarget).add(new l.Vector3(-(.34*f),1.04*f,1.52*f)),en.finalPos.copy(en.finalTarget).add(new l.Vector3(.18*f,1.14*f,1.7*f)),en.introScale=1.24,en.finalScale=1,en.introOffsetY=.22,en.finalOffsetY=0,eo.minDistance=Math.max(42,.82*f),eo.maxDistance=Math.max(220,3.9*f),eo.target.copy(en.introTarget),y.position.copy(en.introPos);let g=performance.now(),b=e=>{U.current!==e&&(U.current=e,_(e))},M=r=>{var o,l,d,s,u,c,m,p,f,v,T,C,N,P,I,R,j,F,G,D,$,A,V,_;if(!el)return;let k=r-g,O=1,H=1;a?(O=.001,H=0,k<=400?b("initializing"):k<=2100?(b("revealing"),O=h((k-400)/1700,0,1)):k<=3400?(b("docking"),O=1,H=h((k-400-1700)/1300,0,1)):(b("interactive"),O=1,H=1,eo.enabled=!0)):(b("interactive"),O=1,H=1,eo.enabled=!0),eu&&(eu.uniforms.uReveal.value=O),eh&&(eh.uniforms.uReveal.value=O);let W=1-Math.pow(1-H,3);if(y.position.set((o=en.introPos.x,l=en.finalPos.x,o+(l-o)*W),(d=en.introPos.y,s=en.finalPos.y,d+(s-d)*W),(u=en.introPos.z,c=en.finalPos.z,u+(c-u)*W)),eo.target.set((m=en.introTarget.x,p=en.finalTarget.x,m+(p-m)*W),(f=en.introTarget.y,v=en.finalTarget.y,f+(v-f)*W),(T=en.introTarget.z,C=en.finalTarget.z,T+(C-T)*W)),eg.scale.setScalar((N=en.introScale,P=en.finalScale,N+(P-N)*W)),eg.position.y=(I=en.introOffsetY,R=en.finalOffsetY,I+(R-I)*W),eg.rotation.y=r*(8e-5+-.000035000000000000004*W)+(.22+-.22*W),n&&a&&!ex){let t=e.getBoundingClientRect(),r=x(),o=(j=r.left,F=t.left,j+(F-j)*W),a=(G=r.top,D=t.top,G+(D-G)*W),i=($=r.width,A=t.width,$+(A-$)*W),l=(V=r.height,_=t.height,V+(_-V)*W);n.style.left=`${o}px`,n.style.top=`${a}px`,n.style.width=`${i}px`,n.style.height=`${l}px`,n.style.borderRadius=`${Math.round(28+-8*W)}px`,n.style.boxShadow=`0 ${Math.round(24+-6*W)}px ${Math.round(78+-22*W)}px rgba(2,8,23,${(.22+-.04000000000000001*W).toFixed(3)})`,E(i,l)}"interactive"===U.current&&n&&a&&!ex&&(ex=!0,e.innerHTML="",e.appendChild(S.domElement),E(e.clientWidth||900,e.clientHeight||520),ev||(ev=!0,L(!1),t&&(t.style.opacity="0"),w.current||(w.current=!0),z())),eo.update(),S.render(i,y),ed=requestAnimationFrame(M)};ed=requestAnimationFrame(M)}catch(e){if(!el)return;D(String(e?.message||"hero_render_failed"))}})();let eT=()=>{if(n&&a&&!ex){let e=x();n.style.left=`${e.left}px`,n.style.top=`${e.top}px`,n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,E(e.width,e.height)}else E(e.clientWidth||900,e.clientHeight||520)};return window.addEventListener("resize",eT),()=>{el=!1,cancelAnimationFrame(ed),window.removeEventListener("resize",eT),S.domElement.removeEventListener("pointermove",ey),S.domElement.removeEventListener("pointerleave",eS),eo.dispose(),Q.dispose(),em?.dispose(),eu?.dispose(),ec?.dispose(),es?.dispose(),ea?.dispose(),ei?.dispose(),ep.forEach(e=>{e.geometry.dispose()}),ef&&ef.geometry.dispose(),eh?.dispose(),u?.dispose(),S.dispose(),S.domElement.parentNode===e&&e.removeChild(S.domElement),n&&S.domElement.parentNode===n&&n.removeChild(S.domElement),b.current=!1}},[N,I,j,C,T]),G)?n.jsx("div",{className:"flex h-[26rem] items-center justify-center rounded-2xl border border-amber-300 bg-amber-50/70 px-4 text-center dark:border-amber-700 dark:bg-amber-950/30",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("p",{className:"inline-flex items-center gap-2 text-sm font-medium text-amber-900 dark:text-amber-100",children:[n.jsx(s.Z,{className:"h-4 w-4"}),"Hero map currently unavailable"]}),n.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:G||"Please retry in a moment."})]})}):(0,n.jsxs)("div",{className:"relative",children:[k&&C&&(0,i.createPortal)(n.jsx("div",{ref:o,className:"pointer-events-none fixed inset-0 z-[80] bg-[hsl(var(--background))] transition-opacity duration-300"}),C),k&&C&&(0,i.createPortal)(n.jsx("div",{ref:c,className:"pointer-events-none fixed z-[81] overflow-hidden rounded-[28px] border border-border bg-[hsl(var(--background))]"}),C),n.jsx("div",{ref:r,className:`h-[28rem] w-full overflow-hidden rounded-2xl border border-cyan-700/20 bg-[hsl(var(--background))] transition-opacity duration-500 ${k?"opacity-0":"opacity-100"}`}),!k&&N&&(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:"absolute left-3 top-3 rounded-full border border-cyan-400/30 bg-[#081226]/80 px-3 py-1 text-[11px] uppercase tracking-[0.12em] text-cyan-100",children:"interactive"===V?"Interactive":V}),(0,n.jsxs)("div",{className:"absolute right-3 top-3 rounded-full border border-cyan-400/30 bg-[#081226]/80 px-3 py-1 text-[11px] text-cyan-100",children:[N.legend.metric.toUpperCase()," | ",I?.source||N.source]})]}),$&&!k&&(0,n.jsxs)("div",{className:"pointer-events-none absolute z-20 rounded-md border border-cyan-400/50 bg-[#081226]/90 px-2 py-1 text-[11px] text-cyan-100",style:{left:Math.min($.x+14,(r.current?.clientWidth||0)-120),top:Math.max(8,$.y-26)},children:["NDVI ",$.ndvi.toFixed(3)]}),N&&(0,n.jsxs)("div",{className:"mt-3 rounded-xl border border-border bg-card/70 p-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.12em] text-muted-foreground",children:[n.jsx("span",{children:"NDVI Legend"}),n.jsx("span",{children:N.legend.unit})]}),n.jsx("div",{className:"mt-2 h-3 w-full overflow-hidden rounded-sm border border-black/15",children:n.jsx("div",{className:"h-full w-full",style:{background:`linear-gradient(90deg, ${O.map(e=>`rgb(${e.color[0]}, ${e.color[1]}, ${e.color[2]})`).join(", ")})`}})}),(0,n.jsxs)("div",{className:"mt-1 flex items-center justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:N.legend.min.toFixed(3)}),n.jsx("span",{children:N.legend.max.toFixed(3)})]})]})]})}[l,d]=c.then?(await c)():c,o()}catch(e){o(e)}})},8098:(e,t,r)=>{r.d(t,{CS:()=>o,G5:()=>l,TU:()=>i,t7:()=>a,uZ:()=>n});let o={ndvi:[{stop:0,color:[53,74,193]},{stop:.15,color:[69,138,223]},{stop:.32,color:[71,192,220]},{stop:.48,color:[95,205,116]},{stop:.64,color:[220,211,88]},{stop:.8,color:[239,163,68]},{stop:1,color:[214,83,90]}],soil:[{stop:0,color:[65,83,191]},{stop:.2,color:[80,145,220]},{stop:.4,color:[86,196,181]},{stop:.58,color:[122,203,117]},{stop:.76,color:[231,195,86]},{stop:1,color:[191,96,60]}],et:[{stop:0,color:[55,70,189]},{stop:.2,color:[64,124,221]},{stop:.4,color:[78,196,215]},{stop:.6,color:[108,205,112]},{stop:.78,color:[239,190,82]},{stop:1,color:[209,84,72]}]};function n(e,t,r){return Math.max(t,Math.min(r,e))}function a(e,t,r){return e+(t-e)*r}function i(e,t){let r=o[e],a=n(t,0,1);for(let e=0;e<r.length-1;e++){let t=r[e],o=r[e+1];if(a<=o.stop){var i,l,d;let e=(a-t.stop)/Math.max(1e-6,o.stop-t.stop);return[Math.round((i=t.color[0])+(o.color[0]-i)*e),Math.round((l=t.color[1])+(o.color[1]-l)*e),Math.round((d=t.color[2])+(o.color[2]-d)*e)]}}return r[r.length-1].color}function l(e){return`linear-gradient(90deg, ${o[e].map(e=>`rgb(${e.color[0]}, ${e.color[1]}, ${e.color[2]}) ${Math.round(100*e.stop)}%`).join(", ")})`}}};
"use strict";exports.id=780,exports.ids=[780],exports.modules={116:(e,t,r)=>{r.d(t,{Z:()=>o});let o=(0,r(1373).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},9780:(e,t,r)=>{r.a(e,async(e,o)=>{try{r.r(t),r.d(t,{default:()=>b});var n=r(997),a=r(6689),i=r(6405),l=r(2949),d=r(8724),s=r(116),u=r(8098),c=e([l,d]);function h(e,t,r){return Math.max(t,Math.min(r,e))}function p(e){return e.toDataURL("image/png").replace(/^data:image\/png;base64,/,"")}function m(e,t){var r;return(r=43758.5453123*Math.sin(127.1*e+311.7*t))-Math.floor(r)}function f(e,t,r){var o;let n=e*r,a=t*r,i=Math.floor(n),l=Math.floor(a),d=i+1,s=l+1,u=n-i,c=a-l,h=u*u*(3-2*u),p=m(i,l),f=m(d,l),g=m(i,s),x=m(d,s);return(o=p+(f-p)*h)+c*c*(3-2*c)*(g+(x-g)*h-o)}function g(e,t,r){let o=window.atob(e),n=new Uint8Array(o.length);for(let e=0;e<o.length;e++)n[e]=o.charCodeAt(e);let a=t*r,i=new Float32Array(n.buffer,n.byteOffset,Math.min(a,Math.floor(n.byteLength/4))),l=new Float32Array(a);for(let e=0;e<a;e++){let t=Number(i[e]??0);l[e]=Number.isFinite(t)?t:0}return l}function x(e,t,r,o=2){if(o<=0||t<3||r<3)return e;let n=e;for(let e=0;e<o;e++){let e=new Float32Array(t*r);for(let o=0;o<r;o++)for(let a=0;a<t;a++){let i=o*t+a,l=n[o*t+Math.max(0,a-1)],d=n[o*t+Math.min(t-1,a+1)],s=n[Math.max(0,o-1)*t+a],u=n[Math.min(r-1,o+1)*t+a];e[i]=(l+d+s+u+2*n[i])/6}n=e}return n}function v(e,t,r,o,n){var a,i,l,d;let s=h(o,0,1)*(t-1),u=h(n,0,1)*(r-1),c=Math.floor(s),p=Math.floor(u),m=Math.min(t-1,c+1),f=Math.min(r-1,p+1),g=s-c,x=(a=e[p*t+c],i=e[p*t+m],a+(i-a)*g),v=(l=e[f*t+c],d=e[f*t+m],l+(d-l)*g);return x+(v-x)*(u-p)}function w(){let e=Math.min(.84*window.innerWidth,1120),t=Math.min(.78*window.innerHeight,700),r=e,o=r/1.6;return o>t&&(r=1.6*(o=t)),{left:Math.round((window.innerWidth-r)/2),top:Math.round((window.innerHeight-o)/2),width:Math.round(r),height:Math.round(o)}}async function M(e,t){let r=await new Promise((e,r)=>{let o=new Image;o.onload=()=>e(o),o.onerror=()=>r(Error("hero_texture_load_failed")),o.src=`data:image/png;base64,${t}`}),o=new l.Texture(r);o.colorSpace=l.SRGBColorSpace,o.wrapS=l.ClampToEdgeWrapping,o.wrapT=l.ClampToEdgeWrapping,o.needsUpdate=!0;let n=e.capabilities.getMaxAnisotropy();return o.anisotropy=Math.max(2,Math.min(n,16)),o}function b({introMode:e="run",onIntroComplete:t}){let r=(0,a.useRef)(null),o=(0,a.useRef)(null),c=(0,a.useRef)(null),m=(0,a.useRef)(!1),b=(0,a.useRef)(!1),y=(0,a.useRef)(!1),S=(0,a.useRef)(t),C=(0,a.useRef)(e),T="run"===C.current,[E,N]=(0,a.useState)(null),[P,I]=(0,a.useState)(null),[R,j]=(0,a.useState)(null),[F,G]=(0,a.useState)(!1),[D,$]=(0,a.useState)(null),[A,L]=(0,a.useState)(null),[V,_]=(0,a.useState)(T?"initializing":"interactive"),[k,U]=(0,a.useState)(T),O=(0,a.useRef)("initializing"),z=(0,a.useMemo)(()=>P?.legend?.stops||[],[P?.legend?.stops]);(0,a.useEffect)(()=>{S.current=t},[t]);let H=()=>{y.current||(y.current=!0,S.current?.())};return((0,a.useEffect)(()=>{if("undefined"==typeof document)return;let e=document.createElement("div");return e.setAttribute("data-hero-cinematic-root","true"),document.body.appendChild(e),N(e),()=>{e.parentNode&&e.parentNode.removeChild(e)}},[]),(0,a.useEffect)(()=>{T||(m.current=!0,O.current="interactive",_("interactive"),U(!1))},[T]),(0,a.useEffect)(()=>{let e=!0;$(null),G(!1);try{let t=function(){let e=new Float32Array(34944);for(let t=0;t<156;t++){let r=t/155;for(let o=0;o<224;o++){let n=o/223,a=2*n-1,i=2*r-1,l=f(n,r,2.1),d=f(n+.07,r-.03,4.4),s=f(n-.04,r+.05,8.8),u=.16*Math.abs(Math.sin((2.2*n-1.45*r)*Math.PI)),c=.12*Math.exp(-(a*a*.78+i*i*1.22)),p=.19*Math.exp(-((n-.34)*(n-.34)*18+(r-.28)*(r-.28)*14)),m=.17*Math.exp(-((n-.74)*(n-.74)*16+(r-.52)*(r-.52)*10)),g=.22*Math.exp(-Math.pow((n-.54)*.95+(r-.44)*1.55,2)/.013),x=.54*l+.28*d+.18*s+u+c+p+m-g;e[224*t+o]=h(x-.24,-.24,.78)}}let t=x(e,224,156,3),r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++){let n=t[e];n<r&&(r=n),n>o&&(o=n)}let n=Math.max(1e-6,o-r),a=new Float32Array(t.length);for(let e=0;e<t.length;e++)a[e]=h((t[e]-r)/n,0,1);let i=(e,t)=>{let r=h(e,0,223);return a[224*h(t,0,155)+r]},l=document.createElement("canvas");l.width=224,l.height=156;let d=l.getContext("2d");if(!d)throw Error("instant_outline_context_failed");let s=d.createImageData(224,156),c=s.data,m=document.createElement("canvas");m.width=224,m.height=156;let g=m.getContext("2d");if(!g)throw Error("instant_topo_context_failed");let v=g.createImageData(224,156),w=v.data;for(let e=0;e<156;e++)for(let t=0;t<224;t++){let r=224*e+t,o=4*r,n=a[r],l=i(t+1,e)-i(t-1,e),d=i(t,e+1)-i(t,e-1),s=h(.82-.46*l-.38*d,.34,1.14),p=Math.abs(18*n-Math.round(18*n)),m=p<.022,f=Math.round(h(145*s+34,0,255));if(m){let e=p<.009?.34:.18;c[o]=Math.round(f*(1-.4*e)),c[o+1]=Math.round(f*(1-.26*e)),c[o+2]=Math.round(f*(1-.12*e)+90*e)}else c[o]=f,c[o+1]=f,c[o+2]=f;c[o+3]=255;let[g,x,v]=(0,u.TU)("ndvi",n),M=Math.round(h(g*s,0,255)),b=Math.round(h(x*s,0,255)),y=Math.round(h(v*s,0,255));if(m){let e=p<.009?.26:.14;M=Math.round((1-e)*M+10*e),b=Math.round((1-e)*b+22*e),y=Math.round((1-e)*y+46*e)}w[o]=M,w[o+1]=b,w[o+2]=y,w[o+3]=255}return d.putImageData(s,0,0),g.putImageData(v,0,0),{outlinePng:p(l),topoPng:p(m),legend:{metric:"ndvi",min:r,max:o,unit:"NDVI",stops:u.CS.ndvi.map(e=>({value:r+(o-r)*e.stop,color:e.color}))},bbox:[-74.49,40.45,-74.33,40.59],source:"agrisense-instant-premade",generatedAt:new Date().toISOString(),metricGrid:{encoded:function(e){let t=new Uint8Array(e.buffer),r="";for(let e=0;e<t.length;e+=32768){let o=t.subarray(e,e+32768);for(let e=0;e<o.length;e++)r+=String.fromCharCode(o[e])}return window.btoa(r)}(t),width:224,height:156},imagery:{id:"instant-premade",date:null,cloudCover:null,platform:"local"}}}(),r=x(g(t.metricGrid.encoded,t.metricGrid.width,t.metricGrid.height),t.metricGrid.width,t.metricGrid.height,2);if(!e)return;I(t),j({values:r,width:t.metricGrid.width,height:t.metricGrid.height,source:t.source}),G(!0)}catch(t){if(!e)return;$(String(t?.message||"hero_map_unavailable")),G(!0),T&&(U(!1),H())}return()=>{e=!1}},[T]),(0,a.useEffect)(()=>{if(!r.current||!P||!F||b.current||k&&E&&!c.current)return;b.current=!0;let e=r.current,t=o.current,n=c.current,a=!!(n&&k&&T),i=new l.Scene,s=document.documentElement.classList.contains("dark"),u=function(e){let t=document.createElement("canvas");t.width=640,t.height=640;let r=t.getContext("2d");if(!r)return null;let o=r.createLinearGradient(0,0,0,t.height);e?(o.addColorStop(0,"#0b223f"),o.addColorStop(.58,"#071933"),o.addColorStop(1,"#041126")):(o.addColorStop(0,"#d7e9fb"),o.addColorStop(.58,"#e7f1fa"),o.addColorStop(1,"#d4e2ef")),r.fillStyle=o,r.fillRect(0,0,t.width,t.height);let n=r.createRadialGradient(.22*t.width,.12*t.height,20,.22*t.width,.12*t.height,.82*t.width);e?(n.addColorStop(0,"rgba(56,189,248,0.20)"),n.addColorStop(1,"rgba(56,189,248,0)")):(n.addColorStop(0,"rgba(59,130,246,0.16)"),n.addColorStop(1,"rgba(59,130,246,0)")),r.fillStyle=n,r.fillRect(0,0,t.width,t.height);let a=new l.CanvasTexture(t);return a.colorSpace=l.SRGBColorSpace,a.wrapS=l.ClampToEdgeWrapping,a.wrapT=l.ClampToEdgeWrapping,a}(s);u&&(i.background=u);let p=e.clientWidth||900,f=e.clientHeight||520,y=new l.PerspectiveCamera(36,p/f,.1,2200);y.position.set(-18,92,168);let S=new l.WebGLRenderer({antialias:!0,alpha:!0});S.setPixelRatio(Math.min(2,window.devicePixelRatio||1)),S.outputColorSpace=l.SRGBColorSpace,S.toneMapping=l.ACESFilmicToneMapping,S.toneMappingExposure=1,S.setClearColor(0,0),S.domElement.style.display="block",S.domElement.style.width="100%",S.domElement.style.height="100%";let C=(e,t)=>{let r=Math.max(1,Math.floor(e)),o=Math.max(1,Math.floor(t));S.setSize(r,o,!1),y.aspect=r/o,y.updateProjectionMatrix()};if(a&&n){n.innerHTML="";let e=w();n.style.left=`${e.left}px`,n.style.top=`${e.top}px`,n.style.width=`${Math.round(e.width)}px`,n.style.height=`${Math.round(e.height)}px`,n.style.borderRadius="28px",n.style.opacity="1",n.style.boxShadow="0 24px 78px rgba(2,8,23,0.22)",n.appendChild(S.domElement),C(e.width,e.height)}else e.innerHTML="",e.appendChild(S.domElement),C(p,f);i.add(new l.AmbientLight(16777215,.86));let N=new l.DirectionalLight(16777215,1.08);N.position.set(95,120,58),i.add(N);let I=new l.DirectionalLight(15725558,.55);I.position.set(-95,90,-80),i.add(I);let j=x(g(P.metricGrid.encoded,P.metricGrid.width,P.metricGrid.height),P.metricGrid.width,P.metricGrid.height,2),G=!!(R&&/instant-premade/i.test(R.source)),D=R?x(R.values,R.width,R.height,G?4:2):j,A=R?R.width:P.metricGrid.width,V=R?R.height:P.metricGrid.height,z=Math.max(1e-6,Math.abs(P.bbox[2]-P.bbox[0])),W=Math.max(1e-6,Math.abs(P.bbox[3]-P.bbox[1])),Y=h(W/z,.62,1.65),B=h(Math.round(220*Y),130,300),Z=function(e,t,r,o,n){let a=new Float32Array(o*n);for(let i=0;i<n;i++){let l=i/Math.max(1,n-1);for(let n=0;n<o;n++){let d=n/Math.max(1,o-1);a[i*o+n]=v(e,t,r,d,l)}}return a}(D,A,V,220,B),q=function(e){let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(let o=0;o<e.length;o++){let n=Number(e[o]);Number.isFinite(n)&&(n<t&&(t=n),n>r&&(r=n))}return Number.isFinite(t)&&Number.isFinite(r)&&!(r-t<1e-6)?{min:t,max:r}:{min:0,max:1}}(Z),X=Math.max(1e-6,q.max-q.min),J=new Float32Array(Z.length),K=G?128:R?84:68,Q=G?.9:.74;for(let e=0;e<Z.length;e++){let t=h((Z[e]-q.min)/X,0,1),r=Math.pow(t,G?1.22:1.08),o=Math.round(r*K)/K;J[e]=r+(o-r)*Q}let ee=162*Y,et=new l.PlaneGeometry(162,ee,219,B-1),er=et.attributes.position,eo=G?30:R?56:42,en=G?-2.25:-1.8;for(let e=0;e<J.length;e++)er.setZ(e,J[e]*eo);er.needsUpdate=!0,et.computeVertexNormals();let ea=(e,t)=>{var r,o,n,a;let i=219*h(e,0,1),l=h(t,0,1)*(B-1),d=Math.floor(i),s=Math.floor(l),u=Math.min(219,d+1),c=Math.min(B-1,s+1),p=i-d,m=(r=J[220*s+d],o=J[220*s+u],r+(o-r)*p),f=(n=J[220*c+d],a=J[220*c+u],n+(a-n)*p);return(m+(f-m)*(l-s))*eo},ei=new d.OrbitControls(y,S.domElement);ei.enabled=!1,ei.enableDamping=!0,ei.dampingFactor=.08,ei.maxPolarAngle=Math.PI/2.06,ei.minDistance=56,ei.maxDistance=260,ei.target.set(0,16,0);let el={introPos:new l.Vector3(-18,92,168),finalPos:new l.Vector3(7,114,196),introTarget:new l.Vector3(0,12,0),finalTarget:new l.Vector3(0,8,0),introScale:1.36,finalScale:1,introOffsetY:.55,finalOffsetY:-.8},ed=null,es=null,eu=!0,ec=0,eh=null,ep=null,em=null,ef=null,eg=null,ex=[],ev=null,ew=new l.Group;ew.rotation.x=-.055,i.add(ew);let eM=!n,eb=!1,ey=new l.Raycaster,eS=new l.Vector2(0,0),eC=null,eT=e=>{if(!eC)return;let t=S.domElement.getBoundingClientRect();eS.x=(e.clientX-t.left)/t.width*2-1,eS.y=-((e.clientY-t.top)/t.height*2)+1,ey.setFromCamera(eS,y);let r=ey.intersectObject(eC,!1)[0];if(!r||!r.uv){L(null);return}let o=v(j,P.metricGrid.width,P.metricGrid.height,r.uv.x,1-r.uv.y);L({ndvi:o,x:e.clientX-t.left,y:e.clientY-t.top})},eE=()=>L(null);S.domElement.addEventListener("pointermove",eT),S.domElement.addEventListener("pointerleave",eE),(async()=>{try{if(ed=await M(S,P.outlinePng),es=await M(S,P.topoPng),!eu)return;eg=new l.MeshStandardMaterial({map:ed,color:new l.Color(G?15528170:15922679),metalness:.02,roughness:G?.9:.84,side:l.DoubleSide}),(eC=new l.Mesh(et,eg)).rotation.x=-Math.PI/2,ew.add(eC),ep=new l.ShaderMaterial({uniforms:{uTopoTex:{value:es},uReveal:{value:.001}},vertexShader:`
            varying vec2 vUv;
            void main() {
              vUv = uv;
              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
          `,fragmentShader:`
            uniform sampler2D uTopoTex;
            uniform float uReveal;
            varying vec2 vUv;
            void main() {
              if (vUv.x > uReveal + 0.018) discard;
              float edge = smoothstep(uReveal + 0.02, uReveal - 0.02, vUv.x);
              vec4 topo = texture2D(uTopoTex, vUv);
              gl_FragColor = vec4(topo.rgb, edge);
            }
          `,transparent:!0,depthWrite:!1});let r=new l.Mesh(et,ep);r.rotation.x=-Math.PI/2,r.position.y=.16,ew.add(r),em=new l.ShaderMaterial({uniforms:{uMaxHeight:{value:eo},uDensity:{value:G?56:42},uThickness:{value:G?.058:.044},uOpacity:{value:G?.56:.46},uLineColor:{value:new l.Color(G?1978945:3557723)}},vertexShader:`
            varying float vHeight;
            uniform float uMaxHeight;
            void main() {
              vHeight = max(0.0, position.z / max(uMaxHeight, 0.001));
              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
          `,fragmentShader:`
            varying float vHeight;
            uniform float uDensity;
            uniform float uThickness;
            uniform float uOpacity;
            uniform vec3 uLineColor;
            void main() {
              float f = fract(vHeight * uDensity);
              float d = min(f, 1.0 - f);
              float aa = fwidth(vHeight * uDensity) * 0.9;
              float line = 1.0 - smoothstep(uThickness, uThickness + aa, d);
              gl_FragColor = vec4(uLineColor, line * uOpacity);
            }
          `,transparent:!0,depthWrite:!1});let o=new l.Mesh(et,em);if(o.rotation.x=-Math.PI/2,o.position.y=.22,ew.add(o),!G){let e=new l.WireframeGeometry(et);eh=new l.LineBasicMaterial({color:1712168,transparent:!0,opacity:.12});let t=new l.LineSegments(e,eh);t.rotation.x=-Math.PI/2,t.position.y=.1,ew.add(t)}for(let e of(ef=new l.ShaderMaterial({uniforms:{uOutlineTex:{value:ed},uTopoTex:{value:es},uReveal:{value:.001},uShade:{value:G?.94:.88}},vertexShader:`
            varying vec2 vUv;
            void main() {
              vUv = uv;
              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
          `,fragmentShader:`
            uniform sampler2D uOutlineTex;
            uniform sampler2D uTopoTex;
            uniform float uReveal;
            uniform float uShade;
            varying vec2 vUv;
            void main() {
              float blend = smoothstep(uReveal - 0.02, uReveal + 0.02, vUv.x);
              vec3 outlineCol = texture2D(uOutlineTex, vUv).rgb;
              vec3 topoCol = texture2D(uTopoTex, vUv).rgb;
              vec3 color = mix(outlineCol, topoCol, blend) * uShade;
              gl_FragColor = vec4(color, 1.0);
            }
          `,side:l.DoubleSide}),["north","south","west","east"])){let t="north"===e||"south"===e?219:B-1,r=function(e,t,r,o,n,a){let i=[],d=[],s=[];for(let l=0;l<=t;l++){let s=l/Math.max(1,t),u=s,c=s;"north"===e?(u=s,c=0):"south"===e?(u=s,c=1):(u="west"===e?0:1,c=s);let h=-o/2+u*o,p=-n/2+c*n,m=r(u,c),f=h,g=p;"north"===e&&(g-=2.8),"south"===e&&(g+=2.8),"west"===e&&(f-=2.8),"east"===e&&(f+=2.8),i.push(h,m,p),i.push(f,a,g),d.push(u,c),d.push(u,c)}for(let e=0;e<t;e++){let t=2*e;s.push(t,t+1,t+2),s.push(t+1,t+3,t+2)}let u=new l.BufferGeometry;return u.setAttribute("position",new l.Float32BufferAttribute(i,3)),u.setAttribute("uv",new l.Float32BufferAttribute(d,2)),u.setIndex(s),u.computeVertexNormals(),u}(e,t,ea,162,ee,en),o=new l.Mesh(r,ef);ew.add(o),ex.push(o)}let d=new l.PlaneGeometry(162,ee);(ev=new l.Mesh(d,ef)).rotation.x=-Math.PI/2,ev.position.y=en,ew.add(ev);let s=new l.Box3().setFromObject(ew),u=s.getCenter(new l.Vector3),c=s.getSize(new l.Vector3),p=Math.max(24,.55*Math.max(c.x,c.y,c.z));el.introTarget.copy(u).add(new l.Vector3(0,.08*c.y,0)),el.finalTarget.copy(u).add(new l.Vector3(0,.05*c.y,0)),el.introPos.copy(el.introTarget).add(new l.Vector3(-(.34*p),1.04*p,1.52*p)),el.finalPos.copy(el.finalTarget).add(new l.Vector3(.18*p,1.14*p,1.7*p)),el.introScale=1.24,el.finalScale=1,el.introOffsetY=.22,el.finalOffsetY=0,ei.minDistance=Math.max(42,.82*p),ei.maxDistance=Math.max(220,3.9*p),ei.target.copy(el.introTarget),y.position.copy(el.introPos);let f=performance.now(),g=e=>{O.current!==e&&(O.current=e,_(e))},x=r=>{var o,d,s,u,c,p,v,M,b,T,E,N,P,I,R,j,F,G,D,$,A,L,V,_;if(!eu)return;let k=r-f,z=1,W=1;a?(z=.001,W=0,k<=400?g("initializing"):k<=2100?(g("revealing"),z=h((k-400)/1700,0,1)):k<=3400?(g("docking"),z=1,W=h((k-400-1700)/1300,0,1)):(g("interactive"),z=1,W=1,ei.enabled=!0)):(g("interactive"),z=1,W=1,ei.enabled=!0),ep&&(ep.uniforms.uReveal.value=z),ef instanceof l.ShaderMaterial&&(ef.uniforms.uReveal.value=z);let Y=1-Math.pow(1-W,3);if(y.position.set((o=el.introPos.x,d=el.finalPos.x,o+(d-o)*Y),(s=el.introPos.y,u=el.finalPos.y,s+(u-s)*Y),(c=el.introPos.z,p=el.finalPos.z,c+(p-c)*Y)),ei.target.set((v=el.introTarget.x,M=el.finalTarget.x,v+(M-v)*Y),(b=el.introTarget.y,T=el.finalTarget.y,b+(T-b)*Y),(E=el.introTarget.z,N=el.finalTarget.z,E+(N-E)*Y)),ew.scale.setScalar((P=el.introScale,I=el.finalScale,P+(I-P)*Y)),ew.position.y=(R=el.introOffsetY,j=el.finalOffsetY,R+(j-R)*Y),ew.rotation.y=r*(8e-5+-.000035000000000000004*Y)+(.22+-.22*Y),n&&a&&!eM){let t=e.getBoundingClientRect(),r=w(),o=(F=r.left,G=t.left,F+(G-F)*Y),a=(D=r.top,$=t.top,D+($-D)*Y),i=(A=r.width,L=t.width,A+(L-A)*Y),l=(V=r.height,_=t.height,V+(_-V)*Y);n.style.left=`${o}px`,n.style.top=`${a}px`,n.style.width=`${i}px`,n.style.height=`${l}px`,n.style.borderRadius=`${Math.round(28+-8*Y)}px`,n.style.boxShadow=`0 ${Math.round(24+-6*Y)}px ${Math.round(78+-22*Y)}px rgba(2,8,23,${(.22+-.04000000000000001*Y).toFixed(3)})`,C(i,l)}"interactive"===O.current&&n&&a&&!eM&&(eM=!0,e.innerHTML="",e.appendChild(S.domElement),C(e.clientWidth||900,e.clientHeight||520),eb||(eb=!0,U(!1),t&&(t.style.opacity="0"),m.current||(m.current=!0),H())),ei.update(),S.render(i,y),ec=requestAnimationFrame(x)};ec=requestAnimationFrame(x)}catch(e){if(!eu)return;$(String(e?.message||"hero_render_failed"))}})();let eN=()=>{if(n&&a&&!eM){let e=w();n.style.left=`${e.left}px`,n.style.top=`${e.top}px`,n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,C(e.width,e.height)}else C(e.clientWidth||900,e.clientHeight||520)};return window.addEventListener("resize",eN),()=>{eu=!1,cancelAnimationFrame(ec),window.removeEventListener("resize",eN),S.domElement.removeEventListener("pointermove",eT),S.domElement.removeEventListener("pointerleave",eE),ei.dispose(),et.dispose(),eg?.dispose(),ep?.dispose(),em?.dispose(),eh?.dispose(),ed?.dispose(),es?.dispose(),ex.forEach(e=>{e.geometry.dispose()}),ev&&ev.geometry.dispose(),ef?.dispose(),u?.dispose(),S.dispose(),S.domElement.parentNode===e&&e.removeChild(S.domElement),n&&S.domElement.parentNode===n&&n.removeChild(S.domElement),b.current=!1}},[P,R,F,E,T]),D)?n.jsx("div",{className:"flex h-[26rem] items-center justify-center rounded-2xl border border-amber-300 bg-amber-50/70 px-4 text-center dark:border-amber-700 dark:bg-amber-950/30",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("p",{className:"inline-flex items-center gap-2 text-sm font-medium text-amber-900 dark:text-amber-100",children:[n.jsx(s.Z,{className:"h-4 w-4"}),"Hero map currently unavailable"]}),n.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:D||"Please retry in a moment."})]})}):(0,n.jsxs)("div",{className:"relative",children:[k&&E&&(0,i.createPortal)(n.jsx("div",{ref:o,className:"pointer-events-none fixed inset-0 z-[80] bg-[hsl(var(--background))] transition-opacity duration-300"}),E),k&&E&&(0,i.createPortal)(n.jsx("div",{ref:c,className:"pointer-events-none fixed z-[81] overflow-hidden rounded-[28px] border border-border bg-[hsl(var(--background))]"}),E),n.jsx("div",{ref:r,className:`h-[28rem] w-full overflow-hidden rounded-2xl border border-cyan-700/20 bg-[hsl(var(--background))] transition-opacity duration-500 ${k?"opacity-0":"opacity-100"}`}),!k&&P&&(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:"absolute left-3 top-3 rounded-full border border-cyan-400/30 bg-[#081226]/80 px-3 py-1 text-[11px] uppercase tracking-[0.12em] text-cyan-100",children:"interactive"===V?"Interactive":V}),(0,n.jsxs)("div",{className:"absolute right-3 top-3 rounded-full border border-cyan-400/30 bg-[#081226]/80 px-3 py-1 text-[11px] text-cyan-100",children:[P.legend.metric.toUpperCase()," | ",R?.source||P.source]})]}),A&&!k&&(0,n.jsxs)("div",{className:"pointer-events-none absolute z-20 rounded-md border border-cyan-400/50 bg-[#081226]/90 px-2 py-1 text-[11px] text-cyan-100",style:{left:Math.min(A.x+14,(r.current?.clientWidth||0)-120),top:Math.max(8,A.y-26)},children:["NDVI ",A.ndvi.toFixed(3)]}),P&&(0,n.jsxs)("div",{className:"mt-3 rounded-xl border border-border bg-card/70 p-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.12em] text-muted-foreground",children:[n.jsx("span",{children:"NDVI Legend"}),n.jsx("span",{children:P.legend.unit})]}),n.jsx("div",{className:"mt-2 h-3 w-full overflow-hidden rounded-sm border border-black/15",children:n.jsx("div",{className:"h-full w-full",style:{background:`linear-gradient(90deg, ${z.map(e=>`rgb(${e.color[0]}, ${e.color[1]}, ${e.color[2]})`).join(", ")})`}})}),(0,n.jsxs)("div",{className:"mt-1 flex items-center justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:P.legend.min.toFixed(3)}),n.jsx("span",{children:P.legend.max.toFixed(3)})]})]})]})}[l,d]=c.then?(await c)():c,o()}catch(e){o(e)}})},8098:(e,t,r)=>{r.d(t,{CS:()=>o,G5:()=>l,TU:()=>i,t7:()=>a,uZ:()=>n});let o={ndvi:[{stop:0,color:[93,123,223]},{stop:.16,color:[110,177,236]},{stop:.32,color:[106,219,226]},{stop:.5,color:[129,216,156]},{stop:.68,color:[232,220,124]},{stop:.84,color:[242,176,114]},{stop:1,color:[226,126,134]}],soil:[{stop:0,color:[106,128,214]},{stop:.2,color:[122,182,232]},{stop:.4,color:[121,219,196]},{stop:.58,color:[152,214,149]},{stop:.76,color:[236,204,126]},{stop:1,color:[214,139,102]}],et:[{stop:0,color:[98,120,218]},{stop:.2,color:[109,165,232]},{stop:.4,color:[114,217,223]},{stop:.6,color:[146,214,149]},{stop:.78,color:[241,197,116]},{stop:1,color:[226,126,110]}]};function n(e,t,r){return Math.max(t,Math.min(r,e))}function a(e,t,r){return e+(t-e)*r}function i(e,t){let r=o[e],a=n(t,0,1);for(let e=0;e<r.length-1;e++){let t=r[e],o=r[e+1];if(a<=o.stop){var i,l,d;let e=(a-t.stop)/Math.max(1e-6,o.stop-t.stop);return[Math.round((i=t.color[0])+(o.color[0]-i)*e),Math.round((l=t.color[1])+(o.color[1]-l)*e),Math.round((d=t.color[2])+(o.color[2]-d)*e)]}}return r[r.length-1].color}function l(e){return`linear-gradient(90deg, ${o[e].map(e=>`rgb(${e.color[0]}, ${e.color[1]}, ${e.color[2]}) ${Math.round(100*e.stop)}%`).join(", ")})`}}};
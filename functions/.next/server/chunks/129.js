exports.id=129,exports.ids=[129],exports.modules={6316:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(1373).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2751:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>g});var a=r(997),n=r(6689),i=r.n(n),o=r(1664),d=r.n(o),l=r(7716),c=r(6789),u=r(1352),m=r(7232),h=r(7497),p=r(317),x=e([h,p]);[h,p]=x.then?(await x)():x;let y=[{href:"/",label:"Home"},{href:"/dashboard",label:"Dashboard"},{href:"/plots",label:"Plots"},{href:"/account",label:"Account"}],b=/^\/(dashboard|plots|account|ingest)(\/|$)/;function f(e){return b.test(e)?`/api/session/enter?next=${encodeURIComponent(e)}`:e}function g(){let[e,t]=i().useState([]),[r,s]=i().useState(!1),[n,o]=i().useState(!1);i().useEffect(()=>{let e=e=>{t(Array.isArray(e.detail)?e.detail:[])};return window.addEventListener("agrisense:alerts",e),()=>window.removeEventListener("agrisense:alerts",e)},[]);let x=e.filter(e=>"critical"===e.type).length;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{className:"liquid-glass sticky top-0 z-40 border-b border-border bg-background/95 backdrop-blur",children:[(0,a.jsxs)("div",{className:"mx-auto flex h-16 w-full max-w-7xl items-center justify-between px-4 sm:px-6",children:[(0,a.jsxs)(d(),{href:"/",className:"inline-flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-xl bg-primary text-primary-foreground",children:a.jsx(l.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("span",{children:[a.jsx("span",{className:"block text-sm font-semibold leading-none text-foreground",children:"AgriSense"}),a.jsx("span",{className:"block text-[11px] uppercase tracking-[0.16em] text-muted-foreground",children:"Field Ops"})]})]}),a.jsx("nav",{className:"hidden items-center gap-5 md:flex",children:y.map(e=>a.jsx(d(),{href:f(e.href),className:"text-sm font-medium text-muted-foreground transition hover:text-primary",children:e.label},e.href))}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>o(e=>!e),className:"relative inline-flex h-10 w-10 items-center justify-center rounded-xl border border-border bg-card text-muted-foreground hover:border-primary/40 hover:text-foreground","aria-label":"Open alerts",children:[a.jsx(c.Z,{className:"h-4 w-4"}),e.length>0&&a.jsx("span",{className:"absolute -right-1 -top-1 rounded-full bg-rose-600 px-1.5 py-0.5 text-[10px] font-semibold text-white",children:x||e.length})]}),a.jsx(p.Z,{}),a.jsx(h.z,{variant:"outline",size:"icon",className:"md:hidden",onClick:()=>s(e=>!e),children:r?a.jsx(u.Z,{className:"h-4 w-4"}):a.jsx(m.Z,{className:"h-4 w-4"})})]})]}),r&&a.jsx("nav",{className:"border-t border-border bg-background px-4 py-3 md:hidden",children:(0,a.jsxs)("div",{className:"space-y-2",children:[y.map(e=>a.jsx(d(),{href:f(e.href),onClick:()=>s(!1),className:"block rounded-lg px-3 py-2 text-sm font-medium text-muted-foreground hover:bg-muted hover:text-primary",children:e.label},e.href)),a.jsx("div",{className:"pt-2",children:a.jsx(p.Z,{})})]})})]}),n&&(0,a.jsxs)("aside",{className:"liquid-glass fixed right-4 top-20 z-50 w-[min(95vw,26rem)] rounded-2xl border border-border bg-card shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Alert Center"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Active agronomy and system alerts"})]}),a.jsx("button",{onClick:()=>o(!1),className:"text-muted-foreground hover:text-foreground",children:a.jsx(u.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"max-h-80 space-y-2 overflow-auto p-3",children:[!e.length&&a.jsx("p",{className:"rounded-lg bg-muted p-3 text-sm text-muted-foreground",children:"No active alerts."}),e.map((e,t)=>(0,a.jsxs)("article",{className:"critical"===e.type?"alert-card alert-card-critical":"alert-card alert-card-warning",children:[a.jsx("p",{className:"alert-title",children:e.message||"Alert"}),a.jsx("p",{className:"alert-copy",children:e.details||"No additional details provided."}),e.plotName&&a.jsx("p",{className:"alert-meta",children:e.plotName})]},`${e.id||t}`))]})]})]})}s()}catch(e){s(e)}})},317:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>u});var a=r(997),n=r(690),i=r(8532),o=r(250),d=r(7497),l=r(6689),c=e([n,d]);function u(){let[e,t]=(0,l.useState)(!1),{theme:r,setTheme:s}=(0,n.useTheme)();if((0,l.useEffect)(()=>{t(!0)},[]),!e)return a.jsx(d.z,{variant:"ghost",size:"icon","aria-label":"Toggle theme",children:a.jsx(i.Z,{className:"h-4 w-4"})});let c="dark"===r;return a.jsx(d.z,{variant:"ghost",size:"icon","aria-label":"Toggle theme",onClick:()=>s(c?"light":"dark"),children:c?a.jsx(i.Z,{className:"h-4 w-4"}):a.jsx(o.Z,{className:"h-4 w-4"})})}[n,d]=c.then?(await c)():c,s()}catch(e){s(e)}})},7497:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{z:()=>c});var a=r(997),n=r(6689),i=r(6926),o=r(1966),d=e([i,o]);[i,o]=d.then?(await d)():d;let l=(0,i.cva)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:opacity-90",secondary:"bg-secondary text-secondary-foreground hover:opacity-90",outline:"border bg-transparent hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:opacity-90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef(({className:e,variant:t,size:r,...s},n)=>a.jsx("button",{className:(0,o.cn)(l({variant:t,size:r,className:e})),ref:n,...s}));c.displayName="Button",s()}catch(e){s(e)}})},1966:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{cn:()=>o});var a=r(6593),n=r(8097),i=e([a,n]);function o(...e){return(0,n.twMerge)((0,a.clsx)(e))}[a,n]=i.then?(await i)():i,s()}catch(e){s(e)}})},8704:(e,t,r)=>{"use strict";r.d(t,{$D:()=>i,GY:()=>s,eR:()=>l,k1:()=>o,pb:()=>d});class s extends Error{constructor(e,t,r){super(e),this.name="ApiClientError",this.code=t,this.status=r}}async function a(e){try{return await e.json()}catch{return{}}}async function n(e,t){let r=await fetch(e,t),n=await a(r);if(!r.ok)throw new s(n?.message||n?.error||`Request failed (${r.status})`,n?.error||"request_failed",r.status);return n}function i(e){return e instanceof s?"invalid_auth"===e.code?"Authentication token is invalid or expired. Sign in again and retry.":401===e.status?"Sign-in expired. Please sign in again.":403===e.status?"You do not have access to this plot.":408===e.status?"Request timed out. Retry in a few seconds.":413===e.status||"plot_payload_too_large"===e.code?"Plot snapshot is too large to save. Re-run analysis and retry.":"invalid_geometry"===e.code?"Selected area geometry is invalid. Redraw the AOI and retry.":"invalid_payload"===e.code?"Plot payload contains unsupported values.":503===e.status||"firebase_admin_misconfigured"===e.code?"Server save service is misconfigured. Check Firebase Admin credentials.":"validation_failed"===e.code?"Some required fields are missing.":e.message||"Save failed. Please retry.":"Network issue. Check connection and retry."}async function o(e){let t=await n("/api/items",{method:"GET",headers:{Authorization:`Bearer ${e}`}});return Array.isArray(t.items)?t.items:[]}async function d(e,t){return await n("/api/items",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)})}async function l(e,t){await n(`/api/plots/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}})}},6394:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{I8:()=>l,oy:()=>c});var a=r(3745),n=r(401),i=e([a,n]);[a,n]=i.then?(await i)():i;let o={apiKey:process.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:process.env.NEXT_PUBLIC_FIREBASE_APP_ID},d=Object.values(o).every(e=>"string"==typeof e&&e.length>0),l=null,c=d;s()}catch(e){s(e)}})},1484:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>m});var a=r(997);r(6764);var n=r(690),i=r(5152),o=r.n(i),d=r(4298),l=r.n(d),c=r(6689),u=e([n]);n=(u.then?(await u)():u)[0];let h=o()(()=>Promise.resolve().then(r.bind(r,7270)).then(e=>e.Toaster),{loadableGenerated:{modules:["_app.tsx -> sonner"]},ssr:!1});function m({Component:e,pageProps:t}){return(0,c.useEffect)(()=>{let e=console.error;console.error=(...t)=>{let r=t.map(e=>String(e||"")).join(" ").toLowerCase();r.includes("err_blocked_by_client")&&(r.includes("amplitude")||r.includes("api2.amplitude.com")||r.includes("telemetry"))||e(...t)};let t=e=>{let t=String(e?.reason||"").toLowerCase();t.includes("err_blocked_by_client")&&t.includes("amplitude")&&e.preventDefault()};return window.addEventListener("unhandledrejection",t),Promise.resolve().then(r.t.bind(r,6933,23)).then(e=>{try{let t=e?.default||e;"function"==typeof t?.setTelemetryEnabled&&t.setTelemetryEnabled(!1)}catch{}}).catch(()=>{}),()=>{console.error=e,window.removeEventListener("unhandledrejection",t)}},[]),(0,a.jsxs)(a.Fragment,{children:[a.jsx(l(),{id:"theme-init",strategy:"beforeInteractive",children:`
          (function() {
            try {
              const theme = localStorage.getItem('theme') || 'system';
              const isDark = theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches);
              if (isDark) {
                document.documentElement.classList.add('dark');
              } else {
                document.documentElement.classList.remove('dark');
              }
            } catch (e) {}
          })();
        `}),(0,a.jsxs)(n.ThemeProvider,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!1,storageKey:"theme",children:[a.jsx(h,{richColors:!0,position:"top-center"}),a.jsx(e,{...t})]})]})}s()}catch(e){s(e)}})},6764:()=>{}};
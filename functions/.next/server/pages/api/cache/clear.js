"use strict";(()=>{var e={};e.id=638,e.ids=[638],e.modules={2509:e=>{e.exports=require("firebase-admin")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},6249:(e,r)=>{Object.defineProperty(r,"l",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},2356:(e,r,t)=>{t.r(r),t.d(r,{config:()=>u,default:()=>c,routeModule:()=>l});var n={};t.r(n),t.d(n,{default:()=>s});var i=t(1802),a=t(7153),o=t(6249);async function s(e,r){return"POST"!==e.method?r.status(405).json({error:"method_not_allowed"}):r.status(403).json({error:"forbidden",message:"Cache clear route is disabled in production."})}t(8851),t(535);let c=(0,o.l)(n,"default"),u=(0,o.l)(n,"config"),l=new i.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/cache/clear",pathname:"/api/cache/clear",bundlePath:"",filename:""},userland:n})},535:(e,r,t)=>{t.d(r,{D:()=>l,_:()=>u});var n=t(2509),i=t.n(n);class a extends Error{constructor(e,r){super(e),this.name="FirebaseAdminConfigError",this.code="firebase_admin_misconfigured",this.hint=r}}let o="idle",s=null;function c(){if("ready"!==o){if("failed"===o&&s)throw s;try{if(!i().apps.length){let e=process.env.FIREBASE_SERVICE_ACCOUNT_JSON;if(e){let r=function(e){let r;try{r=JSON.parse(e)}catch{throw new a("FIREBASE_SERVICE_ACCOUNT_JSON is not valid JSON.","Use a single-line JSON string from your Firebase service account key.")}if(!r||"object"!=typeof r)throw new a("FIREBASE_SERVICE_ACCOUNT_JSON is missing or invalid.","Set FIREBASE_SERVICE_ACCOUNT_JSON to the full service account JSON.");let t=String(r.private_key||"").replace(/\\n/g,"\n").trim();if(!(t.startsWith("-----BEGIN PRIVATE KEY-----")&&t.endsWith("-----END PRIVATE KEY-----")))throw new a("Firebase private key is not in valid PEM format.","Ensure private_key contains BEGIN/END markers and escaped newlines (\\\\n) in .env.");return{...r,private_key:t}}(e);i().initializeApp({credential:i().credential.cert(r),projectId:r.project_id||"brightbite-81e92"})}else i().initializeApp()}o="ready",s=null}catch(e){throw o="failed",s=function(e){if(e instanceof a)return e;let r=String(e?.message||e||"Unknown Firebase Admin error"),t=r.toLowerCase();return t.includes("pem")||t.includes("private key")||t.includes("credential")?new a(r,"Rotate and re-add FIREBASE_SERVICE_ACCOUNT_JSON. Ensure private_key newline escaping is correct."):e instanceof Error?e:Error(r)}(e)}}}function u(){return c(),i().firestore()}function l(){return c(),i().auth()}},8851:(e,r,t)=>{t.d(r,{NI:()=>c,Xb:()=>s,kw:()=>o,sA:()=>u});var n=t(6113);let i=globalThis;function a(){return i.__agrisenseMemoryCache||(i.__agrisenseMemoryCache=new Map),i.__agrisenseMemoryCache}function o(e){return(0,n.createHash)("sha1").update(e.join("|")).digest("hex")}function s(e){let r=a(),t=r.get(e);return t?Date.now()>t.expiresAt?(r.delete(e),null):t.value:null}function c(e,r,t){a().set(e,{value:r,expiresAt:Date.now()+t})}function u(e){let r=a();if(!e){let e=r.size;return r.clear(),e}let t=0,n=[];return r.forEach((r,t)=>{t.startsWith(e)&&n.push(t)}),n.forEach(e=>{r.delete(e)&&(t+=1)}),t}},7153:(e,r)=>{var t;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},1802:(e,r,t)=>{e.exports=t(145)}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=r(r.s=2356);module.exports=t})();